<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#020402">
    
    <!-- SEO & Metadata -->
    <title>KarChain | The Modular Consensus Layer & Testnet</title>
    <meta name="description" content="KarChain is a hyper-scalable Layer-1 blockchain featuring Adaptive State Sharding and Proof-of-Synchrony. Join the Incentivized Testnet to earn KRM rewards.">
    <meta name="keywords" content="Karchain, KRM token, Blockchain, Testnet, Airdrop, Layer 1, Crypto, Modular Consensus, Web3, Trust Wallet, MetaMask">
    <meta name="author" content="Karchain Foundation">
    <meta property="og:title" content="KarChain Testnet Live">
    <meta property="og:description" content="Join the future of decentralized consensus. Earn KRM rewards today.">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/12409/12409608.png">
    
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/12409/12409608.png">
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- GLOBAL STYLES --- */
        :root {
            --color-bg: #020402;
            --color-text: #e5e5e5;
            --color-primary: #4ade80;
            --color-primary-dark: #15803d;
            --glass-bg: rgba(10, 10, 10, 0.6);
            --glass-border: rgba(255, 255, 255, 0.08);
        }

        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            position: relative;
            scroll-behavior: smooth;
        }

        h1, h2, h3, h4, .brand-font {
            font-family: 'Space Grotesk', sans-serif;
            letter-spacing: -0.02em;
        }

        /* --- BACKGROUND FX --- */
        #bg-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; opacity: 0.2;
            pointer-events: none;
        }
        
        .bg-grid {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                linear-gradient(rgba(74, 222, 128, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(74, 222, 128, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -3;
            pointer-events: none;
            mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
        }

        /* --- 3D ANIMATIONS --- */
        .gyro-container {
            position: relative;
            width: 260px;
            height: 260px;
            margin: 0 auto;
            perspective: 1000px;
            transform-style: preserve-3d;
        }

        .gyro-ring {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(74, 222, 128, 0.15);
            transform-style: preserve-3d;
        }

        .g-ring1 { width: 100%; height: 100%; border: 1px solid rgba(74, 222, 128, 0.8); border-left-color: transparent; border-right-color: transparent; animation: rotate-x 8s linear infinite; }
        .g-ring2 { width: 80%; height: 80%; border: 2px solid rgba(34, 197, 94, 0.6); border-top-color: transparent; border-bottom-color: transparent; animation: rotate-y 6s linear infinite; }
        .g-ring3 { width: 60%; height: 60%; border: 1px dashed rgba(74, 222, 128, 0.4); animation: rotate-z 12s linear infinite; }

        .gyro-core {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 80px; height: 80px;
            background: radial-gradient(circle, rgba(74,222,128,0.3) 0%, rgba(0,0,0,0) 70%);
            border-radius: 50%;
            box-shadow: 0 0 50px rgba(74,222,128,0.4);
            animation: pulse-core 3s ease-in-out infinite;
            z-index: 10;
            display: flex; align-items: center; justify-content: center;
        }

        .gyro-logo {
            width: 60%; height: 60%;
            filter: drop-shadow(0 0 10px #4ade80);
            animation: float-logo 4s ease-in-out infinite;
        }

        @keyframes rotate-x { 0% { transform: translate(-50%, -50%) rotateX(0deg); } 100% { transform: translate(-50%, -50%) rotateX(360deg); } }
        @keyframes rotate-y { 0% { transform: translate(-50%, -50%) rotateY(0deg); } 100% { transform: translate(-50%, -50%) rotateY(360deg); } }
        @keyframes rotate-z { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }
        @keyframes pulse-core { 0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; } 50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.4; } }
        @keyframes float-logo { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }

        /* --- UI COMPONENTS --- */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .glass-panel:hover {
            border-color: rgba(74, 222, 128, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(74, 222, 128, 0.1);
        }

        .nav-btn {
            position: relative;
            overflow: hidden;
        }
        .nav-btn::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: 0.5s;
        }
        .nav-btn:hover::before { left: 100%; }

        .text-gradient {
            background: linear-gradient(135deg, #fff 0%, #4ade80 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* --- SECTION TRANSITIONS --- */
        .page-section {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .page-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* --- UTILS --- */
        .task-locked {
            opacity: 0.5; pointer-events: none; filter: grayscale(1); position: relative;
        }
        .task-locked::after {
            content: '\f023'; font-family: "Font Awesome 6 Free"; font-weight: 900;
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 24px; color: rgba(255,255,255,0.5);
            background: rgba(0,0,0,0.8); padding: 12px; border-radius: 50%;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0a0a0a; }
        ::-webkit-scrollbar-thumb { background: #15803d; border-radius: 3px; }
        
        #userDropdown { transform-origin: top right; transition: all 0.2s ease; }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Background -->
    <div class="bg-grid"></div>
    <canvas id="bg-canvas"></canvas>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-panel border-b-0 border-white/5 rounded-b-2xl mx-auto max-w-[1600px] left-0 right-0 top-0">
        <div class="px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                
                <!-- Logo -->
                <div class="flex items-center gap-3 cursor-pointer z-50 group" onclick="App.router.navigate('home')">
                    <div class="w-10 h-10 flex items-center justify-center filter drop-shadow-[0_0_8px_rgba(74,222,128,0.5)] transition-transform group-hover:scale-110">
                        <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
                            <path d="M25 10 V90" stroke="#4ade80" stroke-width="8" stroke-linecap="round"/>
                            <path d="M85 10 L25 50 L85 90" stroke="#4ade80" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="25" cy="50" r="8" fill="#22c55e"/>
                        </svg>
                    </div>
                    <span class="text-white font-bold text-xl tracking-[0.15em] brand-font group-hover:text-green-400 transition-colors hidden sm:block">KARCHAIN</span>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8">
                    <button onclick="App.router.navigate('home')" id="nav-home" class="text-gray-400 hover:text-white text-sm font-bold uppercase tracking-widest transition-colors py-2 border-b-2 border-transparent hover:border-green-500 active-nav">Testnet</button>
                    <button onclick="App.router.navigate('about')" id="nav-about" class="text-gray-400 hover:text-white text-sm font-bold uppercase tracking-widest transition-colors py-2 border-b-2 border-transparent hover:border-green-500">Vision</button>
                    <button onclick="App.router.navigate('support')" id="nav-support" class="text-gray-400 hover:text-white text-sm font-bold uppercase tracking-widest transition-colors py-2 border-b-2 border-transparent hover:border-green-500">Support</button>
                </div>

                <!-- User Actions -->
                <div class="flex items-center gap-3 relative">
                    <button id="connectBtn" onclick="App.ui.toggleWalletModal()" class="nav-btn bg-white/5 hover:bg-white/10 border border-white/10 text-white px-5 py-2.5 rounded-full text-xs font-bold transition-all uppercase tracking-wide flex items-center gap-2">
                        <i class="fa-solid fa-wallet"></i> <span>Connect Wallet</span>
                    </button>
                    
                    <!-- User Dropdown -->
                    <div id="userDropdown" class="hidden absolute top-14 right-0 w-56 glass-panel border border-white/10 rounded-xl p-2 z-50 shadow-2xl">
                        <div class="px-4 py-3 border-b border-white/10 mb-2">
                            <p class="text-[10px] text-gray-500 uppercase">Connected Network</p>
                            <div class="flex items-center gap-2 mt-1 text-green-400 text-xs font-mono">
                                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div> KarChain Testnet
                            </div>
                        </div>
                        <button onclick="App.wallet.disconnect()" class="w-full text-left px-4 py-2.5 text-xs font-bold text-red-400 hover:bg-red-500/10 rounded-lg transition-colors flex items-center gap-2 uppercase">
                            <i class="fa-solid fa-power-off"></i> Disconnect
                        </button>
                    </div>

                    <button onclick="App.ui.toggleMobileMenu()" class="md:hidden text-gray-300 hover:text-white p-2">
                        <i class="fa-solid fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 bg-black/90 z-40 hidden flex flex-col items-center justify-center space-y-8 backdrop-blur-lg transition-opacity duration-300">
        <button onclick="App.ui.toggleMobileMenu()" class="absolute top-6 right-6 text-gray-400 hover:text-white">
            <i class="fa-solid fa-xmark text-3xl"></i>
        </button>
        <a onclick="App.router.navigate('home'); App.ui.toggleMobileMenu()" class="text-2xl font-bold text-white uppercase tracking-widest">Testnet</a>
        <a onclick="App.router.navigate('about'); App.ui.toggleMobileMenu()" class="text-2xl font-bold text-white uppercase tracking-widest">Vision</a>
        <a onclick="App.router.navigate('support'); App.ui.toggleMobileMenu()" class="text-2xl font-bold text-white uppercase tracking-widest">Support</a>
    </div>

    <!-- Wallet Modal -->
    <div id="walletModal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/80 backdrop-blur-sm">
        <div class="glass-panel p-8 rounded-2xl w-full max-w-sm mx-4 relative border border-green-500/20 shadow-[0_0_50px_rgba(74,222,128,0.1)]">
            <button onclick="App.ui.toggleWalletModal()" class="absolute top-4 right-4 text-gray-500 hover:text-white transition-colors">
                <i class="fa-solid fa-xmark text-xl"></i>
            </button>
            
            <h3 class="text-lg font-bold text-white mb-6 text-center uppercase tracking-widest">Select Wallet</h3>
            
            <div class="space-y-3">
                <!-- MetaMask -->
                <button onclick="App.wallet.connect('MetaMask')" class="w-full flex items-center justify-between p-4 rounded-xl bg-white/5 hover:bg-orange-500/10 border border-white/10 hover:border-orange-500/50 transition-all group">
                    <div class="flex items-center gap-4">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" class="w-8 h-8" alt="MetaMask">
                        <span class="font-bold text-white group-hover:text-orange-400">MetaMask</span>
                    </div>
                    <i class="fa-solid fa-chevron-right text-gray-600 group-hover:text-orange-500"></i>
                </button>
                
                <!-- Trust Wallet -->
                <button onclick="App.wallet.connect('Trust')" class="w-full flex items-center justify-between p-4 rounded-xl bg-white/5 hover:bg-blue-500/10 border border-white/10 hover:border-blue-500/50 transition-all group">
                    <div class="flex items-center gap-4">
                        <img src="https://trustwallet.com/assets/images/media/assets/trust_platform.svg" class="w-8 h-8" alt="Trust">
                        <span class="font-bold text-white group-hover:text-blue-400">Trust Wallet</span>
                    </div>
                    <i class="fa-solid fa-chevron-right text-gray-600 group-hover:text-blue-500"></i>
                </button>
            </div>
            
            <p class="text-center text-gray-500 text-[10px] mt-6 uppercase tracking-wider">Secure Enclave Connection</p>
        </div>
    </div>

    <!-- Main Content -->
    <main class="flex-grow pt-32 pb-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full relative z-10">

        <!-- === SECTION 1: TESTNET === -->
        <section id="home" class="page-section active">
            <div class="text-center py-12 lg:py-20 relative">
                <!-- Glow Effect -->
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-green-500/10 blur-[100px] -z-10 rounded-full"></div>
                
                <h1 class="text-4xl md:text-7xl font-bold mb-6 text-white tracking-tight leading-none">
                    THE ARCHITECTURE OF <br> <span class="text-gradient">DIGITAL TRUST</span>
                </h1>
                <p class="text-gray-400 max-w-2xl mx-auto mb-10 text-sm md:text-lg font-light leading-relaxed">
                    Participate in the Genesis Epoch of KarChain. Validate the modular consensus layer and secure your allocation of the genesis block.
                </p>
                
                <div class="flex justify-center gap-4">
                    <button onclick="App.ui.scrollTo('dashboard-panel')" class="px-8 py-3 bg-green-600 hover:bg-green-500 text-black font-bold rounded-full transition-all shadow-[0_0_30px_rgba(34,197,94,0.3)] hover:scale-105">
                        Start Testing
                    </button>
                </div>
            </div>

            <!-- Dashboard Panel -->
            <div id="dashboard-panel" class="max-w-4xl mx-auto glass-panel rounded-3xl p-1 overflow-hidden border-t border-white/10 relative">
                <div class="absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-green-500 to-transparent opacity-50"></div>
                
                <div class="bg-black/60 backdrop-blur-xl p-6 md:p-10 rounded-[22px]">
                    <!-- Not Connected State -->
                    <div id="state-disconnected" class="text-center py-10">
                        <div class="w-16 h-16 bg-white/5 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-white/10">
                            <i class="fa-solid fa-plug text-2xl text-gray-400"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Connect to Dashboard</h3>
                        <p class="text-gray-500 text-sm mb-8 max-w-md mx-auto">Connect your wallet to view your balance, complete tasks, and register for the mainnet whitelist.</p>
                        <button onclick="App.ui.toggleWalletModal()" class="px-8 py-3 border border-green-500/30 hover:bg-green-500/10 text-green-400 rounded-xl font-bold text-sm transition-all uppercase tracking-wider">
                            Connect Wallet
                        </button>
                    </div>

                    <!-- Connected State -->
                    <div id="state-connected" class="hidden">
                        <div class="flex flex-col md:flex-row justify-between items-end mb-10 border-b border-white/5 pb-6">
                            <div>
                                <p class="text-xs text-gray-500 uppercase tracking-widest mb-1">Total Balance</p>
                                <div class="flex items-baseline gap-2">
                                    <span id="displayBalance" class="text-5xl font-bold text-white font-mono">0.00</span>
                                    <span class="text-green-500 font-bold">KAR</span>
                                </div>
                            </div>
                            <div class="mt-4 md:mt-0 text-right">
                                <p class="text-xs text-gray-500 uppercase tracking-widest mb-1">Wallet</p>
                                <p id="displayAddress" class="font-mono text-white bg-white/5 px-3 py-1 rounded text-sm">0x00...0000</p>
                            </div>
                        </div>

                        <!-- Tasks Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- Task 1 -->
                            <div id="task-1" class="bg-white/5 rounded-xl p-6 border border-white/5 hover:border-white/10 transition-all">
                                <div class="flex justify-between mb-4">
                                    <i class="fa-brands fa-x-twitter text-2xl text-white"></i>
                                    <span class="text-[10px] bg-green-500/20 text-green-400 px-2 py-0.5 rounded uppercase font-bold">Required</span>
                                </div>
                                <h4 class="font-bold text-lg text-white mb-1">Social Identity</h4>
                                <p class="text-xs text-gray-400 mb-4 h-8">Follow official channels to verify humanity.</p>
                                <div class="flex gap-2">
                                    <a href="https://x.com/karim7652117665" target="_blank" onclick="App.tasks.start(1)" class="flex-1 py-2 bg-white/10 hover:bg-white/20 text-center rounded text-xs font-bold text-white transition-colors">OPEN</a>
                                    <button id="btn-verify-1" onclick="App.tasks.verify(1)" class="flex-1 py-2 border border-white/20 text-gray-400 rounded text-xs font-bold cursor-not-allowed" disabled>VERIFY</button>
                                </div>
                            </div>

                            <!-- Task 2 -->
                            <div id="task-2" class="bg-white/5 rounded-xl p-6 border border-white/5 hover:border-white/10 transition-all task-locked relative">
                                <div class="flex justify-between mb-4">
                                    <i class="fa-solid fa-chart-simple text-2xl text-blue-400"></i>
                                    <span class="text-[10px] bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded uppercase font-bold">Step 2</span>
                                </div>
                                <h4 class="font-bold text-lg text-white mb-1">Volume Gen</h4>
                                <p class="text-xs text-gray-400 mb-4 h-8">Execute $100+ volume on Testnet DEX.</p>
                                <button onclick="App.tasks.verify(2)" class="w-full py-2 bg-blue-600/20 text-blue-400 border border-blue-500/30 rounded text-xs font-bold hover:bg-blue-600 hover:text-white transition-colors">CHECK STATUS</button>
                            </div>

                            <!-- Task 3 -->
                            <div id="task-3" class="bg-white/5 rounded-xl p-6 border border-white/5 hover:border-white/10 transition-all task-locked relative">
                                <div class="flex justify-between mb-4">
                                    <i class="fa-solid fa-file-signature text-2xl text-purple-400"></i>
                                    <span class="text-[10px] bg-purple-500/20 text-purple-400 px-2 py-0.5 rounded uppercase font-bold">Final</span>
                                </div>
                                <h4 class="font-bold text-lg text-white mb-1">Whitelist</h4>
                                <p class="text-xs text-gray-400 mb-4 h-8">Submit wallet for Genesis Block allocation.</p>
                                <a id="btn-form" href="https://docs.google.com/forms" target="_blank" class="block w-full py-2 bg-purple-600 text-white text-center rounded text-xs font-bold opacity-50 pointer-events-none">OPEN FORM</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- === SECTION 2: VISION === -->
        <section id="about" class="page-section">
            <div class="max-w-6xl mx-auto text-center py-12">
                <h2 class="text-4xl md:text-6xl font-bold mb-16 text-white">MODULAR <span class="text-gradient">ENGINE</span></h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                    <div class="text-left space-y-12">
                        <div class="pl-6 border-l-4 border-green-500">
                            <h3 class="text-2xl font-bold text-white mb-3 font-mono">Hyper-Graph Sharding</h3>
                            <p class="text-gray-400 leading-relaxed">Traditional blockchains are linear. KarChain utilizes a Directed Acyclic Graph (DAG) structure within each shard, allowing for parallel transaction processing. This enables the network to scale horizontally: adding more nodes actually increases throughput rather than slowing it down.</p>
                        </div>
                        <div class="pl-6 border-l-4 border-white/10">
                            <h3 class="text-2xl font-bold text-white mb-3 font-mono">Proof-of-Synchrony</h3>
                            <p class="text-gray-400 leading-relaxed">A next-generation consensus algorithm that eliminates the energy waste of PoW and the centralization risks of DPoS. Validators are selected based on cryptographic verifiable delay functions (VDFs), ensuring fair and unpredictable leader election.</p>
                        </div>
                    </div>
                    
                    <!-- Gyro Animation -->
                    <div class="flex justify-center items-center h-[400px] relative">
                        <div class="absolute inset-0 bg-green-500/5 blur-[80px] rounded-full"></div>
                        <div class="gyro-container">
                            <div class="gyro-ring g-ring1"></div>
                            <div class="gyro-ring g-ring2"></div>
                            <div class="gyro-ring g-ring3"></div>
                            <div class="gyro-core">
                                <svg viewBox="0 0 100 100" fill="none" class="w-12 h-12 text-black fill-current">
                                    <path d="M25 10 V90 M85 10 L25 50 L85 90" stroke="black" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- === SECTION 3: SUPPORT === -->
        <section id="support" class="page-section">
            <div class="max-w-4xl mx-auto py-12">
                <h2 class="text-4xl font-bold text-white text-center mb-12">DEVELOPER RESOURCES</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <a href="https://t.me/tgkarim1" target="_blank" class="glass-panel p-8 rounded-xl group hover:bg-white/5">
                        <div class="flex items-center justify-between mb-4">
                            <i class="fa-solid fa-bug text-2xl text-red-400"></i>
                            <i class="fa-solid fa-arrow-right text-white opacity-0 group-hover:opacity-100 transition-opacity"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Report an Issue</h3>
                        <p class="text-sm text-gray-400">Found a bug in the consensus layer? Submit a report and earn bounties.</p>
                    </a>
                    <a href="https://t.me/tgkarim1" target="_blank" class="glass-panel p-8 rounded-xl group hover:bg-white/5">
                        <div class="flex items-center justify-between mb-4">
                            <i class="fa-brands fa-telegram text-2xl text-blue-400"></i>
                            <i class="fa-solid fa-arrow-right text-white opacity-0 group-hover:opacity-100 transition-opacity"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Validator Chat</h3>
                        <p class="text-sm text-gray-400">Join the private channel for node operators and validators.</p>
                    </a>
                </div>
            </div>
        </section>

    </main>

    <footer class="border-t border-white/5 py-8 text-center">
        <p class="text-[10px] text-gray-600 font-mono uppercase tracking-widest">KarChain Foundation © 2025 • Running on Besu v23.4.4</p>
    </footer>

    <!-- --- APPLICATION LOGIC --- -->
    <script>
        // --- ANIMATIONS ---
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resizeCanvas); resizeCanvas();
        const particles = Array.from({length: 50}, () => ({
            x: Math.random() * canvas.width, y: Math.random() * canvas.height,
            vx: (Math.random() - 0.5) * 0.5, vy: (Math.random() - 0.5) * 0.5,
            size: Math.random() * 2
        }));
        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'rgba(74, 222, 128, 0.3)';
            particles.forEach(p => {
                p.x += p.vx; p.y += p.vy;
                if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2); ctx.fill();
            });
            requestAnimationFrame(animateParticles);
        }
        animateParticles();

        // --- CORE APP LOGIC ---
        const App = {
            config: {
                chainId: 1337, // 0x539
                chainIdHex: '0x539',
                name: 'KarChain',
                rpc: 'https://relationless-improperly-nettie.ngrok-free.dev',
                symbol: 'KAR'
            },
            state: {
                account: null,
                provider: null
            },
            
            // --- UI METHODS ---
            ui: {
                toggleMobileMenu: () => {
                    const menu = document.getElementById('mobile-menu');
                    menu.classList.toggle('hidden');
                    menu.classList.toggle('flex');
                },
                toggleWalletModal: () => {
                    const modal = document.getElementById('walletModal');
                    modal.classList.toggle('hidden');
                    modal.classList.toggle('flex');
                },
                toggleDropdown: () => {
                    document.getElementById('userDropdown').classList.toggle('hidden');
                },
                scrollTo: (id) => {
                    document.getElementById(id).scrollIntoView({behavior: 'smooth'});
                },
                updateState: (isConnected) => {
                    const disc = document.getElementById('state-disconnected');
                    const conn = document.getElementById('state-connected');
                    const btn = document.getElementById('connectBtn');
                    
                    if (isConnected) {
                        disc.classList.add('hidden');
                        conn.classList.remove('hidden');
                        // Format address: 0x1234...5678
                        const addr = App.state.account;
                        const fmtAddr = `${addr.substring(0,6)}...${addr.substring(addr.length-4)}`;
                        
                        document.getElementById('displayAddress').innerText = fmtAddr;
                        
                        // Update Header Button
                        btn.innerHTML = `<div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div> ${fmtAddr}`;
                        btn.classList.add('border-green-500/50', 'bg-green-500/10');
                        btn.onclick = App.ui.toggleDropdown; // Change click action to dropdown
                    } else {
                        disc.classList.remove('hidden');
                        conn.classList.add('hidden');
                        btn.innerHTML = '<i class="fa-solid fa-wallet"></i> <span>Connect Wallet</span>';
                        btn.classList.remove('border-green-500/50', 'bg-green-500/10');
                        btn.onclick = App.ui.toggleWalletModal;
                        document.getElementById('userDropdown').classList.add('hidden');
                    }
                }
            },

            // --- ROUTER ---
            router: {
                navigate: (pageId) => {
                    document.querySelectorAll('.page-section').forEach(el => {
                        el.style.opacity = '0';
                        el.style.transform = 'translateY(20px)';
                        setTimeout(() => {
                            el.classList.remove('active');
                            if (el.id === pageId) {
                                el.classList.add('active');
                                setTimeout(() => {
                                    el.style.opacity = '1';
                                    el.style.transform = 'translateY(0)';
                                }, 50);
                            }
                        }, 300);
                    });
                    
                    // Update Nav Active State
                    document.querySelectorAll('nav button').forEach(btn => {
                        btn.classList.remove('text-white', 'border-green-500');
                        btn.classList.add('text-gray-400', 'border-transparent');
                    });
                    const activeBtn = document.getElementById('nav-' + pageId);
                    if(activeBtn) {
                        activeBtn.classList.remove('text-gray-400', 'border-transparent');
                        activeBtn.classList.add('text-white', 'border-green-500');
                    }
                    window.scrollTo(0,0);
                }
            },

            // --- WALLET METHODS ---
            wallet: {
                connect: async (type) => {
                    App.ui.toggleWalletModal(); // Close modal
                    
                    if (type === 'MetaMask') {
                        if (!window.ethereum) return alert("MetaMask not found!");
                        try {
                            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                            App.state.account = accounts[0];
                            App.state.provider = new ethers.providers.Web3Provider(window.ethereum);
                            
                            await App.wallet.switchNetwork();
                            await App.wallet.getBalance();
                            App.ui.updateState(true);
                        } catch (e) { console.error(e); alert(e.message); }
                    } 
                    else if (type === 'Trust') {
                        // Logic for Trust Wallet (similar interface)
                        const provider = window.trustwallet || window.ethereum;
                        if (!provider) return alert("Trust Wallet not found!");
                        try {
                            const accounts = await provider.request({ method: 'eth_requestAccounts' });
                            App.state.account = accounts[0];
                            App.state.provider = new ethers.providers.Web3Provider(provider);
                            await App.wallet.getBalance(); // Trust might auto-handle network
                            App.ui.updateState(true);
                        } catch (e) { console.error(e); }
                    }
                },

                disconnect: () => {
                    App.state.account = null;
                    App.state.provider = null;
                    App.ui.updateState(false);
                    alert("Disconnected.");
                },

                switchNetwork: async () => {
                    try {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: App.config.chainIdHex }],
                        });
                    } catch (error) {
                        if (error.code === 4902) {
                            try {
                                await window.ethereum.request({
                                    method: 'wallet_addEthereumChain',
                                    params: [{
                                        chainId: App.config.chainIdHex,
                                        chainName: App.config.name,
                                        nativeCurrency: {
                                            name: 'KarChain Token',
                                            symbol: App.config.symbol,
                                            decimals: 18
                                        },
                                        rpcUrls: [App.config.rpc],
                                        blockExplorerUrls: []
                                    }],
                                });
                            } catch (addError) { console.error(addError); }
                        }
                    }
                },

                getBalance: async () => {
                    if (!App.state.account || !App.state.provider) return;
                    try {
                        const balance = await App.state.provider.getBalance(App.state.account);
                        const fmt = ethers.utils.formatEther(balance);
                        document.getElementById('displayBalance').innerText = parseFloat(fmt).toFixed(2);
                    } catch (e) {
                        console.log("Network fetch error, showing 0.00");
                        document.getElementById('displayBalance').innerText = "0.00";
                    }
                }
            },

            // --- TASKS LOGIC ---
            tasks: {
                start: (id) => {
                    const verifyBtn = document.getElementById(`btn-verify-${id}`);
                    verifyBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
                    setTimeout(() => {
                        verifyBtn.innerText = 'VERIFY NOW';
                        verifyBtn.disabled = false;
                        verifyBtn.classList.remove('cursor-not-allowed', 'text-gray-400', 'border-white/20');
                        verifyBtn.classList.add('bg-green-600', 'text-white', 'border-transparent', 'hover:bg-green-500');
                    }, 3000); // Simulate reading time
                },
                
                verify: (id) => {
                    if (id === 1) {
                        // Unlock task 2
                        const btn = document.getElementById(`btn-verify-1`);
                        btn.innerHTML = '<i class="fa-solid fa-check"></i>';
                        btn.classList.replace('bg-green-600', 'bg-green-900');
                        btn.disabled = true;
                        
                        document.getElementById('task-2').classList.remove('task-locked');
                        alert("Identity Verified. Step 2 Unlocked.");
                    } else if (id === 2) {
                        // Unlock task 3 (Form)
                        document.getElementById('task-3').classList.remove('task-locked');
                        const formBtn = document.getElementById('btn-form');
                        formBtn.classList.remove('opacity-50', 'pointer-events-none');
                        alert("Volume Verified. Whitelist Application Unlocked.");
                    }
                }
            }
        };

        // Init
        window.App = App;
    </script>
</body>
</html>
