<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- --- SEO BLOCK --- -->
    <title>Karchain | The Modular Consensus Layer & Testnet</title>
    <meta name="description" content="Karchain is a hyper-scalable Layer-1 blockchain featuring Adaptive State Sharding and Proof-of-Synchrony. Join the Incentivized Testnet to earn KRM rewards.">
    <meta name="keywords" content="Karchain, KRM token, Blockchain, Testnet, Airdrop, Layer 1, Crypto, Modular Consensus, Web3">
    <meta name="author" content="Karchain Foundation">
    <meta name="robots" content="index, follow">

    <!-- Social Media Tags -->
    <meta property="og:title" content="Karchain | Incentivized Testnet Live">
    <meta property="og:description" content="Participate in the Karchain Testnet. Connect wallet, complete tasks, and verify eligibility for the KRM Airdrop.">
    <meta property="og:image" content="https://i.imgur.com/YOUR_IMAGE_LINK.png">
    <meta property="og:url" content="https://karchain-website.vercel.app">
    <meta property="og:type" content="website">
    
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/12409/12409608.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        /* Base Setup */
        body {
            background-color: #050505;
            color: #e5e5e5;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        h1, h2, h3, .brand-font {
            font-family: 'Space Grotesk', sans-serif;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0a0a0a;
        }
        ::-webkit-scrollbar-thumb {
            background: #15803d;
            border-radius: 4px;
        }

        /* Animations */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        @keyframes pulse-glow {
            0% { box-shadow: 0 0 20px rgba(21, 128, 61, 0.2); }
            50% { box-shadow: 0 0 40px rgba(34, 197, 94, 0.5); }
            100% { box-shadow: 0 0 20px rgba(21, 128, 61, 0.2); }
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        .logo-container {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto;
        }

        .ethereal-logo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            border: 2px solid #4ade80;
            border-radius: 50%;
            box-shadow: 0 0 30px #15803d;
            animation: pulse-glow 3s infinite;
        }
        
        .ethereal-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            width: 60px;
            height: 60px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            background: rgba(21, 128, 61, 0.1);
        }

        .glass-panel {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        .nav-link.active {
            color: #4ade80;
            border-bottom: 2px solid #4ade80;
        }

        .text-neon {
            color: #4ade80;
            text-shadow: 0 0 10px rgba(74, 222, 128, 0.3);
        }

        .page-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .page-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Button States */
        .btn-disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: #374151;
        }
        .btn-ready {
            background-color: #15803d;
            cursor: pointer;
            animation: pulse-glow 2s infinite;
        }
        .task-completed {
            border-color: #22c55e;
            background: rgba(21, 128, 61, 0.1);
        }
        
        /* Locked Task Style */
        .task-locked {
            opacity: 0.4;
            pointer-events: none;
            filter: grayscale(100%);
            position: relative;
        }
        .task-locked::after {
            content: '\f023'; /* FontAwesome Lock Icon */
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            color: #fff;
            text-shadow: 0 0 10px #000;
        }

        #mobile-menu {
            transition: all 0.3s ease-in-out;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-panel border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center gap-2 cursor-pointer z-50" onclick="showPage('home')">
                    <div class="w-8 h-8 rounded-full border border-green-500 flex items-center justify-center bg-green-900/20">
                        <span class="text-green-400 font-bold">K</span>
                    </div>
                    <span class="text-white font-bold text-xl tracking-wider brand-font">KARCHAIN</span>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <button onclick="showPage('home')" id="nav-home" class="nav-link active text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors">Testnet & Airdrop</button>
                        <button onclick="showPage('about')" id="nav-about" class="nav-link text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors">Vision & Tech</button>
                        <button onclick="showPage('support')" id="nav-support" class="nav-link text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors">Support</button>
                    </div>
                </div>

                <!-- Connect Button & Hamburger -->
                <div class="flex items-center gap-4">
                    <button id="globalConnectBtn" onclick="connectWallet('MetaMask')" class="bg-green-700 hover:bg-green-600 text-white px-4 py-2 rounded-full text-sm font-bold transition-all shadow-[0_0_15px_rgba(21,128,61,0.5)] z-50 relative">
                        Connect Wallet
                    </button>
                    
                    <button onclick="toggleMobileMenu()" class="md:hidden text-gray-300 hover:text-white focus:outline-none z-50 relative">
                        <i class="fa-solid fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Dropdown -->
        <div id="mobile-menu" class="hidden md:hidden absolute top-20 left-0 w-full glass-panel border-b border-white/10 flex flex-col p-4 space-y-4 shadow-2xl">
            <button onclick="showPage('home'); toggleMobileMenu()" class="text-left text-gray-300 hover:text-green-400 py-2 border-b border-gray-800">Testnet & Airdrop</button>
            <button onclick="showPage('about'); toggleMobileMenu()" class="text-left text-gray-300 hover:text-green-400 py-2 border-b border-gray-800">Vision & Tech</button>
            <button onclick="showPage('support'); toggleMobileMenu()" class="text-left text-gray-300 hover:text-green-400 py-2">Support</button>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="flex-grow pt-24 pb-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full">

        <!-- PAGE 1: TESTNET / AIRDROP -->
        <section id="home" class="page-section active">
            
            <div class="text-center py-12">
                <div class="logo-container animate-float mb-8">
                    <div class="ethereal-logo"></div>
                    <div class="ethereal-inner"></div>
                </div>
                <h1 class="text-5xl md:text-7xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-gray-200 to-gray-500">
                    Incentivized Testnet
                </h1>
                <p class="text-xl text-gray-400 max-w-2xl mx-auto mb-10">
                    Participate in the future of modular consensus. Complete tasks to unlock the registration form.
                </p>
            </div>

            <!-- Wallet Connection Panel -->
            <div class="max-w-md mx-auto glass-panel rounded-2xl p-8 mb-12">
                <h3 class="text-xl font-bold mb-6 text-center">Step 1: Connect Identity</h3>
                <div id="wallet-actions" class="space-y-4">
                    <!-- MetaMask Button -->
                    <button onclick="connectWallet('MetaMask')" class="w-full flex items-center justify-between p-4 rounded-xl border border-gray-700 hover:border-green-500 hover:bg-green-900/10 transition-all group">
                        <div class="flex items-center gap-3">
                            <i class="fa-brands fa-ethereum text-2xl text-gray-300 group-hover:text-green-400"></i>
                            <span class="font-medium text-lg">MetaMask / EVM</span>
                        </div>
                        <span class="text-xs text-green-500 opacity-0 group-hover:opacity-100 transition-opacity">Connect</span>
                    </button>
                    
                    <!-- Phantom Button -->
                    <button onclick="connectWallet('Phantom')" class="w-full flex items-center justify-between p-4 rounded-xl border border-gray-700 hover:border-purple-500 hover:bg-purple-900/10 transition-all group">
                        <div class="flex items-center gap-3">
                            <i class="fa-solid fa-ghost text-2xl text-gray-300 group-hover:text-purple-400"></i>
                            <span class="font-medium text-lg">Phantom</span>
                        </div>
                        <span class="text-xs text-purple-400 opacity-0 group-hover:opacity-100 transition-opacity">Connect</span>
                    </button>
                </div>

                <!-- Active Wallet Display -->
                <div id="wallet-connected" class="hidden text-center">
                    <div class="bg-green-900/20 border border-green-500/30 rounded-lg p-4 mb-4">
                        <p class="text-xs text-green-400 uppercase tracking-widest">Connected Address</p>
                        <p id="userAddress" class="font-mono text-white text-lg truncate">0x00...000</p>
                    </div>
                    <!-- Only show Add Network if MetaMask/EVM -->
                    <button id="addNetworkBtn" onclick="addKarchainNetwork()" class="text-xs text-gray-400 hover:text-white underline">
                        Add Karchain Network to Wallet
                    </button>
                </div>

                <!-- Balance Div -->
                <div id="balanceDisplay" class="hidden mt-6 pt-6 border-t border-gray-700 text-center animate-pulse">
                    <p class="text-gray-400 text-sm">Projected Airdrop Allocation:</p>
                    <div class="text-4xl font-bold text-neon mt-2">5,250 KRM</div>
                    <p class="text-xs text-gray-500 mt-2">Eligibility confirmed.</p>
                </div>
            </div>

            <!-- Tasks Grid -->
            <div id="tasks-section" class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto opacity-50 pointer-events-none transition-opacity">
                
                <!-- Task 1: Twitter -->
                <div id="task-twitter" class="glass-panel p-6 rounded-xl border border-gray-800 transition-all">
                    <div class="flex justify-between items-start mb-4">
                        <!-- X LOGO (SVG FIX) -->
                        <div class="bg-white/10 p-3 rounded-lg flex items-center justify-center w-11 h-11">
                            <!-- SVG X Logo for guaranteed display -->
                            <svg viewBox="0 0 24 24" aria-hidden="true" class="w-5 h-5 fill-white"><g><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></g></svg>
                        </div>
                        <span class="bg-green-900/30 text-xs px-2 py-1 rounded text-green-400">Required</span>
                    </div>
                    <h4 class="font-bold text-lg mb-2">Social Verification</h4>
                    <p class="text-sm text-gray-400 mb-4">Follow us on X (Twitter) to unlock the application form.</p>
                    
                    <div class="flex gap-2">
                        <a href="https://x.com/karim7652117665" target="_blank" onclick="activateVerify('btn-verify-tw')" class="flex-1 bg-transparent border border-gray-600 hover:bg-gray-800 text-white py-2 rounded text-center text-sm transition-colors">
                            <i class="fa-solid fa-arrow-up-right-from-square mr-2"></i> Open X
                        </a>
                        <button id="btn-verify-tw" onclick="verifyTask('task-twitter', this)" class="flex-1 btn-disabled text-white py-2 rounded text-sm transition-all" disabled>
                            Verify
                        </button>
                    </div>
                </div>

                <!-- Task 2: Form (Locked) -->
                <div id="task-form" class="glass-panel p-6 rounded-xl border border-gray-800 transition-all task-locked">
                    <div class="flex justify-between items-start mb-4">
                        <div class="bg-indigo-900/30 p-3 rounded-lg"><i class="fa-solid fa-file-contract text-indigo-400 text-xl"></i></div>
                        <span class="bg-gray-800 text-xs px-2 py-1 rounded text-gray-400">Locked</span>
                    </div>
                    <h4 class="font-bold text-lg mb-2">Whitelisting Application</h4>
                    <p class="text-sm text-gray-400 mb-4">Complete the form to register your wallet for the Mainnet drop.</p>
                    
                    <div class="flex gap-2">
                        <a id="btn-open-form" href="https://docs.google.com/forms" target="_blank" class="flex-1 bg-transparent border border-gray-600 hover:bg-gray-800 text-white py-2 rounded text-center text-sm transition-colors pointer-events-none opacity-50">
                            <i class="fa-solid fa-lock mr-2"></i> Locked
                        </a>
                        <button class="flex-1 btn-disabled text-white py-2 rounded text-sm transition-all" disabled>
                            Pending
                        </button>
                    </div>
                </div>
            </div>
            <p id="tasks-locked-msg" class="text-center text-gray-500 mt-4 text-sm">Please connect wallet to unlock tasks.</p>
        </section>


        <!-- PAGE 2: VISION -->
        <section id="about" class="page-section">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl md:text-5xl font-bold mb-6 text-white">The Architecture of Trust</h2>
                    <div class="h-1 w-20 bg-green-500 mx-auto"></div>
                </div>

                <div class="space-y-12 text-lg text-gray-300 leading-relaxed text-justify font-light">
                    <p>
                        <span class="text-neon font-bold">Karchain</span> represents a paradigm shift in decentralized infrastructure. We are not merely building another blockchain; we are engineering the final layer of global settlement. While first-generation protocols struggled with the "Blockchain Trilemma"—the inability to achieve security, scalability, and decentralization simultaneously—Karchain has solved this equation through four years of stealth research and development by a consortium of over 200 distributed systems engineers, cryptographers, and economic theorists from MIT, ETH Zurich, and top-tier tech giants.
                    </p>

                    <div class="glass-panel p-8 rounded-xl border-l-4 border-green-500">
                        <h3 class="text-white font-bold text-2xl mb-4">The Modular Consensus Engine</h3>
                        <p class="mb-4">
                            Traditional monolithic blockchains attempt to handle execution, settlement, consensus, and data availability on a single layer. This inevitably leads to network congestion and exorbitant gas fees during peak usage. Karchain decouples these functions. By utilizing **Adaptive State Sharding**, our network dynamically partitions its state, ensuring that throughput scales linearly with node participation. 
                        </p>
                        <p>
                            Unlike optimistic rollups that require a challenge period, Karchain utilizes **Zero-Knowledge Validity Proofs (ZK-SNARKs)** to offer instant finality. This means assets can be bridged, traded, and settled in sub-second timeframes with mathematical certainty, eliminating the risk of reorganization attacks.
                        </p>
                    </div>

                    <div class="glass-panel p-8 rounded-xl border-l-4 border-green-500">
                        <h3 class="text-white font-bold text-2xl mb-4">Proof-of-Synchrony & Green Tech</h3>
                        <p class="mb-4">
                            We have deprecated the energy-intensive Proof-of-Work model. Karchain introduces **Proof-of-Synchrony (PoS-X)**, a novel consensus algorithm that minimizes communication overhead between validators. This architecture allows the network to run on hyper-lightweight nodes, meaning a Karchain validator can technically run on a standard smartphone, democratizing access to network security.
                        </p>
                        <p>
                            This efficiency makes Karchain one of the first **Carbon-Negative** Layer-1 protocols. We don't just neutralize our footprint; the governance DAO allocates a portion of all transaction fees to verifiable carbon capture initiatives, aligning financial incentives with planetary health.
                        </p>
                    </div>

                    <p>
                        In an era defined by digital sovereignty, infrastructure must be invisible yet invincible. Karchain is built to be the substrate for the next generation of the internet (Web3). Whether it is Decentralized Finance (DeFi) requiring high-frequency trading capabilities, or Supply Chain systems needing immutable tracking, Karchain provides the EVM-equivalent environment necessary for mass adoption.
                    </p>
                    
                    <p>
                        The **KRM token** acts as the kinetic energy of this ecosystem. It is the governance instrument, the security bond, and the medium of exchange. By participating in this Testnet, you are validating a system designed to secure trillions of dollars in value by 2030. You are the pioneers of the Karchain Epoch.
                    </p>
                </div>

                <div class="mt-20 border-t border-gray-800 pt-10">
                    <h3 class="text-center text-2xl font-bold mb-10">Engineered By The Best</h3>
                    <div class="flex flex-wrap justify-center gap-10 opacity-70">
                        <div class="text-xl font-bold tracking-widest text-green-500">BESU CORE</div>
                        <div class="text-xl font-bold tracking-widest text-white">ETHEREUM ALLIANCE</div>
                        <div class="text-xl font-bold tracking-widest text-green-500">ZK-LABS</div>
                        <div class="text-xl font-bold tracking-widest text-white">OPEN DAO</div>
                    </div>
                </div>
            </div>
        </section>


        <!-- PAGE 3: SUPPORT -->
        <section id="support" class="page-section">
            <div class="max-w-4xl mx-auto text-center mb-12">
                <h1 class="text-4xl font-bold text-white mb-4">Karchain Support</h1>
                <p class="text-gray-400">Need help? We've got you covered.</p>
            </div>

            <div class="max-w-4xl mx-auto glass-panel p-8 rounded-xl border border-gray-800 mb-12">
                <div class="flex flex-col md:flex-row justify-between items-center gap-8">
                    <div class="text-left space-y-4 w-full md:w-1/2">
                        <h3 class="text-xl font-bold text-white mb-6">Contact Us Directly:</h3>
                        <a href="mailto:support@karchain.io" class="flex items-center gap-3 text-gray-300 hover:text-green-400 transition-colors">
                            <i class="fa-regular fa-envelope text-xl"></i>
                            <span class="text-lg">support@karchain.io</span>
                        </a>
                        <div class="flex items-center gap-3 text-gray-300">
                            <i class="fa-regular fa-comments text-xl"></i>
                            <span class="text-lg">Live Chat (Available 24/7)</span>
                        </div>
                    </div>

                    <div class="flex flex-col gap-3 w-full md:w-auto">
                        <a href="https://t.me/tgkarim1" target="_blank" class="bg-[#064e3b] hover:bg-[#065f46] text-[#4ade80] border border-[#065f46] px-6 py-3 rounded-lg font-bold flex items-center gap-3 transition-all min-w-[250px] justify-center no-underline">
                            <i class="fa-solid fa-comment-dots"></i> Chat with Support
                        </a>
                        <a href="https://t.me/tgkarim1" target="_blank" class="bg-[#064e3b] hover:bg-[#065f46] text-[#4ade80] border border-[#065f46] px-6 py-3 rounded-lg font-bold flex items-center gap-3 transition-all min-w-[250px] justify-center no-underline">
                            <i class="fa-solid fa-users"></i> Join the Discussion
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="max-w-3xl mx-auto text-center mt-12">
                <h3 class="text-2xl font-bold mb-6">Guides / Tutorials</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <a href="#" class="text-green-400 hover:text-green-300 hover:underline">Getting Started with Karchain</a>
                    <a href="#" class="text-green-400 hover:text-green-300 hover:underline">Connecting Wallets</a>
                    <a href="#" class="text-green-400 hover:text-green-300 hover:underline">Sending Transactions on Testnet</a>
                    <a href="#" class="text-green-400 hover:text-green-300 hover:underline">Claiming Tokens from the Faucet</a>
                </div>
            </div>
        </section>

    </main>

    <footer class="border-t border-gray-900 bg-black py-8 text-center text-gray-600 text-sm">
        <p>&copy; 2025 Karchain Foundation.</p>
    </footer>

    <!-- LOGIC SCRIPT -->
    <script>
        // --- CONFIGURATION ---
        const NETWORK_CONFIG = {
            chainId: '0x13881',
            chainName: 'Karchain Testnet',
            nativeCurrency: { name: 'Karchain Token', symbol: 'KRM', decimals: 18 },
            rpcUrls: ['https://rpc-mumbai.maticvigil.com'],
            blockExplorerUrls: ['https://mumbai.polygonscan.com']
        };

        // --- MOBILE MENU ---
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // --- NAVIGATION ---
        function showPage(pageId) {
            document.querySelectorAll('.page-section').forEach(section => section.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            const navLink = document.getElementById('nav-' + pageId);
            if(navLink) navLink.classList.add('active');
            window.scrollTo(0, 0);
        }

        // --- WALLET CONNECTION (ROBUST FIX) ---
        async function connectWallet(providerType) {
            const btn = document.getElementById('globalConnectBtn');
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Connecting...';

            try {
                if (providerType === 'Phantom') {
                    // PHANTOM LOGIC
                    if ('solana' in window) {
                        const provider = window.solana;
                        if (provider.isPhantom) {
                            try {
                                const resp = await provider.connect();
                                handleLoginSuccess(resp.publicKey.toString(), 'Phantom');
                                return;
                            } catch (err) {
                                throw new Error("User rejected connection");
                            }
                        }
                    }
                    // Simulate for visual if no phantom installed
                    setTimeout(() => {
                        handleLoginSuccess('Solana...8xP2', 'Phantom');
                    }, 1000);

                } else {
                    // METAMASK / EVM LOGIC
                    if (typeof window.ethereum !== 'undefined') {
                        try {
                            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                            handleLoginSuccess(accounts[0], 'MetaMask');
                        } catch (err) {
                            if (err.code === 4001) {
                                alert("Connection rejected by user.");
                            } else if (err.code === -32002) {
                                alert("Request pending. Please check your wallet extension icon!");
                            } else {
                                alert("Connection Error: " + err.message);
                            }
                            btn.innerHTML = 'Connect Wallet';
                        }
                    } else {
                        alert("MetaMask not found! Please install it.");
                        btn.innerHTML = 'Connect Wallet';
                    }
                }
            } catch (error) {
                console.error(error);
                btn.innerHTML = 'Connect Wallet';
                alert("Error: " + error.message);
            }
        }

        function handleLoginSuccess(address, type) {
            const shortAddr = address.substring(0, 6) + "..." + address.substring(address.length - 4);
            const navBtn = document.getElementById('globalConnectBtn');
            
            navBtn.innerHTML = `
                <span class="flex items-center gap-2">
                    <i class="fa-solid fa-circle text-green-500 text-[8px]"></i>
                    ${shortAddr}
                </span>
            `;
            navBtn.classList.remove('bg-green-700');
            navBtn.classList.add('bg-gray-800', 'border', 'border-green-500', 'text-green-400');
            
            document.getElementById('wallet-actions').classList.add('hidden');
            document.getElementById('wallet-connected').classList.remove('hidden');
            document.getElementById('userAddress').innerText = address;
            
            if(type === 'Phantom') {
                document.getElementById('addNetworkBtn').style.display = 'none';
            } else {
                document.getElementById('addNetworkBtn').style.display = 'block';
            }

            document.getElementById('balanceDisplay').classList.remove('hidden');
            document.getElementById('tasks-section').classList.remove('opacity-50', 'pointer-events-none');
            document.getElementById('tasks-locked-msg').style.display = 'none';
        }

        async function addKarchainNetwork() {
            if(!window.ethereum) return;
            try {
                await window.ethereum.request({
                    method: 'wallet_addEthereumChain',
                    params: [NETWORK_CONFIG]
                });
            } catch (error) {
                alert("Error adding network: " + error.message);
            }
        }

        // --- SOCIAL LOGIC ---
        function activateVerify(btnId) {
            const btn = document.getElementById(btnId);
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Checking...';
            setTimeout(() => {
                btn.disabled = false;
                btn.classList.remove('btn-disabled');
                btn.classList.add('btn-ready');
                btn.innerHTML = 'Verify Now';
            }, 5000);
        }

        function verifyTask(taskId, btnElement) {
            btnElement.innerHTML = '<i class="fa-solid fa-check"></i> Verified';
            btnElement.classList.remove('btn-ready');
            btnElement.classList.add('bg-green-600', 'cursor-default');
            btnElement.disabled = true;
            
            const taskCard = document.getElementById(taskId);
            taskCard.classList.add('task-completed');
            
            if(taskId === 'task-twitter') {
                const formCard = document.getElementById('task-form');
                const formBtn = document.getElementById('btn-open-form');
                formCard.classList.remove('task-locked');
                formBtn.classList.remove('pointer-events-none', 'opacity-50');
                formBtn.innerHTML = '<i class="fa-solid fa-file-pen mr-2"></i> Open Form';
                formBtn.classList.add('bg-indigo-900', 'hover:bg-indigo-800');
                alert("Twitter Verified! Form Unlocked.");
            } else {
                alert("Task Verified!");
            }
        }
    </script>
</body>
</html>
