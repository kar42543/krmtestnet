<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KarChain | Sovereign Consensus Layer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <style>
        /* –ë–∞–∑–æ–≤—ñ —Å—Ç–∏–ª—ñ */
        :root {
            --primary: #4ade80;
            --primary-dark: #15803d;
            --bg: #020402;
            --card-bg: rgba(15, 15, 15, 0.7);
        }
        
        body {
            background: var(--bg);
            color: #e5e5e5;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }
        
        /* –§–æ–Ω–æ–≤—ñ –µ—Ñ–µ–∫—Ç–∏ */
        .bg-grid {
            background-image: 
                linear-gradient(rgba(74, 222, 128, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(74, 222, 128, 0.03) 1px, transparent 1px);
            background-size: 60px 60px;
            mask-image: radial-gradient(circle at center, black 40%, transparent 90%);
        }
        
        .glow-orb {
            background: radial-gradient(circle, rgba(74, 222, 128, 0.1) 0%, transparent 70%);
            filter: blur(120px);
        }
        
        /* –ù–∞–≤—ñ–≥–∞—Ü—ñ—è */
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link.active {
            color: var(--primary);
        }
        
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary);
            box-shadow: 0 0 10px var(--primary);
        }
        
        /* –ö–∞—Ä—Ç–∫–∏ */
        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
        }
        
        /* –ê–Ω—ñ–º–∞—Ü—ñ—ó */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .float {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes pulse-slow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .pulse-slow {
            animation: pulse-slow 4s ease-in-out infinite;
        }
        
        /* Mobile menu */
        .mobile-menu {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-menu.open {
            transform: translateX(0);
        }
        
        /* –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ –∑–∞–¥–∞—á—ñ */
        .task-locked {
            opacity: 0.6;
            filter: grayscale(0.8);
            pointer-events: none;
            position: relative;
        }
        
        .task-locked::after {
            content: '\f023';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 32px;
            color: rgba(255, 255, 255, 0.8);
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 50%;
            backdrop-filter: blur(5px);
        }
        
        /* Wallet icons */
        .wallet-icon {
            filter: grayscale(100%);
            transition: all 0.3s ease;
        }
        
        .wallet-option:hover .wallet-icon {
            filter: grayscale(0%);
            transform: scale(1.1);
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #0a0a0a;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-dark);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
        
        /* Utility classes */
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Particle canvas */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        /* –õ–æ–≥–æ—Ç–∏–ø K –∑ —Ç–æ—á–∫–æ—é */
        .k-logo {
            fill: #4ade80;
            filter: drop-shadow(0 0 8px rgba(74, 222, 128, 0.5));
        }
        
        .k-logo .dot {
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }
        
        /* Counter animation */
        .counter {
            font-variant-numeric: tabular-nums;
        }
        
        /* FAQ —Å—Ç–∏–ª—ñ */
        .faq-answer {
            display: none;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .faq-item.open .faq-answer {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .faq-item.open .faq-icon {
            transform: rotate(180deg);
        }
        
        /* –í—ñ–¥—Å—Ç—É–ø–∏ –¥–ª—è "–≤–æ–¥–∏" */
        .water-content {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }
    </style>
</head>
<body class="antialiased">
    <!-- –§–æ–Ω–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ -->
    <div class="fixed inset-0 bg-grid z-[-2]"></div>
    <div class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] glow-orb pulse-slow z-[-1]"></div>
    <canvas id="particle-canvas"></canvas>
    
    <!-- –ù–∞–≤—ñ–≥–∞—Ü—ñ—è -->
    <nav class="fixed top-0 w-full z-50 bg-black/80 backdrop-blur-xl border-b border-white/5">
        <div class="container mx-auto px-4 h-20 flex items-center justify-between">
            <!-- –õ–æ–≥–æ—Ç–∏–ø -->
            <div class="flex items-center gap-3 cursor-pointer" onclick="showPage('home')">
                <div class="w-10 h-10 glass-card flex items-center justify-center group hover:border-green-500/50 transition-colors">
                    <!-- –ë—É–∫–≤–∞ K –∑ —Ç–æ—á–∫–æ—é –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ -->
                    <svg class="w-8 h-8 k-logo" viewBox="0 0 100 100">
                        <!-- –û—Å–Ω–æ–≤–∞ –±—É–∫–≤–∏ K -->
                        <path d="M30 20 L30 80" stroke="currentColor" stroke-width="8" stroke-linecap="round" fill="none"/>
                        <path d="M30 50 L70 20" stroke="currentColor" stroke-width="8" stroke-linecap="round" fill="none"/>
                        <path d="M30 50 L70 80" stroke="currentColor" stroke-width="8" stroke-linecap="round" fill="none"/>
                        <!-- –¢–æ—á–∫–∞ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ -->
                        <circle cx="50" cy="50" r="8" fill="#4ade80" class="dot"/>
                    </svg>
                </div>
                <div>
                    <div class="text-lg font-bold text-white">KARCHAIN</div>
                    <div class="text-xs text-gray-500 font-mono">Genesis Testnet</div>
                </div>
            </div>

            <!-- –î–µ—Å–∫—Ç–æ–ø –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è -->
            <div class="hidden lg:flex items-center gap-8">
                <button onclick="showPage('home')" class="nav-link text-sm font-medium" data-page="home">Testnet</button>
                <button onclick="showPage('vision')" class="nav-link text-sm font-medium" data-page="vision">Vision</button>
                <button onclick="showPage('ecosystem')" class="nav-link text-sm font-medium" data-page="ecosystem">Ecosystem</button>
                <button onclick="showPage('support')" class="nav-link text-sm font-medium" data-page="support">Support</button>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ -->
            <div class="flex items-center gap-4">
                <button onclick="openWalletModal()" id="connectBtn" class="px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-sm font-medium transition-colors">
                    <i class="fas fa-wallet text-green-400 mr-2"></i>
                    <span class="hidden sm:inline">Connect Wallet</span>
                </button>
                
                <!-- –ú–æ–±—ñ–ª—å–Ω–µ –º–µ–Ω—é -->
                <button onclick="toggleMobileMenu()" class="lg:hidden text-gray-400 hover:text-white p-2">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- –ú–æ–±—ñ–ª—å–Ω–µ –º–µ–Ω—é -->
    <div id="mobileMenu" class="mobile-menu fixed inset-0 z-40 bg-black/95 backdrop-blur-xl lg:hidden">
        <div class="flex flex-col items-center justify-center h-full space-y-8">
            <button onclick="toggleMobileMenu()" class="absolute top-6 right-6 text-white text-2xl">
                <i class="fas fa-times"></i>
            </button>
            
            <button onclick="showPage('home'); toggleMobileMenu()" class="text-2xl font-bold text-white">Testnet</button>
            <button onclick="showPage('vision'); toggleMobileMenu()" class="text-2xl font-bold text-white">Vision</button>
            <button onclick="showPage('ecosystem'); toggleMobileMenu()" class="text-2xl font-bold text-white">Ecosystem</button>
            <button onclick="showPage('support'); toggleMobileMenu()" class="text-2xl font-bold text-white">Support</button>
            
            <button onclick="openWalletModal(); toggleMobileMenu()" class="px-8 py-3 bg-green-600 text-white font-bold rounded-full">
                Connect Wallet
            </button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –≥–∞–º–∞–Ω—Ü—ñ–≤ -->
    <div id="walletModal" class="fixed inset-0 z-50 hidden items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80" onclick="closeWalletModal()"></div>
        <div class="glass-card max-w-md w-full p-6 relative">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-white">Connect Wallet</h3>
                <button onclick="closeWalletModal()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-3">
                <!-- MetaMask -->
                <button onclick="connectWallet('metamask')" class="wallet-option w-full p-4 glass-card hover:bg-white/5 rounded-xl flex items-center gap-4">
                    <div class="w-10 h-10 flex items-center justify-center">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" 
                             class="wallet-icon w-6 h-6" 
                             alt="MetaMask"
                             onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü¶ä</text></svg>'">
                    </div>
                    <div class="text-left">
                        <div class="font-bold text-white">MetaMask</div>
                        <div class="text-xs text-gray-500">Browser Extension</div>
                    </div>
                </button>

                <!-- Trust Wallet -->
                <button onclick="connectWallet('trust')" class="wallet-option w-full p-4 glass-card hover:bg-white/5 rounded-xl flex items-center gap-4">
                    <div class="w-10 h-10 flex items-center justify-center">
                        <img src="https://trustwallet.com/assets/images/media/assets/TWT.png" 
                             class="wallet-icon w-6 h-6" 
                             alt="Trust Wallet"
                             onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üîí</text></svg>'">
                    </div>
                    <div class="text-left">
                        <div class="font-bold text-white">Trust Wallet</div>
                        <div class="text-xs text-gray-500">Mobile & Extension</div>
                    </div>
                </button>

                <!-- WalletConnect -->
                <button onclick="connectWallet('walletconnect')" class="wallet-option w-full p-4 glass-card hover:bg-white/5 rounded-xl flex items-center gap-4">
                    <div class="w-10 h-10 flex items-center justify-center">
                        <i class="fas fa-qrcode text-white text-xl wallet-icon"></i>
                    </div>
                    <div class="text-left">
                        <div class="font-bold text-white">WalletConnect</div>
                        <div class="text-xs text-gray-500">QR Code</div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="pt-24 pb-20">
        <!-- –°—Ç–æ—Ä—ñ–Ω–∫–∞ 1: Testnet -->
        <div id="page-home" class="page active container mx-auto px-4">
            <!-- –ì–µ—Ä–æ–π -->
            <div class="text-center mb-16">
                <h1 class="text-4xl md:text-6xl font-bold text-white mb-6">
                    ARCHITECTING <br>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-600">
                        DIGITAL TRUST
                    </span>
                </h1>
                <p class="text-gray-400 max-w-2xl mx-auto mb-10">
                    Participate in the KarChain Genesis Testnet. Validate the modular consensus layer, generate volume, and secure your allocation.
                </p>
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-3xl mx-auto">
                    <div class="glass-card p-6 text-center hover:scale-105 transition-transform">
                        <div class="text-2xl font-bold text-white mb-2 counter" data-target="12942">0</div>
                        <div class="text-xs text-gray-500 uppercase">Blocks</div>
                    </div>
                    <div class="glass-card p-6 text-center hover:scale-105 transition-transform">
                        <div class="text-2xl font-bold text-white mb-2 counter" data-target="450">0</div>
                        <div class="text-xs text-gray-500 uppercase">Avg TPS</div>
                    </div>
                    <div class="glass-card p-6 text-center hover:scale-105 transition-transform">
                        <div class="text-2xl font-bold text-white mb-2">0.4s</div>
                        <div class="text-xs text-gray-500 uppercase">Finality</div>
                    </div>
                    <div class="glass-card p-6 text-center hover:scale-105 transition-transform">
                        <div class="text-2xl font-bold text-white mb-2 counter" data-target="156">0</div>
                        <div class="text-xs text-gray-500 uppercase">Validators</div>
                    </div>
                </div>
            </div>

            <!-- –î–∞—à–±–æ—Ä–¥ -->
            <div class="max-w-4xl mx-auto">
                <!-- –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π —Å—Ç–∞–Ω -->
                <div id="dashboardLocked" class="glass-card p-12 text-center">
                    <div class="w-24 h-24 mx-auto mb-8 rounded-full bg-white/5 flex items-center justify-center pulse-slow">
                        <i class="fas fa-lock text-3xl text-gray-600"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-white mb-4">Dashboard Locked</h2>
                    <p class="text-gray-500 mb-8 max-w-md mx-auto">
                        Connect your wallet to view your testnet allocation and track progress. The dashboard provides real-time insights into your participation in the KarChain testnet, including token balances, task completion status, and reward tracking.
                    </p>
                    <button onclick="openWalletModal()" class="px-8 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-lg transition-colors hover:scale-105">
                        Connect Wallet
                    </button>
                </div>

                <!-- –ê–∫—Ç–∏–≤–Ω–∏–π —Å—Ç–∞–Ω -->
                <div id="dashboardActive" class="hidden">
                    <!-- –ë–∞–ª–∞–Ω—Å -->
                    <div class="glass-card p-8 mb-8">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                            <div>
                                <div class="text-sm text-gray-500 mb-2">Available Balance</div>
                                <div class="flex items-baseline gap-3">
                                    <span id="balance" class="text-4xl md:text-5xl font-bold text-white">0.00</span>
                                    <span class="text-lg font-bold text-green-500">KAR</span>
                                </div>
                                <div id="walletAddress" class="text-sm text-gray-400 font-mono mt-2">0x0000...0000</div>
                            </div>
                            <div class="flex gap-3">
                                <button onclick="requestTokens()" class="px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg hover:scale-105 transition-transform">
                                    Get Test Tokens
                                </button>
                                <button onclick="disconnectWallet()" class="px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg hover:scale-105 transition-transform">
                                    Disconnect
                                </button>
                            </div>
                        </div>
                        
                        <!-- –î–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
                        <div class="water-content mt-8 pt-8 border-t border-white/5">
                            <p class="text-gray-400 text-sm">
                                Your KAR tokens represent your participation in the testnet ecosystem. Use them to interact with decentralized applications, pay for transaction fees, and participate in governance proposals. The testnet environment simulates real-world conditions to ensure network stability before mainnet launch.
                            </p>
                        </div>
                    </div>

                    <!-- –ó–∞–¥–∞—á—ñ -->
                    <div class="glass-card p-8">
                        <h3 class="text-xl font-bold text-white mb-6">Incentivized Tasks</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- –ó–∞–¥–∞—á–∞ 1 -->
                            <div class="glass-card p-6 hover:border-green-500/30 transition-colors hover:scale-105">
                                <div class="flex justify-between items-start mb-4">
                                    <div class="w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center">
                                        <i class="fab fa-twitter text-green-400"></i>
                                    </div>
                                    <span class="text-xs font-bold text-green-400 bg-green-500/10 px-2 py-1 rounded">Step 1</span>
                                </div>
                                <h4 class="font-bold text-white mb-2">Social Identity</h4>
                                <p class="text-sm text-gray-400 mb-4">Follow our official channels and engage with the community to establish your social presence within the KarChain ecosystem.</p>
                                <div class="flex gap-2">
                                    <a href="https://x.com/karim7652117665" target="_blank" 
                                       onclick="startTask(1)"
                                       class="flex-1 py-2 bg-white/5 hover:bg-white/10 text-center rounded text-xs font-medium transition-colors">
                                        Open X
                                    </a>
                                    <button id="verifyTask1" onclick="verifyTask(1)" 
                                            class="flex-1 py-2 bg-green-600 hover:bg-green-500 text-white rounded text-xs font-medium transition-colors">
                                        Verify
                                    </button>
                                </div>
                            </div>

                            <!-- –ó–∞–¥–∞—á–∞ 2 -->
                            <div id="task2" class="glass-card p-6 task-locked hover:border-blue-500/30 transition-colors">
                                <div class="flex justify-between items-start mb-4">
                                    <div class="w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-chart-line text-blue-400"></i>
                                    </div>
                                    <span class="text-xs font-bold text-blue-400 bg-blue-500/10 px-2 py-1 rounded">Step 2</span>
                                </div>
                                <h4 class="font-bold text-white mb-2">Trading Volume</h4>
                                <p class="text-sm text-gray-400 mb-4">Generate trading volume on decentralized exchanges to help test network throughput and liquidity mechanisms.</p>
                                <button onclick="checkVolume()" class="w-full py-2 bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 rounded text-xs font-medium transition-colors">
                                    Check Status
                                </button>
                            </div>

                            <!-- –ó–∞–¥–∞—á–∞ 3 -->
                            <div id="task3" class="glass-card p-6 task-locked hover:border-purple-500/30 transition-colors">
                                <div class="flex justify-between items-start mb-4">
                                    <div class="w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-file-contract text-purple-400"></i>
                                    </div>
                                    <span class="text-xs font-bold text-purple-400 bg-purple-500/10 px-2 py-1 rounded">Final</span>
                                </div>
                                <h4 class="font-bold text-white mb-2">Whitelist Registration</h4>
                                <p class="text-sm text-gray-400 mb-4">Register for the Genesis block allocation to secure your position in the upcoming mainnet launch.</p>
                                <button id="whitelistBtn" onclick="openWhitelistForm()" 
                                        class="w-full py-2 bg-purple-600 hover:bg-purple-500 text-white rounded text-xs font-medium transition-colors opacity-50 cursor-not-allowed">
                                    Open Form
                                </button>
                            </div>
                        </div>
                        
                        <!-- –î–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ –∑–∞–¥–∞—á—ñ -->
                        <div class="water-content mt-8 pt-8 border-t border-white/5">
                            <p class="text-gray-400 text-sm">
                                Complete all three tasks to maximize your testnet rewards and secure your position in the Genesis allocation. Each completed task contributes to your overall reputation score and increases your chances of receiving mainnet tokens. The tasks are designed to test different aspects of the network while providing valuable feedback to the development team.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –î–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–æ—Ä—ñ–Ω–∫–∏ -->
            <div class="water-content mt-16 pt-16 border-t border-white/5">
                <div class="glass-card p-8">
                    <h3 class="text-xl font-bold text-white mb-6">About KarChain Testnet</h3>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="font-bold text-white mb-4">Network Features</h4>
                            <ul class="text-gray-400 space-y-2 text-sm">
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>Adaptive State Sharding for horizontal scalability</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>Sub-second finality with Proof-of-Synchrony consensus</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>Quantum-resistant cryptography implementation</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check text-green-400"></i>
                                    <span>Modular architecture for easy protocol upgrades</span>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold text-white mb-4">Participation Benefits</h4>
                            <ul class="text-gray-400 space-y-2 text-sm">
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-gem text-green-400"></i>
                                    <span>Early access to mainnet token allocation</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-gem text-green-400"></i>
                                    <span>Governance voting rights for early participants</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-gem text-green-400"></i>
                                    <span>Testnet rewards in KAR tokens</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-gem text-green-400"></i>
                                    <span>Exclusive access to developer tools and APIs</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç–æ—Ä—ñ–Ω–∫–∞ 2: Vision -->
        <div id="page-vision" class="page container mx-auto px-4 py-12">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-6xl font-bold text-white mb-6">THE <span class="text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-600">MANIFESTO</span></h2>
                <p class="text-gray-400 max-w-3xl mx-auto">
                    Re-engineering the fundamental substrate of human coordination for the 22nd century using modular consensus architectures. KarChain represents a paradigm shift in blockchain technology, focusing on scalability, security, and sustainability.
                </p>
            </div>

            <div class="grid lg:grid-cols-2 gap-12 items-center mb-16">
                <div class="space-y-12">
                    <div class="border-l-2 border-green-500 pl-6 relative">
                        <div class="absolute -left-2 top-0 w-4 h-4 bg-green-500 rounded-full shadow-[0_0_15px_#4ade80]"></div>
                        <h3 class="text-xl font-bold text-white mb-4">Asynchronous Finality</h3>
                        <p class="text-gray-400">
                            KarChain introduces Hyper-Graph Sharding with Proof-of-Synchrony consensus, achieving mathematical finality in sub-second timeframes. Unlike traditional blockchains that rely on probabilistic confirmation, our architecture guarantees transaction finality through cryptographic proofs, eliminating the risk of chain reorganizations.
                        </p>
                        <div class="water-content mt-6 pt-6 border-t border-white/5">
                            <p class="text-gray-400 text-sm">
                                The asynchronous finality mechanism allows for parallel transaction processing across multiple shards while maintaining a unified security model. This approach enables the network to scale linearly with the number of shards, providing unprecedented throughput without compromising decentralization or security.
                            </p>
                        </div>
                    </div>
                    <div class="border-l-2 border-white/10 pl-6 relative">
                        <div class="absolute -left-2 top-0 w-4 h-4 bg-gray-700 rounded-full"></div>
                        <h3 class="text-xl font-bold text-green-400 mb-4">Post-Quantum Security</h3>
                        <p class="text-gray-400">
                            Built as a Quantum Fortress using Lattice-based signatures (Kyber/Dilithium) to secure assets against future quantum decryption threats. Our cryptographic stack is designed to withstand attacks from both classical and quantum computers, ensuring long-term security for all network participants.
                        </p>
                        <div class="water-content mt-6 pt-6 border-t border-white/5">
                            <p class="text-gray-400 text-sm">
                                The transition to post-quantum cryptography is implemented through a gradual migration path, allowing existing signatures to remain valid while new transactions use quantum-resistant algorithms. This forward-looking approach ensures that KarChain remains secure even as quantum computing capabilities advance.
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- –ì—ñ—Ä–æ—Å–∫–æ–ø –∞–Ω—ñ–º–∞—Ü—ñ—è -->
                <div class="flex justify-center">
                    <div class="relative w-64 h-64">
                        <div class="absolute inset-0 border border-green-500/30 rounded-full animate-spin" style="animation-duration: 20s"></div>
                        <div class="absolute inset-8 border border-green-500/20 rounded-full animate-spin" style="animation-duration: 15s; animation-direction: reverse"></div>
                        <div class="absolute inset-16 border border-green-500/10 rounded-full animate-spin" style="animation-duration: 10s"></div>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center">
                                <div class="w-4 h-4 bg-green-500 rounded-full pulse-slow"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Roadmap -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mt-20">
                <div class="glass-card p-8 border-t-4 border-green-500 hover:scale-105 transition-transform">
                    <div class="text-xs font-bold text-green-400 mb-2">Phase 1 (Current)</div>
                    <h4 class="text-lg font-bold text-white mb-4">Genesis</h4>
                    <ul class="text-sm text-gray-400 space-y-2">
                        <li>Validator Onboarding</li>
                        <li>Faucet Activation</li>
                        <li>Stress Testing</li>
                    </ul>
                    <div class="water-content mt-6 pt-6 border-t border-white/5">
                        <p class="text-gray-400 text-xs">
                            Initial network deployment with core consensus layer and basic transaction processing capabilities.
                        </p>
                    </div>
                </div>
                
                <div class="glass-card p-8 border-t-4 border-gray-700 opacity-80 hover:opacity-100 hover:scale-105 transition-all">
                    <div class="text-xs font-bold text-gray-500 mb-2">Phase 2</div>
                    <h4 class="text-lg font-bold text-white mb-4">Mesh</h4>
                    <ul class="text-sm text-gray-400 space-y-2">
                        <li>Public Staking</li>
                        <li>DEX Launch</li>
                        <li>Bridge Beta</li>
                    </ul>
                    <div class="water-content mt-6 pt-6 border-t border-white/5">
                        <p class="text-gray-400 text-xs">
                            Expansion of network functionality with decentralized finance applications and cross-chain interoperability.
                        </p>
                    </div>
                </div>
                
                <div class="glass-card p-8 border-t-4 border-gray-700 opacity-60 hover:opacity-100 hover:scale-105 transition-all">
                    <div class="text-xs font-bold text-gray-500 mb-2">Phase 3</div>
                    <h4 class="text-lg font-bold text-white mb-4">Ignition</h4>
                    <ul class="text-sm text-gray-400 space-y-2">
                        <li>Mainnet TGE</li>
                        <li>Governance DAO</li>
                        <li>Global Settlement</li>
                    </ul>
                    <div class="water-content mt-6 pt-6 border-t border-white/5">
                        <p class="text-gray-400 text-xs">
                            Full network deployment with token generation event and community governance mechanisms.
                        </p>
                    </div>
                </div>
                
                <div class="glass-card p-8 border-t-4 border-gray-700 opacity-40 hover:opacity-100 hover:scale-105 transition-all">
                    <div class="text-xs font-bold text-gray-500 mb-2">Phase 4</div>
                    <h4 class="text-lg font-bold text-white mb-4">Singularity</h4>
                    <ul class="text-sm text-gray-400 space-y-2">
                        <li>IPFS Storage</li>
                        <li>AI Agents</li>
                        <li>Layer-0 Bridge</li>
                    </ul>
                    <div class="water-content mt-6 pt-6 border-t border-white/5">
                        <p class="text-gray-400 text-xs">
                            Advanced network features including decentralized storage and artificial intelligence integration.
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- –î–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="water-content mt-16 pt-16 border-t border-white/5">
                <div class="glass-card p-8">
                    <h3 class="text-xl font-bold text-white mb-6">Technical Architecture</h3>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="font-bold text-white mb-4">Consensus Layer</h4>
                            <p class="text-gray-400 text-sm">
                                The KarChain consensus layer implements a novel Proof-of-Synchrony algorithm that combines the security of Proof-of-Stake with the efficiency of Practical Byzantine Fault Tolerance. Validators are selected based on their stake and reputation score, ensuring network security while maintaining decentralization.
                            </p>
                            <div class="water-content mt-4 pt-4 border-t border-white/5">
                                <p class="text-gray-400 text-xs">
                                    The consensus mechanism includes automatic slashing for malicious behavior and reward distribution for honest participation, creating strong economic incentives for network security.
                                </p>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-bold text-white mb-4">Execution Environment</h4>
                            <p class="text-gray-400 text-sm">
                                Our execution environment supports multiple virtual machines, including EVM compatibility for easy migration of existing smart contracts. The modular design allows developers to choose the execution environment that best suits their application requirements.
                            </p>
                            <div class="water-content mt-4 pt-4 border-t border-white/5">
                                <p class="text-gray-400 text-xs">
                                    Advanced features include parallel transaction execution, optimized gas metering, and built-in debugging tools for enhanced developer experience.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç–æ—Ä—ñ–Ω–∫–∞ 3: Ecosystem -->
        <div id="page-ecosystem" class="page container mx-auto px-4 py-12">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-white mb-4">DAPP ECOSYSTEM</h2>
                <p class="text-gray-400">Protocols building on the KarChain settlement layer. Our ecosystem is designed to support a wide range of decentralized applications, from DeFi protocols to NFT marketplaces and beyond.</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6">
                <div class="glass-card p-8 hover:border-purple-500/30 transition-colors hover:scale-105">
                    <div class="w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center mb-6 float">
                        <i class="fas fa-exchange-alt text-purple-400 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">KarSwap</h3>
                    <p class="text-gray-400 mb-4">Concentrated liquidity AMM with zero-slippage execution for stablecoin pairs and advanced trading features.</p>
                    <span class="inline-block px-3 py-1 bg-green-500/10 text-green-400 text-xs font-bold rounded">LIVE</span>
                    
                    <div class="water-content mt-6 pt-6 border-t border-white/5">
                        <p class="text-gray-400 text-xs">
                            KarSwap implements concentrated liquidity pools that allow liquidity providers to specify price ranges for their capital, maximizing capital efficiency while providing better pricing for traders.
                        </p>
                    </div>
                </div>
                
                <div class="glass-card p-8 hover:border-blue-500/30 transition-colors hover:scale-105">
                    <div class="w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center mb-6 float" style="animation-delay: 1s">
                        <i class="fas fa-layer-group text-blue-400 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">Nexus Bridge</h3>
                    <p class="text-gray-400 mb-4">Trustless asset bridging between Ethereum, Solana, and KarChain with minimal fees and fast confirmation times.</p>
                    <span class="inline-block px-3 py-1 bg-gray-800 text-gray-500 text-xs font-bold rounded">DEV</span>
                    
                    <div class="water-content mt-6 pt-6 border-t border-white/5">
                        <p class="text-gray-400 text-xs">
                            The bridge utilizes optimistic verification with fraud proofs, ensuring security while maintaining low transaction costs. Cross-chain messages are validated by a decentralized network of relayers.
                        </p>
                    </div>
                </div>
                
                <div class="glass-card p-8 hover:border-yellow-500/30 transition-colors hover:scale-105">
                    <div class="w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center mb-6 float" style="animation-delay: 2s">
                        <i class="fas fa-lock text-yellow-400 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">KarSafe</h3>
                    <p class="text-gray-400 mb-4">Institutional-grade multi-signature wallet for DAO treasury management with advanced security features.</p>
                    <span class="inline-block px-3 py-1 bg-gray-800 text-gray-500 text-xs font-bold rounded">SOON</span>
                    
                    <div class="water-content mt-6 pt-6 border-t border-white/5">
                        <p class="text-gray-400 text-xs">
                            Features include time-locked transactions, spending limits, role-based access control, and integration with hardware security modules for institutional-grade security.
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- –î–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="water-content mt-16 pt-16 border-t border-white/5">
                <div class="glass-card p-8">
                    <h3 class="text-xl font-bold text-white mb-6">Developer Resources</h3>
                    <div class="grid md:grid-cols-3 gap-6">
                        <div>
                            <h4 class="font-bold text-white mb-4">Documentation</h4>
                            <p class="text-gray-400 text-sm">
                                Comprehensive guides, API references, and tutorials for building on KarChain. Includes smart contract development, frontend integration, and testing strategies.
                            </p>
                        </div>
                        <div>
                            <h4 class="font-bold text-white mb-4">SDK & Tools</h4>
                            <p class="text-gray-400 text-sm">
                                Official SDKs for multiple programming languages, development tools, and testing frameworks to streamline the dApp development process.
                            </p>
                        </div>
                        <div>
                            <h4 class="font-bold text-white mb-4">Grants Program</h4>
                            <p class="text-gray-400 text-sm">
                                Funding and technical support for promising projects building on KarChain. Includes mentorship, marketing support, and community building resources.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç–æ—Ä—ñ–Ω–∫–∞ 4: Support -->
        <div id="page-support" class="page container mx-auto px-4 py-12">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-white mb-4">COMMUNITY HUB</h2>
                <p class="text-gray-400">Get real-time assistance from our engineering team and connect with other participants in the KarChain ecosystem.</p>
            </div>
            
            <div class="max-w-2xl mx-auto">
                <!-- Telegram -->
                <a href="https://t.me/tgkarim1" target="_blank" class="glass-card p-8 mb-8 block hover:bg-white/5 transition-colors group">
                    <div class="flex items-center gap-6">
                        <div class="w-16 h-16 bg-blue-500 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fab fa-telegram text-white text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white mb-2">Official Telegram</h3>
                            <p class="text-gray-400">Join 50,000+ members for news, announcements, and community discussions. Get real-time support from moderators and connect with other ecosystem participants.</p>
                        </div>
                    </div>
                </a>
                
                <!-- FAQ -->
                <div class="space-y-4">
                    <div class="glass-card p-6 hover:bg-white/5 transition-colors faq-item">
                        <button onclick="toggleFAQ(this)" class="w-full flex justify-between items-center text-left">
                            <span class="font-bold text-white">How to add KarChain to MetaMask?</span>
                            <i class="fas fa-chevron-down text-gray-500 faq-icon transition-transform"></i>
                        </button>
                        <div class="faq-answer mt-4 text-gray-400">
                            The easiest way is to click "Connect Wallet" on our dashboard. The site will automatically prompt MetaMask to add the KarChain Testnet (Chain ID: 1337). Alternatively, you can add it manually using the following network details:
                            <ul class="mt-2 space-y-1 text-sm">
                                <li>Network Name: KarChain Testnet</li>
                                <li>RPC URL: http://127.0.0.1:8545</li>
                                <li>Chain ID: 1337</li>
                                <li>Currency Symbol: KAR</li>
                                <li>Block Explorer URL: https://explorer-testnet.karchain.com</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="glass-card p-6 hover:bg-white/5 transition-colors faq-item">
                        <button onclick="toggleFAQ(this)" class="w-full flex justify-between items-center text-left">
                            <span class="font-bold text-white">How to get Testnet Tokens (KAR)?</span>
                            <i class="fas fa-chevron-down text-gray-500 faq-icon transition-transform"></i>
                        </button>
                        <div class="faq-answer mt-4 text-gray-400">
                            Once you connect your wallet and complete the "Social Identity" task on the dashboard, our automated faucet will drop initial KAR tokens to your address for gas fees. The faucet distributes tokens every 24 hours per address, with additional allocations available for completing network tasks and participating in stress tests. If you need more tokens for development or testing purposes, you can request additional allocations through our developer portal after verifying your participation in the testnet.
                        </div>
                    </div>
                    
                    <div class="glass-card p-6 hover:bg-white/5 transition-colors faq-item">
                        <button onclick="toggleFAQ(this)" class="w-full flex justify-between items-center text-left">
                            <span class="font-bold text-white">What are the validator requirements?</span>
                            <i class="fas fa-chevron-down text-gray-500 faq-icon transition-transform"></i>
                        </button>
                        <div class="faq-answer mt-4 text-gray-400">
                            Running a Besu node requires minimum specifications of 4GB RAM, 2 CPU Cores, and 50GB SSD storage. Docker is recommended for easy setup and maintenance. Validators must stake a minimum of 10,000 KAR tokens and maintain 99% uptime to receive staking rewards. The network uses a slashing mechanism that penalizes validators for malicious behavior or extended downtime. Detailed setup guides and monitoring tools are available in our documentation for both experienced node operators and newcomers to blockchain infrastructure.
                        </div>
                    </div>
                </div>
                
                <!-- –î–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
                <div class="water-content mt-16 pt-16 border-t border-white/5">
                    <div class="glass-card p-8">
                        <h3 class="text-xl font-bold text-white mb-6">Support Channels</h3>
                        <div class="grid md:grid-cols-2 gap-8">
                            <div>
                                <h4 class="font-bold text-white mb-4">Technical Support</h4>
                                <ul class="text-gray-400 space-y-2 text-sm">
                                    <li>Documentation & Guides</li>
                                    <li>Developer Forum</li>
                                    <li>GitHub Issues</li>
                                    <li>API Reference</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-bold text-white mb-4">Community Support</h4>
                                <ul class="text-gray-400 space-y-2 text-sm">
                                    <li>Telegram Community</li>
                                    <li>Discord Server</li>
                                    <li>Community Forum</li>
                                    <li>Social Media Channels</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="border-t border-white/5 py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div class="md:col-span-2">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-8 h-8 glass-card flex items-center justify-center">
                            <svg class="w-5 h-5 k-logo" viewBox="0 0 100 100">
                                <path d="M30 20 L30 80" stroke="currentColor" stroke-width="8" stroke-linecap="round" fill="none"/>
                                <path d="M30 50 L70 20" stroke="currentColor" stroke-width="8" stroke-linecap="round" fill="none"/>
                                <path d="M30 50 L70 80" stroke="currentColor" stroke-width="8" stroke-linecap="round" fill="none"/>
                                <circle cx="50" cy="50" r="8" fill="#4ade80" class="dot"/>
                            </svg>
                        </div>
                        <div class="text-lg font-bold text-white">KARCHAIN</div>
                    </div>
                    <p class="text-gray-500 text-sm">
                        The sovereign consensus layer for the decentralized future. Built for speed, security, and sustainability. KarChain represents the next evolution in blockchain technology, combining cutting-edge research with practical implementation to create a foundation for the decentralized applications of tomorrow.
                    </p>
                </div>
                
                <div>
                    <div class="text-sm font-bold text-white mb-4">Ecosystem</div>
                    <div class="space-y-2">
                        <a href="#" class="block text-sm text-gray-500 hover:text-white">Block Explorer</a>
                        <a href="#" class="block text-sm text-gray-500 hover:text-white">Governance</a>
                        <a href="#" class="block text-sm text-gray-500 hover:text-white">Bridge</a>
                        <a href="#" class="block text-sm text-gray500 hover:text-white">Faucet</a>
                    </div>
                </div>
                
                <div>
                    <div class="text-sm font-bold text-white mb-4">Developers</div>
                    <div class="space-y-2">
                        <a href="#" class="block text-sm text-gray-500 hover:text-white">Documentation</a>
                        <a href="#" class="block text-sm text-gray-500 hover:text-white">GitHub</a>
                        <a href="#" class="block text-sm text-gray-500 hover:text-white">Audits</a>
                        <a href="#" class="block text-sm text-gray-500 hover:text-white">Bug Bounty</a>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-white/5 mt-8 pt-8 text-center text-gray-500 text-sm">
                ¬© 2025 KarChain Foundation. All rights reserved. The KarChain protocol is open-source software built by a global community of developers and researchers.
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
        const CONFIG = {
            chainId: 1337,
            chainHex: '0x539',
            chainName: 'KarChain Testnet',
            rpcUrl: 'http://127.0.0.1:8545',
            symbol: 'KAR'
        };

        // –°—Ç–∞–Ω –¥–æ–¥–∞—Ç–∫—É
        const state = {
            walletConnected: false,
            walletAddress: null,
            provider: null,
            signer: null,
            currentPage: 'home',
            tasks: {
                1: { completed: false },
                2: { completed: false },
                3: { completed: false }
            }
        };

        // ========== PARTICLE SYSTEM ==========
        class ParticleSystem {
            constructor() {
                this.canvas = document.getElementById('particle-canvas');
                if (!this.canvas) return;
                
                this.ctx = this.canvas.getContext('2d');
                this.particles = [];
                this.animationId = null;
                
                this.init();
            }
            
            init() {
                this.resize();
                window.addEventListener('resize', () => this.resize());
                
                // –°—Ç–≤–æ—Ä—é—î–º–æ —á–∞—Å—Ç–∏–Ω–∫–∏
                const particleCount = window.innerWidth < 768 ? 30 : 60;
                for (let i = 0; i < particleCount; i++) {
                    this.particles.push(this.createParticle());
                }
                
                this.animate();
            }
            
            createParticle() {
                return {
                    x: Math.random() * this.canvas.width,
                    y: Math.random() * this.canvas.height,
                    size: Math.random() * 2 + 0.5,
                    speed: Math.random() * 0.3 + 0.1,
                    alpha: Math.random() * 0.3 + 0.1,
                    color: Math.random() > 0.5 ? '#4ade80' : '#22c55e'
                };
            }
            
            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            animate() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                this.particles.forEach(particle => {
                    particle.y -= particle.speed;
                    
                    if (particle.y < 0) {
                        particle.y = this.canvas.height;
                        particle.x = Math.random() * this.canvas.width;
                    }
                    
                    this.ctx.beginPath();
                    this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    this.ctx.fillStyle = particle.color + Math.floor(particle.alpha * 255).toString(16).padStart(2, '0');
                    this.ctx.fill();
                });
                
                this.animationId = requestAnimationFrame(() => this.animate());
            }
        }

        // ========== UI –§–£–ù–ö–¶–Ü–á ==========
        
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('open');
            document.body.style.overflow = menu.classList.contains('open') ? 'hidden' : '';
        }

        function showPage(pageId) {
            // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –≤—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—É—î–º–æ –≤–∏–±—Ä–∞–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É
            const page = document.getElementById(`page-${pageId}`);
            if (page) {
                page.classList.add('active');
                
                // –û–Ω–æ–≤–ª—é—î–º–æ –∞–∫—Ç–∏–≤–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.page === pageId) {
                        link.classList.add('active');
                    }
                });
                
                // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ—Ç–æ—á–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É
                state.currentPage = pageId;
                
                // –ü—Ä–æ–∫—Ä—É—á—É—î–º–æ –Ω–∞–≥–æ—Ä—É
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function openWalletModal() {
            document.getElementById('walletModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeWalletModal() {
            document.getElementById('walletModal').classList.add('hidden');
            document.body.style.overflow = '';
        }

        function toggleFAQ(button) {
            const faqItem = button.closest('.faq-item');
            faqItem.classList.toggle('open');
        }

        // ========== WALLET –§–£–ù–ö–¶–Ü–á ==========
        
        async function connectWallet(walletType) {
            try {
                let provider;
                
                switch(walletType) {
                    case 'metamask':
                        if (!window.ethereum) {
                            alert('Please install MetaMask!');
                            return;
                        }
                        provider = window.ethereum;
                        break;
                        
                    case 'trust':
                        if (window.ethereum?.isTrust) {
                            provider = window.ethereum;
                        } else if (window.trustwallet) {
                            provider = window.trustwallet;
                        } else {
                            alert('Trust Wallet not found!');
                            return;
                        }
                        break;
                        
                    case 'walletconnect':
                        alert('WalletConnect coming soon!');
                        return;
                        
                    default:
                        return;
                }
                
                const web3Provider = new ethers.providers.Web3Provider(provider);
                const accounts = await web3Provider.send("eth_requestAccounts", []);
                
                if (accounts.length === 0) {
                    throw new Error('No accounts found');
                }
                
                const address = accounts[0];
                state.walletAddress = address;
                state.provider = web3Provider;
                state.signer = web3Provider.getSigner();
                state.walletConnected = true;
                
                // –û–Ω–æ–≤–ª—é—î–º–æ UI
                updateWalletUI(address);
                await switchToKarChain(provider);
                await updateBalance();
                
                // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage
                localStorage.setItem('karchain_wallet', address);
                
                closeWalletModal();
                
            } catch (error) {
                console.error('Wallet connection error:', error);
                alert(`Connection failed: ${error.message}`);
            }
        }

        function updateWalletUI(address) {
            const shortAddress = `${address.substring(0, 6)}...${address.substring(address.length - 4)}`;
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –∫–Ω–æ–ø–∫—É
            const connectBtn = document.getElementById('connectBtn');
            connectBtn.innerHTML = `
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse mr-2"></div>
                <span class="hidden sm:inline">${shortAddress}</span>
            `;
            connectBtn.onclick = () => {}; // –í–∏–º–∏–∫–∞—î–º–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ
            
            // –ü–æ–∫–∞–∑—É—î–º–æ –¥–∞—à–±–æ—Ä–¥
            document.getElementById('dashboardLocked').classList.add('hidden');
            document.getElementById('dashboardActive').classList.remove('hidden');
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –∞–¥—Ä–µ—Å—É
            document.getElementById('walletAddress').textContent = address;
        }

        async function switchToKarChain(provider) {
            try {
                await provider.request({
                    method: 'wallet_switchEthereumChain',
                    params: [{ chainId: CONFIG.chainHex }]
                });
            } catch (switchError) {
                if (switchError.code === 4902) {
                    try {
                        await provider.request({
                            method: 'wallet_addEthereumChain',
                            params: [{
                                chainId: CONFIG.chainHex,
                                chainName: CONFIG.chainName,
                                rpcUrls: [CONFIG.rpcUrl],
                                nativeCurrency: {
                                    name: CONFIG.symbol,
                                    symbol: CONFIG.symbol,
                                    decimals: 18
                                }
                            }]
                        });
                    } catch (addError) {
                        console.error('Failed to add network:', addError);
                    }
                }
            }
        }

        async function updateBalance() {
            if (!state.provider || !state.walletAddress) return;
            
            try {
                const balance = await state.provider.getBalance(state.walletAddress);
                const formatted = ethers.utils.formatEther(balance);
                document.getElementById('balance').textContent = parseFloat(formatted).toFixed(2);
            } catch (error) {
                console.error('Failed to update balance:', error);
            }
        }

        function disconnectWallet() {
            state.walletConnected = false;
            state.walletAddress = null;
            state.provider = null;
            state.signer = null;
            
            // –û–Ω–æ–≤–ª—é—î–º–æ UI
            document.getElementById('dashboardLocked').classList.remove('hidden');
            document.getElementById('dashboardActive').classList.add('hidden');
            
            const connectBtn = document.getElementById('connectBtn');
            connectBtn.innerHTML = `
                <i class="fas fa-wallet text-green-400 mr-2"></i>
                <span class="hidden sm:inline">Connect Wallet</span>
            `;
            connectBtn.onclick = openWalletModal;
            
            // –í–∏–¥–∞–ª—è—î–º–æ –∑ localStorage
            localStorage.removeItem('karchain_wallet');
        }

        // ========== TASK –§–£–ù–ö–¶–Ü–á ==========
        
        function startTask(taskId) {
            if (taskId === 1) {
                const button = document.getElementById('verifyTask1');
                button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Checking...';
                button.disabled = true;
                
                setTimeout(() => {
                    button.disabled = false;
                    button.innerHTML = 'Verify Now';
                }, 1500);
            }
        }
        
        function verifyTask(taskId) {
            const button = document.getElementById(`verifyTask${taskId}`);
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';
            button.disabled = true;
            
            setTimeout(() => {
                state.tasks[taskId].completed = true;
                button.innerHTML = '<i class="fas fa-check"></i> Verified';
                button.classList.remove('bg-green-600', 'hover:bg-green-500');
                button.classList.add('bg-green-500/20', 'text-green-400');
                
                // –†–æ–∑–±–ª–æ–∫–æ–≤—É—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω—É –∑–∞–¥–∞—á—É
                if (taskId === 1) {
                    document.getElementById('task2').classList.remove('task-locked');
                    alert('Task 1 verified! Task 2 unlocked.');
                } else if (taskId === 2) {
                    document.getElementById('task3').classList.remove('task-locked');
                    const whitelistBtn = document.getElementById('whitelistBtn');
                    whitelistBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                    whitelistBtn.onclick = openWhitelistForm;
                    alert('Task 2 verified! Task 3 unlocked.');
                }
                
                // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø—Ä–æ–≥—Ä–µ—Å
                localStorage.setItem('karchain_tasks', JSON.stringify(state.tasks));
                
            }, 1500);
        }

        function checkVolume() {
            alert('Checking trading volume... (Simulated)');
        }

        function openWhitelistForm() {
            window.open('https://docs.google.com/forms', '_blank');
        }

        function requestTokens() {
            if (!state.walletConnected) {
                alert('Please connect wallet first!');
                return;
            }
            
            alert('Test tokens requested! (Simulated)');
            // –°–∏–º—É–ª—é—î–º–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
            const currentBalance = parseFloat(document.getElementById('balance').textContent);
            document.getElementById('balance').textContent = (currentBalance + 10).toFixed(2);
        }

        // ========== –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø ==========
        
        function init() {
            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ —Å–∏—Å—Ç–µ–º—É —á–∞—Å—Ç–∏–Ω–æ–∫
            new ParticleSystem();
            
            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π –≥–∞–º–∞–Ω–µ—Ü—å
            const savedWallet = localStorage.getItem('karchain_wallet');
            const savedTasks = localStorage.getItem('karchain_tasks');
            
            if (savedWallet && window.ethereum) {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–∫–ª—é—á–∞—î–º–æ
                connectWallet('metamask');
            }
            
            if (savedTasks) {
                state.tasks = JSON.parse(savedTasks);
                updateTaskUI();
            }
            
            // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π
            document.addEventListener('click', (e) => {
                // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –¥—Ä–æ–ø–¥–∞—É–Ω –ø—Ä–∏ –∫–ª—ñ–∫—É –ø–æ–∑–∞ –Ω–∏–º
                if (e.target.closest('#walletModal')) return;
                if (document.getElementById('walletModal').classList.contains('hidden')) return;
                closeWalletModal();
            });
            
            // –ó–∞–ø—É—Å–∫–∞—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—ó –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤
            animateCounters();
            
            console.log('KarChain initialized');
        }

        function updateTaskUI() {
            Object.keys(state.tasks).forEach(taskId => {
                if (state.tasks[taskId].completed) {
                    const button = document.getElementById(`verifyTask${taskId}`);
                    if (button) {
                        button.innerHTML = '<i class="fas fa-check"></i> Verified';
                        button.classList.remove('bg-green-600', 'hover:bg-green-500');
                        button.classList.add('bg-green-500/20', 'text-green-400');
                        button.disabled = true;
                    }
                    
                    // –†–æ–∑–±–ª–æ–∫–æ–≤—É—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω—É –∑–∞–¥–∞—á—É
                    if (taskId === '1') {
                        document.getElementById('task2')?.classList.remove('task-locked');
                    } else if (taskId === '2') {
                        document.getElementById('task3')?.classList.remove('task-locked');
                        const whitelistBtn = document.getElementById('whitelistBtn');
                        whitelistBtn?.classList.remove('opacity-50', 'cursor-not-allowed');
                        whitelistBtn.onclick = openWhitelistForm;
                    }
                }
            });
        }

        function animateCounters() {
            const counters = document.querySelectorAll('.counter');
            
            counters.forEach(counter => {
                const target = parseInt(counter.dataset.target);
                let current = 0;
                const increment = target / 50;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    counter.textContent = Math.floor(current).toLocaleString();
                }, 30);
            });
        }

        // –ó–∞–ø—É—Å–∫–∞—î–º–æ –¥–æ–¥–∞—Ç–æ–∫ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        window.addEventListener('load', init);
    </script>
</body>
</html>
