<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#020402">
    <meta name="description" content="KarChain is the first hyper-scalable Layer-1 blockchain featuring Adaptive State Sharding and Proof-of-Synchrony consensus mechanism. Join the Incentivized Testnet today.">
    <meta name="keywords" content="KarChain, Blockchain, Layer 1, Crypto, Web3, Sharding, Consensus, Testnet, Airdrop, KRM Token">
    <meta name="author" content="KarChain Foundation">
    <meta property="og:title" content="KarChain | The Sovereign Consensus Layer">
    <meta property="og:description" content="The final settlement layer for the decentralized web. Built on Besu. Secured by Proof-of-Synchrony.">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/12409/12409608.png">
    <meta property="og:url" content="https://karchain.network">
    <meta name="twitter:card" content="summary_large_image">

    <title>KarChain | The Sovereign Consensus Layer</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M20 10 V90' stroke='%234ade80' stroke-width='8' stroke-linecap='round'/><path d='M80 10 L20 50 L80 90' stroke='%234ade80' stroke-width='8' stroke-linecap='round' stroke-linejoin='round'/><circle cx='20' cy='50' r='10' fill='%2322c55e'/><circle cx='80' cy='10' r='8' fill='%2322c55e'/><circle cx='80' cy='90' r='8' fill='%2322c55e'/></svg>">

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- WalletConnect -->
    <script src="https://unpkg.com/@walletconnect/web3-provider@1.7.8/dist/umd/index.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'k-black': '#020402',
                        'k-dark': '#050a05',
                        'k-green': '#4ade80',
                        'k-green-dark': '#15803d',
                        'k-gray': '#a3a3a3',
                        'k-border': 'rgba(255, 255, 255, 0.08)',
                        'trust-green': '#3375BB',
                        'mm-orange': '#F6851B',
                        'wc-purple': '#3B99FC',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                        display: ['Space Grotesk', 'sans-serif'],
                    },
                    animation: {
                        'spin-slow': 'spin 20s linear infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'water-drop': 'waterDrop 8s linear infinite',
                        'wave': 'wave 20s linear infinite',
                        'gradient': 'gradient 8s ease infinite',
                        'shimmer': 'shimmer 2s infinite',
                        'glow': 'glow 2s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        waterDrop: {
                            '0%': { transform: 'translateY(-100px)', opacity: '0' },
                            '10%': { opacity: '1' },
                            '90%': { opacity: '1' },
                            '100%': { transform: 'translateY(100vh)', opacity: '0' },
                        },
                        wave: {
                            '0%': { transform: 'translateX(0) translateY(0)' },
                            '50%': { transform: 'translateX(-50px) translateY(10px)' },
                            '100%': { transform: 'translateX(0) translateY(0)' },
                        },
                        gradient: {
                            '0%, 100%': { 'background-position': '0% 50%' },
                            '50%': { 'background-position': '100% 50%' },
                        },
                        shimmer: {
                            '0%': { transform: 'translateX(-100%)' },
                            '100%': { transform: 'translateX(100%)' },
                        },
                        glow: {
                            '0%, 100%': { opacity: 1 },
                            '50%': { opacity: 0.5 },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            --glass-bg: rgba(10, 10, 10, 0.6);
            --glass-border: rgba(255, 255, 255, 0.08);
            --neon-glow: 0 0 20px rgba(74, 222, 128, 0.3);
        }

        * {
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            background-color: #020402;
            color: #e5e5e5;
            overflow-x: hidden;
            cursor: default;
            font-feature-settings: "ss01", "ss02", "cv01", "cv02";
            text-rendering: optimizeLegibility;
            opacity: 0;
            animation: fadeInBody 1s ease-out forwards;
        }

        @keyframes fadeInBody {
            to { opacity: 1; }
        }

        html {
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: none;
        }

        .smooth-scroll-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            will-change: transform;
            -webkit-overflow-scrolling: touch;
        }

        .scroll-content {
            position: relative;
            will-change: transform;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
        }

        .smooth-transition {
            transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform: translateZ(0);
            backface-visibility: hidden;
        }

        .smooth-transform {
            transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform: translateZ(0);
        }

        .smooth-opacity {
            transition: opacity 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        @media (min-width: 1024px) {
            .hover-lift {
                will-change: transform;
                transform: translate3d(0, 0, 0);
                backface-visibility: hidden;
                -webkit-transform: translate3d(0, 0, 0);
            }
        }

        .gradient-text {
            background: linear-gradient(90deg, #ffffff, #4ade80, #22c55e, #4ade80, #ffffff);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 8s ease infinite;
        }

        .glass-panel {
            background: rgba(15, 15, 15, 0.6);
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 
                0 4px 30px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(74, 222, 128, 0.05);
            transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform: translateZ(0);
        }

        .glass-panel:hover {
            border-color: rgba(74, 222, 128, 0.15);
            box-shadow: 
                0 8px 40px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(74, 222, 128, 0.1),
                0 0 40px rgba(74, 222, 128, 0.1);
            transform: translateY(-4px) translateZ(0);
        }

        .glass-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
            border: 1px solid rgba(255,255,255,0.05);
            backdrop-filter: blur(10px) saturate(180%);
            -webkit-backdrop-filter: blur(10px) saturate(180%);
            transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform: translateZ(0);
        }

        .glass-card:hover {
            border-color: rgba(74, 222, 128, 0.2);
            transform: translateY(-8px) scale(1.02) translateZ(0);
            box-shadow: 
                0 20px 60px -10px rgba(74, 222, 128, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        nav#navbar {
            background: rgba(2, 4, 2, 0.95) !important;
            backdrop-filter: blur(24px) saturate(200%) !important;
            -webkit-backdrop-filter: blur(24px) saturate(200%) !important;
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform: translateY(0);
            z-index: 1000;
            will-change: transform;
        }

        .btn-primary {
            background: linear-gradient(135deg, #15803d 0%, #16a34a 100%);
            color: white;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            box-shadow: 0 4px 20px rgba(34, 197, 94, 0.2);
            transform: translateZ(0);
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.6s;
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px) translateZ(0);
            box-shadow: 
                0 8px 30px rgba(34, 197, 94, 0.4),
                0 0 0 1px rgba(34, 197, 94, 0.2);
            border-color: #4ade80;
        }

        .btn-primary:active {
            transform: translateY(0) translateZ(0);
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(2, 4, 2, 0.8);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #15803d, #4ade80);
            border-radius: 4px;
            border: 2px solid rgba(2, 4, 2, 0.8);
            transition: all 0.3s ease;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #4ade80, #22c55e);
            transform: scale(1.1);
        }

        ::selection {
            background: rgba(74, 222, 128, 0.3);
            color: #ffffff;
        }

        #scrollToTopBtn {
            box-shadow: 0 4px 20px rgba(74, 222, 128, 0.3);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 999;
        }

        #scrollToTopBtn:hover {
            transform: translateY(-4px) scale(1.1);
            box-shadow: 0 8px 30px rgba(74, 222, 128, 0.5);
        }

        #scrollToTopBtn:active {
            transform: translateY(0) scale(1);
        }

        #webgl-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -10;
            opacity: 0.4;
            pointer-events: none;
        }
        
        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -9;
            pointer-events: none;
            background-image: 
                linear-gradient(rgba(74, 222, 128, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(74, 222, 128, 0.03) 1px, transparent 1px);
            background-size: 60px 60px;
            mask-image: radial-gradient(circle at center, black 40%, transparent 70%);
        }

        .text-gradient {
            background: linear-gradient(135deg, #ffffff 0%, #4ade80 50%, #22c55e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% 200%;
            animation: gradient 6s ease infinite;
        }

        .fade-in {
            opacity: 0;
            animation: fadeIn 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        .fade-in-up {
            opacity: 0;
            transform: translateY(40px);
            animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        .fade-in-left {
            opacity: 0;
            transform: translateX(-40px);
            animation: fadeInLeft 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        .fade-in-right {
            opacity: 0;
            transform: translateX(40px);
            animation: fadeInRight 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        .delay-400 { animation-delay: 0.4s; }
        .delay-500 { animation-delay: 0.5s; }
        .delay-600 { animation-delay: 0.6s; }
        .delay-700 { animation-delay: 0.7s; }
        .delay-800 { animation-delay: 0.8s; }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInLeft {
            to { 
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeInRight {
            to { 
                opacity: 1;
                transform: translateX(0);
            }
        }

        .page-content {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s cubic-bezier(0.2, 0.8, 0.2, 1), 
                        transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .page-content.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .hover-lift {
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .hover-lift:hover {
            transform: translateY(-8px);
        }

        .hover-glow {
            transition: box-shadow 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .hover-glow:hover {
            box-shadow: 0 0 40px rgba(74, 222, 128, 0.2);
        }

        .water-drop {
            position: absolute;
            width: 2px;
            background: linear-gradient(to bottom, transparent, rgba(74, 222, 128, 0.3));
            border-radius: 0 0 1px 1px;
            z-index: -8;
            pointer-events: none;
            animation: waterDrop 8s linear infinite;
        }

        .water-wave {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 300%;
            height: 150px;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(74, 222, 128, 0.1) 20%, 
                rgba(74, 222, 128, 0.05) 40%, 
                transparent 60%);
            z-index: -7;
            opacity: 0.3;
            pointer-events: none;
            animation: wave 20s linear infinite;
        }

        .gyro-wrapper {
            perspective: 1000px;
            width: 300px;
            height: 300px;
            position: relative;
        }

        .gyro {
            position: absolute;
            top: 50%;
            left: 50%;
            transform-style: preserve-3d;
            animation: rotate3d 20s linear infinite;
        }

        @keyframes rotate3d {
            0% { transform: rotateX(0) rotateY(0) rotateZ(0); }
            100% { transform: rotateX(360deg) rotateY(360deg) rotateZ(180deg); }
        }

        .gyro-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            border-radius: 50%;
            border: 1px solid rgba(74, 222, 128, 0.6);
            box-shadow: 0 0 15px rgba(74, 222, 128, 0.2);
            animation: pulseRing 4s ease-in-out infinite;
        }

        @keyframes pulseRing {
            0%, 100% { 
                border-color: rgba(74, 222, 128, 0.6);
                box-shadow: 0 0 15px rgba(74, 222, 128, 0.2);
            }
            50% { 
                border-color: rgba(74, 222, 128, 0.9);
                box-shadow: 0 0 30px rgba(74, 222, 128, 0.4);
            }
        }

        .gr-1 {
            width: 200px;
            height: 200px;
            margin: -100px;
            animation: rotate1 10s linear infinite;
            border-left-color: transparent;
        }

        .gr-2 {
            width: 160px;
            height: 160px;
            margin: -80px;
            animation: rotate2 8s linear infinite;
            border-top-color: transparent;
            border-width: 2px;
        }

        .gr-3 {
            width: 120px;
            height: 120px;
            margin: -60px;
            animation: rotate3 6s linear infinite;
            border-right-color: transparent;
        }

        @keyframes rotate1 {
            0% { transform: rotateX(0) rotateY(0); }
            100% { transform: rotateX(360deg) rotateY(360deg); }
        }

        @keyframes rotate2 {
            0% { transform: rotateX(0) rotateY(0); }
            100% { transform: rotateX(-360deg) rotateY(180deg); }
        }

        @keyframes rotate3 {
            0% { transform: rotateX(0) rotateY(0); }
            100% { transform: rotateX(180deg) rotateY(-360deg); }
        }

        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 80%;
            max-width: 400px;
            height: 100vh;
            background: rgba(2, 4, 2, 0.98);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            z-index: 10000;
            transition: right 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            padding-top: 100px;
            overflow-y: auto;
            border-left: 1px solid rgba(74, 222, 128, 0.1);
        }

        .mobile-menu.active {
            right: 0;
        }

        .mobile-menu-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .mobile-menu-backdrop.active {
            opacity: 1;
            pointer-events: all;
        }

        .hamburger {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 21px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 10001;
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .hamburger:hover {
            transform: scale(1.1);
        }

        .hamburger span {
            width: 100%;
            height: 3px;
            background: #4ade80;
            border-radius: 2px;
            transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform-origin: center;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
            transform: scaleX(0);
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        @media (max-width: 1024px) {
            .desktop-nav {
                display: none !important;
            }
            
            .mobile-nav {
                display: none !important;
            }
            
            .hamburger {
                display: flex;
            }
            
            nav .hidden.md\\:block {
                display: none !important;
            }
            
            .mobile-wallet-info {
                display: block !important;
                margin-top: 20px;
                padding: 20px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 12px;
            }
            
            nav .flex.items-center.gap-4 .flex.flex-col span:first-child {
                font-size: 16px !important;
            }
            
            nav .flex.items-center.gap-4 .flex.flex-col span:last-child {
                font-size: 8px !important;
            }
            
            #connectBtn {
                padding: 8px 12px !important;
                font-size: 10px !important;
                width: auto;
                min-width: 120px;
            }
            
            #connectBtn span {
                display: inline;
            }
            
            #connectBtn {
                display: flex !important;
            }
            
            nav .max-w-\[1600px\] {
                padding-left: 16px !important;
                padding-right: 16px !important;
            }
            
            .page-content {
                padding-left: 16px !important;
                padding-right: 16px !important;
            }
            
            nav .flex.items-center.justify-between {
                width: 100%;
            }
            
            nav .flex.items-center.gap-4.relative {
                margin-left: auto;
                gap: 12px !important;
            }
            
            /* Smooth scroll –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö */
            html {
                scroll-behavior: smooth;
            }
        }

        @media (max-width: 768px) {
            #dashboard-ui .glass-panel {
                padding: 0;
            }
            
            #dashboard-ui .glass-panel > div {
                border-radius: 16px;
                padding: 20px;
            }
            
            .stat-value {
                font-size: 24px;
            }
            
            #connectBtn {
                padding: 6px 10px !important;
                font-size: 9px !important;
                min-width: 110px;
            }
            
            #connectBtn i {
                font-size: 10px !important;
            }
            
            nav .relative.w-10.h-10 {
                width: 32px !important;
                height: 32px !important;
            }
            
            nav .h-24 {
                height: 70px !important;
            }
            
            .page-content.pt-32 {
                padding-top: 90px !important;
            }
        }
        
        @media (max-width: 480px) {
            #connectBtn span {
                display: none;
            }
            
            #connectBtn {
                width: 40px;
                height: 40px;
                padding: 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center;
                justify-content: center;
                min-width: auto;
            }
            
            #connectBtn i {
                margin: 0 !important;
                font-size: 16px !important;
            }
            
            .hamburger {
                width: 24px;
                height: 18px;
            }
            
            .hamburger span {
                height: 2px;
            }
            
            .hamburger.active span:nth-child(1) {
                transform: rotate(45deg) translate(4px, 4px);
            }
            
            .hamburger.active span:nth-child(3) {
                transform: rotate(-45deg) translate(5px, -5px);
            }
        }

        .notification {
            animation: slideIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        @keyframes slideIn {
            from { 
                transform: translateX(100%) translateY(-20px); 
                opacity: 0; 
            }
            to { 
                transform: translateX(0) translateY(0); 
                opacity: 1; 
            }
        }

        .faq-content {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        
        .faq-content.open {
            max-height: 500px;
            opacity: 1;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }

        .task-locked {
            pointer-events: none;
            opacity: 0.6;
            filter: grayscale(0.8);
            position: relative;
            transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .task-locked::after {
            content: '\f023';
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 32px;
            color: rgba(255,255,255,0.8);
            background: rgba(0,0,0,0.7);
            padding: 20px;
            border-radius: 50%;
            backdrop-filter: blur(5px);
            animation: pulse 2s ease-in-out infinite;
        }

        .counter {
            font-variant-numeric: tabular-nums;
        }

        .shimmer {
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0) 0%, 
                rgba(255, 255, 255, 0.1) 50%, 
                rgba(255, 255, 255, 0) 100%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        /* X (Twitter) logo fix */
        .fa-x-twitter {
            font-family: "Font Awesome 6 Brands";
        }
        .fa-x-twitter:before {
            content: "\f099";
        }
        
        /* Custom X logo styling */
        .x-logo {
            color: #000000;
            background: white;
            border-radius: 4px;
            padding: 2px;
            font-weight: 900;
            font-family: 'Inter', sans-serif;
        }

        /* Fix for smooth scrolling */
        body.no-scroll {
            overflow: hidden;
        }

        /* Smooth scroll improvements */
        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }

        html, body {
            margin: 0;
            padding: 0;
            min-height: 100%;
        }

        /* Optimize for smooth scrolling */
        .optimize-scroll {
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000;
            -webkit-font-smoothing: subpixel-antialiased;
        }
    </style>
</head>
<body class="antialiased selection:bg-green-500 selection:text-white">
    <!-- –ú–æ–±—ñ–ª—å–Ω–µ –º–µ–Ω—é -->
    <div class="mobile-menu-backdrop" id="mobileBackdrop"></div>
    
    <div class="mobile-menu" id="mobileMenu">
        <div class="flex flex-col items-center p-8 space-y-6">
            <button onclick="App.router.navigate('home'); UI.closeMobileMenu();" class="text-2xl font-bold text-white hover:text-green-400 transition-colors w-full text-center py-4 border-b border-white/10 smooth-transition">
                Testnet
            </button>
            <button onclick="App.router.navigate('vision'); UI.closeMobileMenu();" class="text-2xl font-bold text-gray-400 hover:text-white transition-colors w-full text-center py-4 border-b border-white/10 smooth-transition">
                Vision
            </button>
            <button onclick="App.router.navigate('ecosystem'); UI.closeMobileMenu();" class="text-2xl font-bold text-gray-400 hover:text-white transition-colors w-full text-center py-4 border-b border-white/10 smooth-transition">
                Ecosystem
            </button>
            <button onclick="App.router.navigate('support'); UI.closeMobileMenu();" class="text-2xl font-bold text-gray-400 hover:text-white transition-colors w-full text-center py-4 border-b border-white/10 smooth-transition">
                Support
            </button>
            
            <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≥–∞–º–∞–Ω–µ—Ü—å –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö -->
            <div id="mobileWalletInfo" class="mobile-wallet-info hidden">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-blue-600 flex items-center justify-center">
                        <i class="fa-solid fa-wallet text-white"></i>
                    </div>
                    <div>
                        <p class="text-white font-bold text-sm">My Wallet</p>
                        <p class="text-gray-500 text-xs font-mono" id="mobileWalletAddress">Not connected</p>
                    </div>
                </div>
                <button onclick="App.faucet.claimTokens()" class="w-full mb-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-bold transition-colors smooth-transition">
                    <i class="fa-solid fa-faucet mr-2"></i> Get Test Tokens
                </button>
                <button onclick="App.wallet.disconnect()" class="w-full px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-bold transition-colors smooth-transition">
                    <i class="fa-solid fa-right-from-bracket mr-2"></i> Disconnect
                </button>
            </div>
            
            <div class="flex justify-center space-x-6 mt-8">
                <a href="https://x.com/karim7652117665" target="_blank" class="text-gray-400 hover:text-white transition-colors smooth-transition">
                    <span class="x-logo text-lg font-bold">ùïè</span>
                </a>
                <a href="https://t.me/tgkarim1" target="_blank" class="text-gray-400 hover:text-white transition-colors smooth-transition">
                    <i class="fa-brands fa-telegram text-2xl"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- Background effects -->
    <div class="grid-overlay"></div>
    <canvas id="webgl-canvas"></canvas>
    
    <div id="water-drops"></div>
    
    <div class="water-wave"></div>
    
    <div class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-green-500/5 rounded-full blur-[120px] -z-5 pointer-events-none animate-pulse-slow"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 border-b border-white/5 transition-all duration-300 smooth-transition" id="navbar" style="background: rgba(2, 4, 2, 0.95); backdrop-filter: blur(24px) saturate(200%); -webkit-backdrop-filter: blur(24px) saturate(200%);">
        <div class="max-w-[1600px] mx-auto px-6 h-24 flex items-center justify-between">
            
            <div class="flex items-center gap-3 cursor-pointer group" onclick="App.router.navigate('home')">
                <div class="relative w-10 h-10 flex items-center justify-center smooth-transform">
                    <svg viewBox="0 0 100 100" class="w-full h-full drop-shadow-[0_0_15px_rgba(74,222,128,0.6)] transition-transform duration-700 group-hover:rotate-180 group-hover:scale-110">
                        <path d="M20 10 V90" stroke="#4ade80" stroke-width="8" stroke-linecap="round"/>
                        <path d="M80 10 L20 50 L80 90" stroke="#4ade80" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="20" cy="50" r="10" fill="#22c55e"/>
                        <circle cx="80" cy="10" r="8" fill="#22c55e"/>
                        <circle cx="80" cy="90" r="8" fill="#22c55e"/>
                    </svg>
                </div>
                <div class="flex flex-col">
                    <span class="text-lg font-bold tracking-[0.2em] text-white group-hover:text-green-400 transition-colors font-display">KARCHAIN</span>
                    <span class="text-[9px] text-gray-500 uppercase tracking-widest font-mono group-hover:text-gray-300 smooth-transition">Testnet Phase 1</span>
                </div>
            </div>

            <!-- Desktop navigation -->
            <div class="desktop-nav flex items-center gap-12">
                <button onclick="App.router.navigate('home')" id="nav-home" class="nav-link text-sm font-bold uppercase tracking-widest text-white border-b-2 border-green-500 pb-1 smooth-transition">Testnet</button>
                <button onclick="App.router.navigate('vision')" id="nav-vision" class="nav-link text-sm font-bold uppercase tracking-widest text-gray-400 hover:text-white transition-colors pb-1 border-b-2 border-transparent hover:border-green-500/50 smooth-transition">Vision</button>
                <button onclick="App.router.navigate('ecosystem')" id="nav-ecosystem" class="nav-link text-sm font-bold uppercase tracking-widest text-gray-400 hover:text-white transition-colors pb-1 border-b-2 border-transparent hover:border-green-500/50 smooth-transition">Ecosystem</button>
                <button onclick="App.router.navigate('support')" id="nav-support" class="nav-link text-sm font-bold uppercase tracking-widest text-gray-400 hover:text-white transition-colors pb-1 border-b-2 border-transparent hover:border-green-500/50 smooth-transition">Support</button>
            </div>

            <div class="flex items-center gap-4 relative">
                <button id="connectBtn" class="btn-primary px-6 py-3 rounded-xl text-xs font-bold uppercase tracking-widest flex items-center gap-2 shadow-lg smooth-transition">
                    <i class="fa-solid fa-wallet"></i> <span>Connect Wallet</span>
                </button>

                <!-- Hamburger menu for mobile -->
                <button class="hamburger" id="hamburgerBtn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>

                <div id="userDropdown" class="hidden absolute top-16 right-0 w-64 glass-panel rounded-xl p-4 z-50">
                    <div class="flex items-center gap-3 mb-4 pb-4 border-b border-white/10">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-blue-600 flex items-center justify-center">
                            <i class="fa-solid fa-wallet text-white"></i>
                        </div>
                        <div>
                            <p class="text-white font-bold text-sm">My Wallet</p>
                            <p class="text-gray-500 text-xs font-mono" id="dropdownAddress">0x00...0000</p>
                        </div>
                    </div>
                    <div class="space-y-1">
                        <button class="w-full text-left px-3 py-2 text-sm text-gray-300 hover:bg-white/5 rounded hover:text-white transition-colors smooth-transition">
                            <i class="fa-solid fa-coins mr-2"></i> Balance: <span id="dropdownBalance" class="font-bold">0 KRM</span>
                        </button>
                        <button onclick="App.faucet.claimTokens()" class="w-full text-left px-3 py-2 text-sm text-gray-300 hover:bg-white/5 rounded hover:text-white transition-colors smooth-transition">
                            <i class="fa-solid fa-faucet mr-2"></i> Get Test Tokens
                        </button>
                        <button onclick="App.wallet.disconnect()" id="disconnectBtn" class="w-full text-left px-3 py-2 btn-logout rounded transition-colors mt-2 smooth-transition">
                            <i class="fa-solid fa-right-from-bracket mr-2"></i> Disconnect Wallet
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Connect Wallet Modal -->
    <div id="connect-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="App.ui.closeModal()"></div>
        <div class="relative glass-panel w-full max-w-md rounded-2xl p-8 transform scale-95 opacity-0 transition-all duration-300 smooth-transition" id="modal-content">
            <div class="flex justify-between items-center mb-8">
                <h3 class="text-2xl font-bold text-white font-display">Connect Wallet</h3>
                <button onclick="App.ui.closeModal()" class="text-gray-400 hover:text-white transition-colors smooth-transition"><i class="fa-solid fa-xmark text-xl"></i></button>
            </div>
            
            <p class="text-gray-400 text-sm mb-6">Select your wallet to authenticate with the KarChain Network.</p>

            <div class="space-y-3" id="wallet-options">
                <div onclick="App.wallet.connect('MetaMask')" class="wallet-option metamask group border border-white/10 p-4 rounded-xl bg-white/5 cursor-pointer transition-all flex items-center justify-between hover-lift">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-white/5 rounded-full flex items-center justify-center group-hover:bg-[#F6851B]/10 transition-colors smooth-transition">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" class="w-8 h-8" alt="MetaMask">
                        </div>
                        <div>
                            <div class="wallet-title font-bold text-white text-lg group-hover:text-[#F6851B] transition-colors smooth-transition">MetaMask</div>
                            <div class="text-xs text-gray-500 uppercase font-mono">Browser Extension</div>
                        </div>
                    </div>
                    <div class="wallet-status bg-green-500 shadow-[0_0_10px_#4ade80] group-hover:bg-[#F6851B] group-hover:shadow-[0_0_10px_#F6851B]"></div>
                </div>

                <div onclick="App.wallet.connect('Trust')" class="wallet-option trust group border border-white/10 p-4 rounded-xl bg-white/5 cursor-pointer transition-all flex items-center justify-between hover-lift">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-white/5 rounded-full flex items-center justify-center group-hover:bg-[#3375BB]/10 transition-colors smooth-transition">
                            <i class="fa-solid fa-shield-halved text-2xl"></i>
                        </div>
                        <div>
                            <div class="wallet-title font-bold text-white text-lg group-hover:text-[#3375BB] transition-colors smooth-transition">Trust Wallet</div>
                            <div class="text-xs text-gray-500 uppercase font-mono">Mobile / Desktop</div>
                        </div>
                    </div>
                    <div class="wallet-status bg-gray-500 group-hover:bg-[#3375BB] group-hover:shadow-[0_0_10px_#3375BB]"></div>
                </div>

                <div onclick="App.wallet.connect('WC')" class="wallet-option walletconnect group border border-white/10 p-4 rounded-xl bg-white/5 cursor-pointer transition-all flex items-center justify-between hover-lift">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-white/5 rounded-full flex items-center justify-center group-hover:bg-[#3B99FC]/10 transition-colors smooth-transition">
                            <i class="fa-solid fa-qrcode text-2xl"></i>
                        </div>
                        <div>
                            <div class="wallet-title font-bold text-white text-lg group-hover:text-[#3B99FC] transition-colors smooth-transition">WalletConnect</div>
                            <div class="text-xs text-gray-500 uppercase font-mono">Scan QR Code</div>
                        </div>
                    </div>
                    <div class="wallet-status bg-gray-500 group-hover:bg-[#3B99FC] group-hover:shadow-[0_0_10px_#3B99FC]"></div>
                </div>
            </div>

            <div class="mt-8 pt-6 border-t border-white/10 text-center">
                <p class="text-[10px] text-gray-600 uppercase tracking-widest">By connecting, you agree to our <a href="#" class="text-green-500 hover:underline">Terms</a> & <a href="#" class="text-green500 hover:underline">Privacy Policy</a></p>
            </div>
        </div>
    </div>

    <!-- Home Page -->
    <div id="page-home" class="page-content active pt-32 pb-20 px-4">
        
        <div class="max-w-7xl mx-auto text-center mb-24 relative z-10 fade-in-up">
            <h1 class="text-4xl md:text-7xl font-bold text-white mb-6 leading-tight">
                THE ARCHITECTURE OF <br> <span class="text-gradient">DIGITAL TRUST</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-400 max-w-2xl mx-auto font-light leading-relaxed mb-10 fade-in-up delay-100">
                KarChain is the modular consensus layer designed for the next billion users. 
                <br>Join the Incentivized Testnet and secure your place in the genesis block.
            </p>
            
            <div class="flex flex-wrap justify-center gap-6 fade-in-up delay-200">
                <button onclick="App.router.navigate('vision')" class="px-10 py-4 border border-white/10 hover:bg-white/5 text-white rounded-full text-sm font-bold uppercase tracking-widest transition-all smooth-transition hover-lift">
                    Read Manifesto
                </button>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto mt-16 border-t border-white/10 pt-8 fade-in-up delay-300">
                <div>
                    <p class="text-3xl font-bold text-white stat-value counter">12,492</p>
                    <p class="text-[10px] text-gray-500 uppercase tracking-widest">Blocks Minted</p>
                </div>
                <div>
                    <p class="text-3xl font-bold text-white stat-value counter">0.4s</p>
                    <p class="text-[10px] text-gray-500 uppercase tracking-widest">Block Time</p>
                </div>
                <div>
                    <p class="text-3xl font-bold text-white stat-value counter">15,000+</p>
                    <p class="text-[10px] text-gray-500 uppercase tracking-widest">Transactions</p>
                </div>
                <div>
                    <p class="text-3xl font-bold text-white stat-value counter">138</p>
                    <p class="text-[10px] text-gray-500 uppercase tracking-widest">Active Validators</p>
                </div>
            </div>
        </div>

        <div id="dashboard-ui" class="max-w-6xl mx-auto fade-in-up delay-400">
            <div class="glass-panel rounded-3xl p-1 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-green-500 to-transparent opacity-50 shimmer"></div>
                <div class="bg-black/80 backdrop-blur-xl rounded-[20px] p-8 md:p-12">
                    
                    <div id="view-locked" class="text-center py-20">
                        <div class="w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6 border border-white/10 shadow-lg smooth-transition hover-lift">
                            <i class="fa-solid fa-lock text-3xl text-gray-600"></i>
                        </div>
                        <h2 class="text-3xl font-bold text-white mb-3 font-display">Dashboard Locked</h2>
                        <p class="text-gray-400 mb-8 max-w-md mx-auto">Connect your wallet to authenticate your session and view your testnet allocation.</p>
                        <button onclick="App.ui.openModal()" class="btn-primary px-12 py-4 rounded-xl text-sm font-bold uppercase tracking-widest shadow-xl smooth-transition hover-lift">
                            Connect Wallet
                        </button>
                    </div>

                    <div id="view-active" class="hidden">
                        <div class="flex flex-col md:flex-row justify-between items-end border-b border-white/10 pb-8 mb-8">
                            <div>
                                <p class="text-xs text-gray-500 uppercase tracking-widest mb-2">Available Balance</p>
                                <div class="flex items-baseline gap-3">
                                    <span id="balanceVal" class="text-7xl font-bold text-white font-mono tracking-tighter counter">0.00</span>
                                    <span class="text-xl font-bold text-green-500 bg-green-500/10 px-3 py-1 rounded-lg">KRM</span>
                                </div>
                                <p class="text-xs text-gray-400 mt-2">
                                    <i class="fa-solid fa-circle-info mr-1"></i> 
                                    <span id="balanceInfo">Real-time balance from your wallet</span>
                                </p>
                            </div>
                            <div class="mt-6 md:mt-0 text-right">
                                <div class="flex items-center justify-end gap-2 text-green-400 mb-1">
                                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                                    <span class="text-xs font-bold uppercase">Connected</span>
                                </div>
                                <p class="text-sm text-gray-400 font-mono bg-white/5 px-3 py-1 rounded" id="walletAddrDisp">0x0000...0000</p>
                                <button onclick="App.wallet.refreshBalance()" class="mt-2 text-xs text-gray-500 hover:text-green-400 transition-colors smooth-transition">
                                    <i class="fa-solid fa-rotate mr-1"></i> Refresh Balance
                                </button>
                                <button onclick="App.faucet.claimTokens()" class="mt-2 ml-4 text-xs text-blue-500 hover:text-blue-400 transition-colors smooth-transition">
                                    <i class="fa-solid fa-faucet mr-1"></i> Get Test Tokens
                                </button>
                            </div>
                        </div>

                        <h3 class="text-xl font-bold text-white mb-6">Incentivized Tasks</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            
                            <!-- Task 1: Social Follow (Twitter + Telegram) -->
                            <div class="glass-card p-8 rounded-2xl border border-white/10 relative overflow-hidden group hover-lift">
                                <div class="absolute top-0 right-0 bg-blue-500/20 text-blue-400 text-[10px] font-bold px-3 py-1 rounded-bl-xl uppercase">Step 1</div>
                                <div class="w-12 h-12 bg-white/5 rounded-xl flex items-center justify-center mb-6 text-2xl text-white group-hover:text-blue-400 transition-colors smooth-transition">
                                    <i class="fa-solid fa-users"></i>
                                </div>
                                <h4 class="text-xl font-bold text-white mb-2">Social Follow</h4>
                                <p class="text-sm text-gray-400 mb-6">Follow our X account and join Telegram channel.</p>
                                <div class="space-y-3">
                                    <button onclick="App.tasks.openTwitter()" class="w-full py-3 bg-blue-500 hover:bg-blue-600 text-center rounded-lg text-xs font-bold text-white transition-colors smooth-transition hover-lift flex items-center justify-center gap-2">
                                        <span class="x-logo font-bold">ùïè</span> FOLLOW ON X
                                    </button>
                                    <button onclick="App.tasks.openTelegram()" class="w-full py-3 bg-teal-500 hover:bg-teal-600 text-center rounded-lg text-xs font-bold text-white transition-colors smooth-transition hover-lift flex items-center justify-center gap-2">
                                        <i class="fab fa-telegram"></i> JOIN TELEGRAM
                                    </button>
                                    <button onclick="App.tasks.completeSocialTask()" id="verify-social" class="w-full py-3 border border-white/20 text-gray-500 rounded-lg text-xs font-bold cursor-not-allowed" disabled>
                                        VERIFY BOTH
                                    </button>
                                </div>
                            </div>

                            <!-- Task 2: Make Transaction -->
                            <div id="card-task-2" class="glass-card p-8 rounded-2xl border border-white/10 task-locked relative overflow-hidden group hover-lift">
                                <div class="absolute top-0 right-0 bg-purple-500/20 text-purple-400 text-[10px] font-bold px-3 py-1 rounded-bl-xl uppercase">Step 2</div>
                                <div class="w-12 h-12 bg-white/5 rounded-xl flex items-center justify-center mb-6 text-2xl text-white group-hover:text-purple-400 transition-colors smooth-transition">
                                    <i class="fa-solid fa-right-left"></i>
                                </div>
                                <h4 class="text-xl font-bold text-white mb-2">Make Transaction</h4>
                                <p class="text-sm text-gray-400 mb-6">Send any transaction on KarChain network.</p>
                                <div class="space-y-3">
                                    <button onclick="App.tasks.makeTestTransaction()" class="w-full py-3 bg-purple-600 hover:bg-purple-500 text-white text-center rounded-lg text-xs font-bold transition-colors smooth-transition hover-lift">
                                        MAKE TEST TX
                                    </button>
                                    <button onclick="App.tasks.checkTransaction()" id="verify-transaction" class="w-full py-3 border border-white/20 text-gray-500 rounded-lg text-xs font-bold cursor-not-allowed" disabled>
                                        CHECK STATUS
                                    </button>
                                </div>
                            </div>

                            <!-- Task 3: Google Form -->
                            <div id="card-task-3" class="glass-card p-8 rounded-2xl border border-white/10 task-locked relative overflow-hidden group hover-lift">
                                <div class="absolute top-0 right-0 bg-orange-500/20 text-orange-400 text-[10px] font-bold px-3 py-1 rounded-bl-xl uppercase">Final</div>
                                <div class="w-12 h-12 bg-white/5 rounded-xl flex items-center justify-center mb-6 text-2xl text-white group-hover:text-orange-400 transition-colors smooth-transition">
                                    <i class="fa-solid fa-file-signature"></i>
                                </div>
                                <h4 class="text-xl font-bold text-white mb-2">Submit Form</h4>
                                <p class="text-sm text-gray-400 mb-6">Complete the final registration form.</p>
                                <button onclick="App.tasks.openGoogleForm()" id="btn-form" class="block w-full py-3 bg-orange-600 hover:bg-orange-500 text-white text-center rounded-lg text-xs font-bold transition-colors smooth-transition hover-lift pointer-events-none opacity-50">
                                    OPEN FORM
                                </button>
                            </div>
                        </div>
                        
                        <div class="mt-8 pt-6 border-t border-white/10 flex justify-between items-center">
                            <p class="text-xs text-gray-500">Progress: <span id="progress-text" class="text-white font-bold">0/3 Tasks</span></p>
                            <div class="w-32 h-2 bg-white/10 rounded-full overflow-hidden">
                                <div id="progress-bar" class="h-full bg-gradient-to-r from-green-500 to-emerald-500 w-0 transition-all duration-700 ease-out"></div>
                            </div>
                        </div>

                        <!-- Transaction History -->
                        <div id="transaction-history" class="mt-12 pt-8 border-t border-white/10 hidden">
                            <h4 class="text-lg font-bold text-white mb-4">Your Transactions</h4>
                            <div id="transactions-list" class="space-y-2">
                                <!-- Transactions will be added here -->
                            </div>
                            <p id="no-transactions" class="text-center text-gray-500 text-sm py-4">No transactions yet. Make your first transaction!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Vision Page -->
    <div id="page-vision" class="page-content pt-32 pb-20 px-4 max-w-7xl mx-auto">
        <div class="text-center mb-24 fade-in-up">
            <h2 class="text-5xl md:text-7xl font-bold text-white mb-6">THE <span class="gradient-text">MANIFESTO</span></h2>
            <p class="text-xl text-gray-400 font-light max-w-3xl mx-auto fade-in-up delay-100">Re-engineering the fundamental substrate of human coordination for the 22nd century.</p>
        </div>

        <div class="grid lg:grid-cols-2 gap-20 items-center mb-32">
            <div class="space-y-12 fade-in-left">
                <div class="border-l-4 border-green-500 pl-8 smooth-transition hover-lift">
                    <h3 class="text-3xl text-white font-bold mb-4 font-mono">01 // Asynchronous Finality</h3>
                    <div class="vision-text">
                        <p>KarChain introduces a paradigm shift with <strong>Hyper-Graph Sharding</strong>. Unlike linear blockchains, our state is partitioned into thousands of concurrent execution threads.</p>
                        <p>Using <strong>Proof-of-Synchrony</strong>, we achieve mathematical finality in sub-second timeframes, eliminating the need for probabilistic confirmations found in Nakamoto Consensus.</p>
                        <a href="https://docs.karchain.network/technical/consensus" target="_blank" class="inline-block mt-4 text-green-400 hover:text-green-300 text-sm font-bold transition-colors smooth-transition">
                            <i class="fa-solid fa-book mr-1"></i> Read Technical Documentation ‚Üí
                        </a>
                    </div>
                </div>
                <div class="border-l-4 border-white/10 pl-8 smooth-transition hover-lift fade-in-left delay-200">
                    <h3 class="text-3xl text-green-400 font-bold mb-4 font-mono">02 // Post-Quantum Security</h3>
                    <div class="vision-text">
                        <p>The era of elliptic curve cryptography is ending. KarChain is built as a <strong>Quantum Fortress</strong>, utilizing Lattice-based signatures (Kyber/Dilithium) to secure assets against future quantum decryption threats.</p>
                        <a href="https://docs.karchain.network/security/quantum-resistance" target="_blank" class="inline-block mt-4 text-green-400 hover:text-green-300 text-sm font-bold transition-colors smooth-transition">
                            <i class="fa-solid fa-shield-halved mr-1"></i> Security Whitepaper ‚Üí
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-center relative h-[500px] items-center fade-in-right">
                <div class="absolute inset-0 bg-green-500/10 blur-[100px] rounded-full animate-glow"></div>
                <div class="gyro-wrapper">
                    <div class="gyro">
                        <div class="gyro-ring gr-1"></div>
                        <div class="gyro-ring gr-2"></div>
                        <div class="gyro-ring gr-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="glass-panel p-12 rounded-3xl border-t border-white/10 fade-in-up delay-300">
            <h3 class="text-3xl text-white font-bold mb-12 text-center font-display">Strategic Roadmap</h3>
            <div class="grid md:grid-cols-4 gap-8 relative">
                
                <div class="relative fade-in-up delay-400">
                    <div class="w-6 h-6 bg-green-500 rounded-full border-4 border-black mb-4 mx-auto relative z-10 animate-pulse"></div>
                    <h4 class="text-green-400 font-bold text-center mb-2">PHASE 1</h4>
                    <p class="text-white font-bold text-center text-lg mb-2">Genesis</p>
                    <p class="text-gray-500 text-center text-xs">Testnet launch, Faucet activation, Initial Validator onboarding.</p>
                    <a href="https://docs.karchain.network/roadmap/phase-1" target="_blank" class="block mt-2 text-[10px] text-green-500 hover:text-green-400 font-bold uppercase smooth-transition">DETAILS</a>
                </div>
                <div class="relative opacity-70 fade-in-up delay-500">
                    <div class="w-6 h-6 bg-gray-700 rounded-full border-4 border-black mb-4 mx-auto relative z-10"></div>
                    <h4 class="text-gray-400 font-bold text-center mb-2">PHASE 2</h4>
                    <p class="text-white font-bold text-center text-lg mb-2">Incentivized</p>
                    <p class="text-gray-500 text-center text-xs">Public stress testing, Bug bounties, Cross-chain bridge beta.</p>
                    <a href="https://docs.karchain.network/roadmap/phase-2" target="_blank" class="block mt-2 text-[10px] text-green-500 hover:text-green-400 font-bold uppercase smooth-transition">DETAILS</a>
                </div>
                <div class="relative opacity-50 fade-in-up delay-600">
                    <div class="w-6 h-6 bg-gray-700 rounded-full border-4 border-black mb-4 mx-auto relative z-10"></div>
                    <h4 class="text-gray-400 font-bold text-center mb-2">PHASE 3</h4>
                    <p class="text-white font-bold text-center text-lg mb-2">Ignition</p>
                    <p class="text-gray-500 text-center text-xs">Mainnet launch, TGE, Governance DAO activation.</p>
                    <a href="https://docs.karchain.network/roadmap/phase-3" target="_blank" class="block mt-2 text-[10px] text-green-500 hover:text-green-400 font-bold uppercase smooth-transition">DETAILS</a>
                </div>
                <div class="relative opacity-30 fade-in-up delay-700">
                    <div class="w-6 h-6 bg-gray-700 rounded-full border-4 border-black mb-4 mx-auto relative z-10"></div>
                    <h4 class="text-gray-400 font-bold text-center mb-2">PHASE 4</h4>
                    <p class="text-white font-bold text-center text-lg mb-2">Singularity</p>
                    <p class="text-gray-500 text-center text-xs">Global settlement layer, Interplanetary file system integration.</p>
                    <a href="https://docs.karchain.network/roadmap/phase-4" target="_blank" class="block mt-2 text-[10px] text-green-500 hover:text-green-400 font-bold uppercase smooth-transition">DETAILS</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Ecosystem Page -->
    <div id="page-ecosystem" class="page-content pt-32 pb-20 px-4 max-w-7xl mx-auto">
        <div class="text-center mb-16 fade-in-up">
            <h2 class="text-5xl font-bold text-white mb-6">ECOSYSTEM</h2>
            <p class="text-gray-400 fade-in-up delay-100">Building the next generation of decentralized applications on KarChain.</p>
        </div>
        
        <div class="grid md:grid-cols-3 gap-8">
            <div class="glass-card p-8 rounded-xl group cursor-pointer fade-in-up delay-200 hover-lift">
                <div class="w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center mb-6 text-2xl text-purple-400 group-hover:scale-110 transition-transform smooth-transition">
                    <i class="fa-solid fa-right-left"></i>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">KarSwap DEX</h3>
                <p class="text-sm text-gray-400 mb-4">The native AMM with concentrated liquidity and zero slippage for high-frequency trading.</p>
                <a href="https://swap.karchain.network" target="_blank" class="text-[10px] bg-green-900 text-green-400 px-2 py-1 rounded uppercase hover:bg-green-800 transition-colors inline-block smooth-transition">Live on Testnet ‚Üó</a>
            </div>
            
            <div class="glass-card p-8 rounded-xl group cursor-pointer fade-in-up delay-300 hover-lift">
                <div class="w-12 h-12 bg-red-500/20 rounded-lg flex items-center justify-center mb-6 text-2xl text-red-400 group-hover:scale-110 transition-transform smooth-transition">
                    <i class="fa-solid fa-bolt"></i>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">KarVault Lending</h3>
                <p class="text-sm text-gray-400 mb-4">Cross-chain lending protocol with undercollateralized loans powered by reputation scores.</p>
                <a href="https://docs.karchain.network/ecosystem/karvault" target="_blank" class="text-[10px] bg-gray-800 text-gray-400 px-2 py-1 rounded uppercase hover:bg-gray-700 transition-colors inline-block smooth-transition">Coming Soon ‚Üó</a>
            </div>

            <div class="glass-card p-8 rounded-xl group cursor-pointer fade-in-up delay-400 hover-lift">
                <div class="w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center mb-6 text-2xl text-yellow-400 group-hover:scale-110 transition-transform smooth-transition">
                    <i class="fa-solid fa-vault text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">KarSafe</h3>
                <p class="text-sm text-gray-400 mb-4">Multi-sig institutional wallet with MPC technology for DAO treasury management.</p>
                <a href="https://docs.karchain.network/ecosystem/karsafe" target="_blank" class="text-[10px] bg-gray-800 text-gray-400 px-2 py-1 rounded uppercase hover:bg-gray-700 transition-colors inline-block smooth-transition">Coming Soon ‚Üó</a>
            </div>

            <div class="glass-card p-8 rounded-xl group cursor-pointer fade-in-up delay-200 hover-lift">
                <div class="w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center mb-6 text-2xl text-blue-400 group-hover:scale-110 transition-transform smooth-transition">
                    <i class="fa-solid fa-bridge"></i>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">KarBridge</h3>
                <p class="text-sm text-gray-400 mb-4">Universal cross-chain bridge with ZK-proofs for secure asset transfers between networks.</p>
                <a href="https://bridge.karchain.network" target="_blank" class="text-[10px] bg-gray-800 text-gray-400 px-2 py-1 rounded uppercase hover:bg-gray-700 transition-colors inline-block smooth-transition">In Development ‚Üó</a>
            </div>

            <div class="glass-card p-8 rounded-xl group cursor-pointer fade-in-up delay-300 hover-lift">
                <div class="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center mb-6 text-2xl text-green-400 group-hover:scale-110 transition-transform smooth-transition">
                    <i class="fa-solid fa-chart-line"></i>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">KarOracle</h3>
                <p class="text-sm text-gray-400 mb-4">Decentralized oracle network providing tamper-proof data feeds for DeFi applications.</p>
                <a href="https://docs.karchain.network/ecosystem/karoracle" target="_blank" class="text-[10px] bg-gray-800 text-gray-400 px-2 py-1 rounded uppercase hover:bg-gray-700 transition-colors inline-block smooth-transition">Planned Q2 2025 ‚Üó</a>
            </div>

            <div class="glass-card p-8 rounded-xl group cursor-pointer fade-in-up delay-400 hover-lift">
                <div class="w-12 h-12 bg-indigo-500/20 rounded-lg flex items-center justify-center mb-6 text-2xl text-indigo-400 group-hover:scale-110 transition-transform smooth-transition">
                    <i class="fa-solid fa-cube"></i>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">KarLaunch</h3>
                <p class="text-sm text-gray-400 mb-4">Fair launch platform for new projects with anti-snipe protection and vesting schedules.</p>
                <a href="https://launch.karchain.network" target="_blank" class="text-[10px] bg-gray-800 text-gray-400 px-2 py-1 rounded uppercase hover:bg-gray-700 transition-colors inline-block smooth-transition">Coming Soon ‚Üó</a>
            </div>
        </div>

        <div class="mt-24 fade-in-up delay-500">
            <h3 class="text-2xl font-bold text-white mb-8 text-center">Strategic Partners</h3>
            <div class="glass-panel p-8 rounded-2xl">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-8 items-center justify-center">
                    <div class="text-center fade-in-up delay-600">
                        <div class="w-16 h-16 mx-auto bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mb-4 smooth-transition hover-lift">
                            <i class="fa-solid fa-server text-white text-2xl"></i>
                        </div>
                        <p class="text-sm font-bold text-white">Infrastructure</p>
                        <p class="text-xs text-gray-500">Node providers & RPC services</p>
                    </div>
                    <div class="text-center fade-in-up delay-700">
                        <div class="w-16 h-16 mx-auto bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center mb-4 smooth-transition hover-lift">
                            <i class="fa-solid fa-file-shield text-2xl"></i>
                        </div>
                        <p class="text-sm font-bold text-white">Security Audits</p>
                        <p class="text-xs text-gray-500">Smart contract verification</p>
                    </div>
                    <div class="text-center fade-in-up delay-800">
                        <div class="w-16 h-16 mx-auto bg-gradient-to-br from-orange-500 to-red-600 rounded-full flex items-center justify-center mb-4 smooth-transition hover-lift">
                            <i class="fa-solid fa-users text-white text-2xl"></i>
                        </div>
                        <p class="text-sm font-bold text-white">Community</p>
                        <p class="text-xs text-gray-500">Developer communities</p>
                    </div>
                    <div class="text-center fade-in-up delay-900">
                        <div class="w-16 h-16 mx-auto bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center mb-4 smooth-transition hover-lift">
                            <i class="fa-solid fa-code text-white text-2xl"></i>
                        </div>
                        <p class="text-sm font-bold text-white">Tooling</p>
                        <p class="text-xs text-gray-500">SDKs & Developer tools</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Support Page -->
    <div id="page-support" class="page-content pt-32 pb-20 px-4 max-w-5xl mx-auto">
        <div class="text-center mb-20 fade-in-up">
            <h2 class="text-5xl font-bold text-white mb-6">COMMUNITY HUB</h2>
            <p class="text-gray-400 text-lg fade-in-up delay-100">Get support, report bugs, and connect with developers.</p>
        </div>

        <div class="grid md:grid-cols-2 gap-8 mb-16">
            <a href="https://t.me/tgkarim1" target="_blank" class="glass-panel p-8 rounded-3xl block group border-t border-blue-500/20 hover:bg-blue-900/10 transition-all duration-300 smooth-transition hover-lift fade-in-left">
                <div class="flex items-center gap-6 mb-4">
                    <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-3xl text-white shadow-[0_0_20px_#3b82f6] group-hover:scale-110 transition-transform smooth-transition">
                        <i class="fa-brands fa-telegram"></i>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-white mb-1">Telegram Community</h3>
                        <p class="text-gray-400">Join 50,000+ members. Direct access to core team.</p>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-blue-400 text-sm font-bold">@KarChainOfficial</span>
                    <span class="px-4 py-2 bg-white/10 rounded-full text-white font-bold text-xs group-hover:bg-white/20 transition-colors smooth-transition">JOIN NOW</span>
                </div>
            </a>

            <a href="mailto:support@karchain.io" class="glass-panel p-8 rounded-3xl block group border-t border-green-500/20 hover:bg-green-900/10 transition-all duration-300 smooth-transition hover-lift fade-in-right">
                <div class="flex items-center gap-6 mb-4">
                    <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center text-3xl text-white shadow-[0_0_20px_#22c55e] group-hover:scale-110 transition-transform smooth-transition">
                        <i class="fa-solid fa-envelope"></i>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-white mb-1">Email Support</h3>
                        <p class="text-gray-400">Direct technical support from our team. 24-48h response time.</p>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-green-400 text-sm font-bold">support@karchain.io</span>
                    <span class="px-4 py-2 bg-white/10 rounded-full text-white font-bold text-xs group-hover:bg-white/20 transition-colors smooth-transition">SEND EMAIL</span>
                </div>
            </a>
        </div>

        <div class="space-y-4 fade-in-up delay-300">
            <h3 class="text-2xl font-bold text-white mb-6 pl-4 border-l-4 border-green-500">Frequently Asked Questions</h3>
            
            <div class="glass-panel rounded-xl overflow-hidden hover-lift">
                <button class="w-full p-6 text-left flex justify-between items-center text-white font-bold hover:bg-white/5 transition-colors smooth-transition faq-toggle">
                    How to add KarChain to MetaMask?
                    <i class="fa-solid fa-chevron-down transition-transform duration-300 smooth-transition"></i>
                </button>
                <div class="faq-content border-t border-white/5">
                    <div class="px-6 pb-6 text-gray-400 text-sm leading-relaxed">
                        The easiest way is to click "Connect Wallet" on our dashboard. The site will automatically prompt you to add the network (Chain ID: 1337). Alternatively, you can add it manually: 
                        <br><br>
                        <strong>Network Name:</strong> KarChain Testnet<br>
                        <strong>RPC URL:</strong> https://relationless-improperly-nettie.ngrok-free.dev<br>
                        <strong>Chain ID:</strong> 1337<br>
                        <strong>Currency Symbol:</strong> KRM<br>
                        <strong>Block Explorer:</strong> https://relationless-improperly-nettie.ngrok-free.dev
                        <br><br>
                        <a href="https://docs.karchain.network/getting-started/metamask-setup" target="_blank" class="text-green-400 hover:text-green-300 inline-flex items-center gap-1 smooth-transition">
                            <i class="fa-solid fa-book"></i> Detailed Setup Guide ‚Üí
                        </a>
                    </div>
                </div>
            </div>

            <div class="glass-panel rounded-xl overflow-hidden hover-lift">
                <button class="w-full p-6 text-left flex justify-between items-center text-white font-bold hover:bg-white/5 transition-colors smooth-transition faq-toggle">
                    How to get Testnet Tokens (KRM)?
                    <i class="fa-solid fa-chevron-down transition-transform duration-300 smooth-transition"></i>
                </button>
                <div class="faq-content border-t border-white/5">
                    <div class="px-6 pb-6 text-gray-400 text-sm leading-relaxed">
                        Once you connect your wallet and complete the "Social Identity" task on the dashboard, our automated faucet will drop initial KRM tokens to your address for gas fees. You can also request tokens manually:
                        <br><br>
                        1. Connect your wallet<br>
                        2. Click "Get Test Tokens" button in your wallet dropdown<br>
                        3. Wait 1-2 minutes for confirmation
                        <br><br>
                        <strong>Note:</strong> Faucet has a 24-hour cooldown period per address.
                    </div>
                </div>
            </div>

            <div class="glass-panel rounded-xl overflow-hidden hover-lift">
                <button class="w-full p-6 text-left flex justify-between items-center text-white font-bold hover:bg-white/5 transition-colors smooth-transition faq-toggle">
                    What are the node requirements?
                    <i class="fa-solid fa-chevron-down transition-transform duration-300 smooth-transition"></i>
                </button>
                <div class="faq-content border-t border-white/5">
                    <div class="px-6 pb-6 text-gray-400 text-sm leading-relaxed">
                        Due to our lightweight Besu client, you can run a node on minimal hardware:
                        <br><br>
                        <strong>Minimum Requirements:</strong><br>
                        ‚Ä¢ 2 CPU Cores<br>
                        ‚Ä¢ 4GB RAM<br>
                        ‚Ä¢ 100GB SSD storage<br>
                        ‚Ä¢ 10 MBit/s bandwidth
                        <br><br>
                        <strong>Recommended for Validators:</strong><br>
                        ‚Ä¢ 4 CPU Cores<br>
                        ‚Ä¢ 8GB RAM<br>
                        ‚Ä¢ 200GB SSD storage<br>
                        ‚Ä¢ 50 MBit/s bandwidth
                        <br><br>
                        <a href="https://docs.karchain.network/node/requirements" target="_blank" class="text-green-400 hover:text-green-300 inline-flex items-center gap-1 smooth-transition">
                            <i class="fa-solid fa-server"></i> Node Setup Guide ‚Üí
                        </a>
                    </div>
                </div>
            </div>

            <div class="glass-panel rounded-xl overflow-hidden hover-lift">
                <button class="w-full p-6 text-left flex justify-between items-center text-white font-bold hover:bg-white/5 transition-colors smooth-transition faq-toggle">
                    How to participate in the Incentivized Testnet?
                    <i class="fa-solid fa-chevron-down transition-transform duration-300 smooth-transition"></i>
                </button>
                <div class="faq-content border-t border-white/5">
                    <div class="px-6 pb-6 text-gray-400 text-sm leading-relaxed">
                        To participate in the Incentivized Testnet and earn KRM tokens:
                        <br><br>
                        1. Connect your wallet on the Testnet dashboard<br>
                        2. Complete Task 1: Follow our X account<br>
                        3. Complete Task 2: Generate trading volume on KarSwap<br>
                        4. Complete Task 3: Submit wallet to Genesis Registry<br>
                        5. Wait for Phase 2 rewards distribution
                        <br><br>
                        Rewards are based on activity level and will be distributed after the testnet concludes.
                        <a href="https://docs.karchain.network/testnet/rewards" target="_blank" class="text-green-400 hover:text-green-300 inline-flex items-center gap-1 smooth-transition">
                            <i class="fa-solid fa-coins"></i> Rewards Structure ‚Üí
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="border-t border-white/5 bg-black py-16 mt-20">
        <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-12 fade-in-up">
            <div class="col-span-1 md:col-span-2">
                <span class="text-2xl font-bold tracking-[0.2em] text-white font-display">KARCHAIN</span>
                <p class="text-gray-500 text-sm mt-4 max-w-xs">The sovereign consensus layer for the decentralized future. Built for speed, security, and sustainability.</p>
                <div class="mt-6">
                    <p class="text-sm text-gray-400 mb-2">Email Support:</p>
                    <a href="mailto:support@karchain.io" class="text-green-400 hover:text-green-300 font-bold smooth-transition">support@karchain.io</a>
                </div>
            </div>
            <div class="fade-in-up delay-100">
                <h4 class="text-white font-bold mb-6 uppercase tracking-widest text-xs">Ecosystem</h4>
                <ul class="space-y-3 text-sm">
                    <li><a href="https://relationless-improperly-nettie.ngrok-free.dev" target="_blank" class="footer-link smooth-transition">Block Explorer</a></li>
                    <li><a href="https://relationless-improperly-nettie.ngrok-free.dev" target="_blank" class="footer-link smooth-transition">Governance</a></li>
                    <li><a href="https://relationless-improperly-nettie.ngrok-free.dev" target="_blank" class="footer-link smooth-transition">Bridge</a></li>
                    <li><a href="#" onclick="App.faucet.claimTokens()" class="footer-link smooth-transition">Faucet</a></li>
                </ul>
            </div>
            <div class="fade-in-up delay-200">
                <h4 class="text-white font-bold mb-6 uppercase tracking-widest text-xs">Developers</h4>
                <ul class="space-y-3 text-sm">
                    <li><a href="https://docs.karchain.network" target="_blank" class="footer-link smooth-transition">Documentation</a></li>
                    <li><a href="https://github.com/KarChain" target="_blank" class="footer-link smooth-transition">Github</a></li>
                    <li><a href="https://docs.karchain.network/security/audits" target="_blank" class="footer-link smooth-transition">Audits</a></li>
                    <li><a href="https://immunefi.com/bounty/karchain" target="_blank" class="footer-link smooth-transition">Bug Bounty</a></li>
                </ul>
            </div>
        </div>
        <div class="max-w-7xl mx-auto px-6 mt-16 pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center fade-in-up delay-300">
            <p class="text-[10px] text-gray-700 font-mono uppercase tracking-widest">¬© 2025 KarChain Foundation. All rights reserved.</p>
            <div class="flex gap-4 mt-4 md:mt-0">
                <a href="https://x.com/karim7652117665" target="_blank" class="text-gray-600 hover:text-white transition-colors smooth-transition">
                    <span class="x-logo font-bold">ùïè</span>
                </a>
                <a href="https://discord.gg/karchain" target="_blank" class="text-gray-600 hover:text-white transition-colors smooth-transition"><i class="fa-brands fa-discord"></i></a>
                <a href="https://github.com/KarChain" target="_blank" class="text-gray-600 hover:text-white transition-colors smooth-transition"><i class="fa-brands fa-github"></i></a>
                <a href="https://t.me/tgkarim1" target="_blank" class="text-gray-600 hover:text-white transition-colors smooth-transition"><i class="fa-brands fa-telegram"></i></a>
            </div>
        </div>
    </footer>

    <script>
        const Config = {
            chain: {
                id: 1337,
                hex: '0x539',
                name: 'KarChain Testnet',
                rpc: 'https://relationless-improperly-nettie.ngrok-free.dev',
                symbol: 'KRM',
                decimals: 18,
                explorer: 'https://relationless-improperly-nettie.ngrok-free.dev'
            },
            walletConnect: {
                projectId: 'e6d3c5f8b2a4d7c9e1f0a3b5c7d9e2f4',
                rpc: {
                    1337: 'https://relationless-improperly-nettie.ngrok-free.dev'
                }
            },
            tokenAddress: null,
            faucetAddress: null,
            tasks: {
                twitterUrl: 'https://x.com/karim7652117665',
                telegramUrl: 'https://t.me/tgkarim1',
                googleFormUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSeQhBQZ_XKxYp2G5bZ5RwTzR2QmPpLJ6xN3oYjH7sKvP8t0w/viewform'
            }
        };

        const STORAGE_KEYS = {
            WALLET_CONNECTED: 'karchain_wallet_connected',
            WALLET_ADDRESS: 'karchain_wallet_address',
            LAST_CONNECTED: 'karchain_last_connected',
            WALLET_BALANCE: 'karchain_wallet_balance',
            WALLET_TYPE: 'karchain_wallet_type',
            TASKS_COMPLETED: 'karchain_tasks_completed',
            TRANSACTIONS: 'karchain_transactions',
            SOCIAL_TASK_STARTED: 'karchain_social_started',
            TOKEN_BALANCE_HISTORY: 'karchain_token_balance_history',
            LAST_FAUCET_CLAIM: 'karchain_last_faucet_claim'
        };

        const UI = {
            init: () => {
                UI.initParticles();
                UI.initWaterDrops();
                UI.initFAQ();
                UI.checkSavedConnection();
                UI.setupWalletButton();
                UI.showPage('home');
                UI.setupDropdownToggle();
                UI.setupTaskButtons();
                UI.setupMobileMenu();
                UI.initAnimations();
                UI.initSmoothScroll();
                UI.checkMetaMaskOnLoad();
                
                // Load completed tasks
                UI.loadTaskProgress();
            },

            loadTaskProgress: () => {
                const completedTasks = JSON.parse(localStorage.getItem(STORAGE_KEYS.TASKS_COMPLETED) || '[]');
                UI.updateTaskProgress(completedTasks.length);
                
                if (completedTasks.includes(1)) {
                    UI.unlockTask(2);
                }
                if (completedTasks.includes(2)) {
                    UI.unlockTask(3);
                }
                
                const socialStarted = localStorage.getItem(STORAGE_KEYS.SOCIAL_TASK_STARTED) === 'true';
                if (socialStarted && !completedTasks.includes(1)) {
                    const verifyBtn = document.getElementById('verify-social');
                    if (verifyBtn) {
                        verifyBtn.disabled = false;
                        verifyBtn.classList.remove('cursor-not-allowed', 'border-white/20', 'text-gray-500');
                        verifyBtn.classList.add('bg-green-600', 'text-white', 'hover:bg-green-500', 'border-transparent');
                        verifyBtn.innerHTML = 'VERIFY BOTH';
                    }
                }
            },

            unlockTask: (taskNumber) => {
                if (taskNumber === 2) {
                    const taskCard = document.getElementById('card-task-2');
                    const verifyBtn = document.getElementById('verify-transaction');
                    if (taskCard) {
                        taskCard.classList.remove('task-locked');
                        gsap.fromTo(taskCard,
                            { scale: 0.95, opacity: 0.6 },
                            { scale: 1, opacity: 1, duration: 0.5, ease: "power2.out" }
                        );
                    }
                    if (verifyBtn) {
                        verifyBtn.disabled = false;
                        verifyBtn.classList.remove('cursor-not-allowed', 'border-white/20', 'text-gray-500');
                        verifyBtn.classList.add('bg-purple-600', 'text-white', 'hover:bg-purple-500', 'border-transparent');
                        verifyBtn.innerHTML = 'CHECK STATUS';
                    }
                }
                if (taskNumber === 3) {
                    const taskCard = document.getElementById('card-task-3');
                    const formBtn = document.getElementById('btn-form');
                    if (taskCard) {
                        taskCard.classList.remove('task-locked');
                        gsap.fromTo(taskCard,
                            { scale: 0.95, opacity: 0.6 },
                            { scale: 1, opacity: 1, duration: 0.5, ease: "power2.out", delay: 0.1 }
                        );
                    }
                    if (formBtn) {
                        formBtn.classList.remove('pointer-events-none', 'opacity-50');
                    }
                }
            },

            initSmoothScroll: () => {
                // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Å–∫—Ä–æ–ª—É
                const scrollToTopBtn = document.createElement('button');
                scrollToTopBtn.innerHTML = '<i class="fa-solid fa-chevron-up"></i>';
                scrollToTopBtn.className = 'fixed bottom-8 right-8 w-12 h-12 bg-green-500 hover:bg-green-600 rounded-full flex items-center justify-center text-white z-40 transition-all duration-300 opacity-0 translate-y-10';
                scrollToTopBtn.id = 'scrollToTopBtn';
                scrollToTopBtn.style.boxShadow = '0 4px 20px rgba(74, 222, 128, 0.3)';
                document.body.appendChild(scrollToTopBtn);

                scrollToTopBtn.addEventListener('click', () => {
                    gsap.to(window, {
                        duration: 1.2,
                        scrollTo: {
                            y: 0,
                            autoKill: true
                        },
                        ease: "power2.out"
                    });
                });

                // –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–æ—ó –ø–∞–Ω–µ–ª—ñ
                const navbar = document.getElementById('navbar');
                let lastScrollTop = 0;
                let ticking = false;

                const updateNavbar = () => {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    
                    // –ö–Ω–æ–ø–∫–∞ "–≤–≥–æ—Ä—É"
                    const btn = document.getElementById('scrollToTopBtn');
                    if (scrollTop > 300) {
                        btn.classList.remove('opacity-0', 'translate-y-10');
                        btn.classList.add('opacity-100', 'translate-y-0');
                    } else {
                        btn.classList.remove('opacity-100', 'translate-y-0');
                        btn.classList.add('opacity-0', 'translate-y-10');
                    }
                    
                    // –ù–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–∞ –ø–∞–Ω–µ–ª—å
                    if (navbar) {
                        if (scrollTop > lastScrollTop && scrollTop > 100) {
                            gsap.to(navbar, {
                                y: -100,
                                duration: 0.3,
                                ease: "power2.out"
                            });
                        } else {
                            gsap.to(navbar, {
                                y: 0,
                                duration: 0.3,
                                ease: "power2.out"
                            });
                        }
                        lastScrollTop = scrollTop;
                    }
                    
                    ticking = false;
                };

                window.addEventListener('scroll', () => {
                    if (!ticking) {
                        window.requestAnimationFrame(updateNavbar);
                        ticking = true;
                    }
                }, { passive: true });

                // –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤
                if ('ontouchstart' in window) {
                    document.documentElement.style.touchAction = 'manipulation';
                }
            },

            initAnimations: () => {
                gsap.registerPlugin(ScrollTrigger);

                // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ requestAnimationFrame –¥–ª—è –ø–ª–∞–≤–Ω–∏—Ö –∞–Ω—ñ–º–∞—Ü—ñ–π
                const animateElements = () => {
                    gsap.utils.toArray('.fade-in-up, .fade-in-left, .fade-in-right, .fade-in').forEach(el => {
                        ScrollTrigger.create({
                            trigger: el,
                            start: "top 85%",
                            onEnter: () => {
                                gsap.fromTo(el, 
                                    { 
                                        y: 30,
                                        opacity: 0,
                                        rotationX: 5
                                    },
                                    { 
                                        y: 0,
                                        opacity: 1,
                                        rotationX: 0,
                                        duration: 0.8,
                                        ease: "power2.out",
                                        clearProps: "all"
                                    }
                                );
                            },
                            once: true
                        });
                    });

                    const counters = document.querySelectorAll('.counter');
                    counters.forEach(counter => {
                        const target = parseInt(counter.textContent.replace(/,/g, ''));
                        if (!isNaN(target)) {
                            ScrollTrigger.create({
                                trigger: counter,
                                start: "top 85%",
                                onEnter: () => {
                                    gsap.to(counter, {
                                        innerHTML: target,
                                        duration: 2,
                                        snap: { innerHTML: 1 },
                                        ease: "power2.out",
                                        onUpdate: function() {
                                            const value = Math.floor(this.targets()[0].innerHTML);
                                            this.targets()[0].innerHTML = value.toLocaleString();
                                        }
                                    });
                                },
                                once: true
                            });
                        }
                    });

                    const progressBar = document.getElementById('progress-bar');
                    if (progressBar) {
                        gsap.to(progressBar, {
                            width: "0%",
                            duration: 0.5,
                            ease: "power2.out"
                        });
                    }
                };

                // –ó–∞—Ç—Ä–∏–º–∫–∞ –¥–ª—è –∫—Ä–∞—â–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
                setTimeout(animateElements, 100);
            },

            initParticles: () => {
                const cvs = document.getElementById('webgl-canvas');
                const ctx = cvs.getContext('2d');
                let particles = [];
                let animationId = null;
                
                const resize = () => { 
                    cvs.width = window.innerWidth * devicePixelRatio; 
                    cvs.height = window.innerHeight * devicePixelRatio;
                    cvs.style.width = `${window.innerWidth}px`;
                    cvs.style.height = `${window.innerHeight}px`;
                    ctx.scale(devicePixelRatio, devicePixelRatio);
                };
                
                window.addEventListener('resize', () => {
                    cancelAnimationFrame(animationId);
                    resize();
                    initParticles();
                    animate();
                }); 
                
                resize();

                class P {
                    constructor() { this.reset(); }
                    reset() { 
                        this.x = Math.random() * window.innerWidth; 
                        this.y = Math.random() * window.innerHeight; 
                        this.size = Math.random() * 2; 
                        this.speed = Math.random() * 0.5 + 0.1;
                        this.alpha = Math.random() * 0.3 + 0.1;
                        this.color = `rgba(74, 222, 128, ${this.alpha})`;
                    }
                    update() { 
                        this.y -= this.speed; 
                        if(this.y < 0) this.reset(); 
                    }
                    draw() { 
                        ctx.fillStyle = this.color;
                        ctx.beginPath(); 
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); 
                        ctx.fill();
                    }
                }

                const initParticles = () => {
                    particles = [];
                    for(let i=0; i<30; i++) particles.push(new P());
                };

                initParticles();

                const animate = () => {
                    ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
                    particles.forEach(p => { 
                        p.update(); 
                        p.draw(); 
                    });
                    animationId = requestAnimationFrame(animate);
                };
                
                animate();
                
                // –ó—É–ø–∏–Ω—è—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—é –∫–æ–ª–∏ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
                document.addEventListener('visibilitychange', () => {
                    if (document.hidden) {
                        cancelAnimationFrame(animationId);
                    } else {
                        animate();
                    }
                });
            },

            initWaterDrops: () => {
                const container = document.getElementById('water-drops');
                const dropsCount = 20;
                
                for(let i = 0; i < dropsCount; i++) {
                    const drop = document.createElement('div');
                    drop.className = 'water-drop';
                    drop.style.left = `${Math.random() * 100}%`;
                    drop.style.animationDelay = `${Math.random() * 8}s`;
                    drop.style.height = `${20 + Math.random() * 80}px`;
                    drop.style.animationDuration = `${5 + Math.random() * 10}s`;
                    container.appendChild(drop);
                }
            },

            setupMobileMenu: () => {
                const hamburgerBtn = document.getElementById('hamburgerBtn');
                const mobileMenu = document.getElementById('mobileMenu');
                const mobileBackdrop = document.getElementById('mobileBackdrop');
                
                if (hamburgerBtn && mobileMenu && mobileBackdrop) {
                    hamburgerBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        mobileMenu.classList.toggle('active');
                        mobileBackdrop.classList.toggle('active');
                        hamburgerBtn.classList.toggle('active');
                        document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
                    });
                    
                    mobileBackdrop.addEventListener('click', function() {
                        UI.closeMobileMenu();
                    });
                    
                    window.addEventListener('resize', function() {
                        if (window.innerWidth > 1024) {
                            UI.closeMobileMenu();
                        }
                    });
                }
            },
            
            closeMobileMenu: () => {
                const hamburgerBtn = document.getElementById('hamburgerBtn');
                const mobileMenu = document.getElementById('mobileMenu');
                const mobileBackdrop = document.getElementById('mobileBackdrop');
                
                if (mobileMenu) mobileMenu.classList.remove('active');
                if (mobileBackdrop) mobileBackdrop.classList.remove('active');
                if (hamburgerBtn) hamburgerBtn.classList.remove('active');
                document.body.style.overflow = '';
            },

            checkMetaMaskOnLoad: () => {
                const hasMetaMask = typeof window.ethereum !== 'undefined' && window.ethereum.isMetaMask;
                
                if (!hasMetaMask) {
                    setTimeout(() => {
                        const walletOptions = document.getElementById('wallet-options');
                        if (walletOptions) {
                            const installMetaMaskBtn = document.createElement('div');
                            installMetaMaskBtn.className = 'wallet-option group border border-white/10 p-4 rounded-xl bg-white/5 cursor-pointer transition-all flex items-center justify-between hover-lift';
                            installMetaMaskBtn.innerHTML = `
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 bg-white/5 rounded-full flex items-center justify-center group-hover:bg-[#F6851B]/10 transition-colors smooth-transition">
                                        <i class="fa-solid fa-download text-2xl text-gray-400 group-hover:text-[#F6851B]"></i>
                                    </div>
                                    <div>
                                        <div class="wallet-title font-bold text-white text-lg group-hover:text-[#F6851B] transition-colors smooth-transition">Install MetaMask</div>
                                        <div class="text-xs text-gray-500 uppercase font-mono">Browser Extension</div>
                                    </div>
                                </div>
                            `;
                            installMetaMaskBtn.onclick = () => {
                                window.open('https://metamask.io/download/', '_blank');
                                UI.showNotification('Opening MetaMask download page...', 'info');
                            };
                            walletOptions.appendChild(installMetaMaskBtn);
                        }
                    }, 500);
                }
            },

            initFAQ: () => {
                document.querySelectorAll('.faq-toggle').forEach(toggle => {
                    toggle.addEventListener('click', function() {
                        const content = this.nextElementSibling;
                        const icon = this.querySelector('i');
                        
                        content.classList.toggle('open');
                        
                        if(content.classList.contains('open')) {
                            gsap.to(content, {
                                maxHeight: '500px',
                                opacity: 1,
                                paddingTop: '1rem',
                                paddingBottom: '1rem',
                                duration: 0.5,
                                ease: "power2.out"
                            });
                            icon.style.transform = 'rotate(180deg)';
                        } else {
                            gsap.to(content, {
                                maxHeight: 0,
                                opacity: 0,
                                paddingTop: 0,
                                paddingBottom: 0,
                                duration: 0.5,
                                ease: "power2.out"
                            });
                            icon.style.transform = 'rotate(0deg)';
                        }
                    });
                });
            },

            setupWalletButton: () => {
                const connectBtn = document.getElementById('connectBtn');
                connectBtn.onclick = UI.openModal;
            },

            setupDropdownToggle: () => {
                const connectBtn = document.getElementById('connectBtn');
                const dropdown = document.getElementById('userDropdown');
                
                connectBtn.replaceWith(connectBtn.cloneNode(true));
                const newConnectBtn = document.getElementById('connectBtn');
                
                newConnectBtn.addEventListener('click', function(e) {
                    if (App.state.address) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const isVisible = !dropdown.classList.contains('hidden');
                        
                        if (!isVisible) {
                            dropdown.classList.remove('hidden');
                            gsap.fromTo(dropdown, 
                                { opacity: 0, y: -20, scale: 0.95 },
                                { opacity: 1, y: 0, scale: 1, duration: 0.3, ease: "power2.out" }
                            );
                        } else {
                            gsap.to(dropdown, {
                                opacity: 0,
                                y: -20,
                                scale: 0.95,
                                duration: 0.2,
                                ease: "power2.in",
                                onComplete: () => {
                                    dropdown.classList.add('hidden');
                                }
                            });
                        }
                    } else {
                        UI.openModal();
                    }
                });
                
                document.addEventListener('click', function(e) {
                    if (App.state.address && 
                        !dropdown.contains(e.target) && 
                        !newConnectBtn.contains(e.target) && 
                        !dropdown.classList.contains('hidden')) {
                        
                        gsap.to(dropdown, {
                            opacity: 0,
                            y: -20,
                            scale: 0.95,
                            duration: 0.2,
                            ease: "power2.in",
                            onComplete: () => {
                                dropdown.classList.add('hidden');
                            }
                        });
                    }
                });
            },

            setupTaskButtons: () => {
                const verifySocialBtn = document.getElementById('verify-social');
                if (verifySocialBtn) {
                    verifySocialBtn.addEventListener('click', () => {
                        App.tasks.completeSocialTask();
                    });
                }

                const verifyTransactionBtn = document.getElementById('verify-transaction');
                if (verifyTransactionBtn) {
                    verifyTransactionBtn.addEventListener('click', () => {
                        App.tasks.checkTransaction();
                    });
                }

                const formBtn = document.getElementById('btn-form');
                if (formBtn) {
                    formBtn.addEventListener('click', () => {
                        if (!formBtn.classList.contains('pointer-events-none')) {
                            App.tasks.openGoogleForm();
                        }
                    });
                }
            },

            checkSavedConnection: () => {
                const isConnected = localStorage.getItem(STORAGE_KEYS.WALLET_CONNECTED);
                const savedAddress = localStorage.getItem(STORAGE_KEYS.WALLET_ADDRESS);
                
                if (isConnected === 'true' && savedAddress) {
                    App.state.address = savedAddress;
                    App.state.walletType = localStorage.getItem(STORAGE_KEYS.WALLET_TYPE);
                    
                    const balanceHistory = JSON.parse(localStorage.getItem(STORAGE_KEYS.TOKEN_BALANCE_HISTORY) || '{}');
                    const savedBalance = balanceHistory[savedAddress] || localStorage.getItem(STORAGE_KEYS.WALLET_BALANCE) || '0.00';
                    
                    UI.setConnectedState(savedAddress, savedBalance);
                    
                    UI.loadTransactionHistory();
                }
            },

            saveConnection: (address, walletType) => {
                localStorage.setItem(STORAGE_KEYS.WALLET_CONNECTED, 'true');
                localStorage.setItem(STORAGE_KEYS.WALLET_ADDRESS, address);
                localStorage.setItem(STORAGE_KEYS.WALLET_TYPE, walletType);
                localStorage.setItem(STORAGE_KEYS.LAST_CONNECTED, Date.now().toString());
            },

            clearConnection: () => {
                localStorage.removeItem(STORAGE_KEYS.WALLET_CONNECTED);
                localStorage.removeItem(STORAGE_KEYS.WALLET_ADDRESS);
                localStorage.removeItem(STORAGE_KEYS.LAST_CONNECTED);
                localStorage.removeItem(STORAGE_KEYS.WALLET_TYPE);
            },

            showPage: (id) => {
                UI.closeMobileMenu();
                
                const currentPage = document.querySelector('.page-content.active');
                const targetPage = document.getElementById('page-'+id);
                
                if (currentPage && targetPage && currentPage !== targetPage) {
                    gsap.to(currentPage, {
                        opacity: 0,
                        y: -20,
                        duration: 0.3,
                        ease: "power2.in",
                        onComplete: () => {
                            document.querySelectorAll('.page-content').forEach(el => {
                                el.classList.remove('active');
                                el.style.display = 'none';
                            });
                            
                            targetPage.style.display = 'block';
                            gsap.fromTo(targetPage, 
                                { opacity: 0, y: 20 },
                                { 
                                    opacity: 1, 
                                    y: 0, 
                                    duration: 0.5, 
                                    ease: "power2.out",
                                    onComplete: () => {
                                        targetPage.classList.add('active');
                                    }
                                }
                            );
                        }
                    });
                } else {
                    document.querySelectorAll('.page-content').forEach(el => {
                        el.classList.remove('active');
                        el.style.display = 'none';
                    });
                    
                    targetPage.style.display = 'block';
                    targetPage.classList.add('active');
                }

                document.querySelectorAll('.nav-link').forEach(el => {
                    el.classList.remove('active', 'text-white', 'border-green-500');
                    el.classList.add('text-gray-400', 'border-transparent');
                });
                const activeLink = document.getElementById('nav-'+id);
                if(activeLink) {
                    activeLink.classList.add('active', 'text-white', 'border-green-500');
                    activeLink.classList.remove('text-gray-400', 'border-transparent');
                }

                // –ü–ª–∞–≤–Ω–∏–π —Å–∫—Ä–æ–ª –¥–æ –≤–µ—Ä—Ö—É –∑ GSAP
                gsap.to(window, {
                    duration: 1.2,
                    scrollTo: {
                        y: 0,
                        autoKill: true
                    },
                    ease: "power2.out"
                });

                setTimeout(() => {
                    UI.initAnimations();
                }, 100);
            },

            openModal: () => {
                const modal = document.getElementById('connect-modal');
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                
                gsap.fromTo('#modal-content', 
                    { scale: 0.95, opacity: 0 },
                    { scale: 1, opacity: 1, duration: 0.4, ease: "power2.out" }
                );
                
                UI.closeMobileMenu();
                document.body.style.overflow = 'hidden';
            },

            closeModal: () => {
                gsap.to('#modal-content', {
                    scale: 0.95,
                    opacity: 0,
                    duration: 0.3,
                    ease: "power2.in",
                    onComplete: () => {
                        const modal = document.getElementById('connect-modal');
                        modal.classList.add('hidden');
                        modal.classList.remove('flex');
                        document.body.style.overflow = '';
                    }
                });
            },

            setConnectedState: (address, balance) => {
                const btn = document.getElementById('connectBtn');
                const short = `${address.substring(0,6)}...${address.substring(address.length-4)}`;
                btn.innerHTML = `<div class="w-2 h-2 bg-green-500 rounded-full animate-pulse mr-2"></div> ${short}`;
                
                document.getElementById('dropdownAddress').innerText = short;
                document.getElementById('dropdownBalance').innerText = balance ? `${balance} KRM` : '0 KRM';

                const mobileWalletInfo = document.getElementById('mobileWalletInfo');
                const mobileWalletAddress = document.getElementById('mobileWalletAddress');
                if (mobileWalletInfo && mobileWalletAddress) {
                    mobileWalletInfo.classList.remove('hidden');
                    mobileWalletAddress.innerText = short;
                }

                document.getElementById('view-locked').classList.add('hidden');
                document.getElementById('view-active').classList.remove('hidden');
                
                document.getElementById('walletAddrDisp').innerText = address;
                
                const balanceHistory = JSON.parse(localStorage.getItem(STORAGE_KEYS.TOKEN_BALANCE_HISTORY) || '{}');
                const savedBalance = balanceHistory[address] || balance || '0.00';
                document.getElementById('balanceVal').innerText = savedBalance;
                
                const dropdown = document.getElementById('userDropdown');
                dropdown.classList.add('hidden');
                
                setTimeout(() => {
                    UI.setupDropdownToggle();
                }, 100);

                gsap.fromTo('#view-active', 
                    { opacity: 0, y: 20 },
                    { opacity: 1, y: 0, duration: 0.5, ease: "power2.out" }
                );

                UI.loadTransactionHistory();
            },

            updateBalance: (balance) => {
                const formattedBalance = parseFloat(balance).toFixed(4);
                const balanceElement = document.getElementById('balanceVal');
                const dropdownBalance = document.getElementById('dropdownBalance');
                
                gsap.to(balanceElement, {
                    innerHTML: formattedBalance,
                    duration: 0.5,
                    snap: { innerHTML: 0.01 }
                });
                
                dropdownBalance.innerText = `${formattedBalance} KRM`;
                
                if (App.state.address) {
                    const balanceHistory = JSON.parse(localStorage.getItem(STORAGE_KEYS.TOKEN_BALANCE_HISTORY) || '{}');
                    balanceHistory[App.state.address] = formattedBalance;
                    localStorage.setItem(STORAGE_KEYS.TOKEN_BALANCE_HISTORY, JSON.stringify(balanceHistory));
                }
            },

            resetState: () => {
                const btn = document.getElementById('connectBtn');
                btn.innerHTML = '<i class="fa-solid fa-wallet"></i> <span>Connect Wallet</span>';
                
                const mobileWalletInfo = document.getElementById('mobileWalletInfo');
                if (mobileWalletInfo) {
                    mobileWalletInfo.classList.add('hidden');
                }
                
                const dropdown = document.getElementById('userDropdown');
                dropdown.classList.add('hidden');
                
                document.getElementById('view-locked').classList.remove('hidden');
                document.getElementById('view-active').classList.add('hidden');
                document.getElementById('transaction-history').classList.add('hidden');
                
                setTimeout(() => {
                    UI.setupDropdownToggle();
                }, 100);
            },

            showNotification: (message, type = 'info') => {
                document.querySelectorAll('.notification').forEach(n => n.remove());
                
                const notification = document.createElement('div');
                notification.className = `notification fixed top-4 right-4 glass-panel px-6 py-4 rounded-xl z-[1000] ${
                    type === 'success' ? 'border-green-500/30 bg-green-900/20' :
                    type === 'error' ? 'border-red-500/30 bg-red-900/20' :
                    'border-blue-500/30 bg-blue-900/20'
                }`;
                notification.innerHTML = `
                    <div class="flex items-center gap-3">
                        <i class="fas ${
                            type === 'success' ? 'fa-check-circle text-green-400' :
                            type === 'error' ? 'fa-exclamation-circle text-red-400' :
                            'fa-info-circle text-blue-400'
                        }"></i>
                        <span class="text-white">${message}</span>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                gsap.fromTo(notification,
                    { x: 100, opacity: 0 },
                    { x: 0, opacity: 1, duration: 0.4, ease: "power2.out" }
                );
                
                setTimeout(() => {
                    gsap.to(notification, {
                        x: 100,
                        opacity: 0,
                        duration: 0.3,
                        ease: "power2.in",
                        onComplete: () => {
                            if (notification.parentNode) {
                                document.body.removeChild(notification);
                            }
                        }
                    });
                }, 3000);
            },

            updateTaskProgress: (completedTasks) => {
                const progressBar = document.getElementById('progress-bar');
                const progressText = document.getElementById('progress-text');
                
                const percentage = (completedTasks / 3) * 100;
                
                gsap.to(progressBar, {
                    width: `${percentage}%`,
                    duration: 0.7,
                    ease: "power2.out"
                });
                
                progressText.innerText = `${completedTasks}/3 Tasks`;
            },

            loadTransactionHistory: () => {
                const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
                const historySection = document.getElementById('transaction-history');
                const noTransactions = document.getElementById('no-transactions');
                const transactionsList = document.getElementById('transactions-list');
                
                if (transactions.length > 0) {
                    historySection.classList.remove('hidden');
                    noTransactions.style.display = 'none';
                    
                    transactionsList.innerHTML = '';
                    
                    transactions.forEach((tx, index) => {
                        const txElement = document.createElement('div');
                        txElement.className = 'flex justify-between items-center p-3 bg-white/5 rounded-lg';
                        txElement.innerHTML = `
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center">
                                    <i class="fa-solid fa-arrow-right text-green-400 text-xs"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-bold text-white">Transaction ${index + 1}</p>
                                    <p class="text-xs text-gray-500 font-mono">${tx.hash.substring(0, 10)}...${tx.hash.substring(tx.hash.length - 8)}</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-sm font-bold text-white">${tx.value} KRM</p>
                                <p class="text-xs text-gray-500">${new Date(tx.timestamp).toLocaleTimeString()}</p>
                            </div>
                        `;
                        transactionsList.appendChild(txElement);
                    });
                } else {
                    historySection.classList.add('hidden');
                    noTransactions.style.display = 'block';
                }
            },

            addTransaction: (transaction) => {
                const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
                transactions.push({
                    ...transaction,
                    timestamp: new Date().toISOString()
                });
                localStorage.setItem(STORAGE_KEYS.TRANSACTIONS, JSON.stringify(transactions));
                
                UI.loadTransactionHistory();
            }
        };

        const App = {
            ui: UI,
            router: { navigate: UI.showPage },
            state: { 
                address: null, 
                provider: null,
                walletType: null,
                walletConnect: null,
                krmBalance: '0.00',
                isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
            },

            wallet: {
                connect: async (type) => {
                    try {
                        const connectBtn = document.getElementById('connectBtn');
                        connectBtn.classList.add('connecting');
                        connectBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> <span>Connecting...</span>';
                        
                        if (App.state.isMobile) {
                            return App.wallet.connectMobile(type);
                        }
                        
                        let provider;
                        let accounts;
                        
                        switch(type) {
                            case 'MetaMask':
                                if (typeof window.ethereum === 'undefined') {
                                    window.open('https://metamask.io/download/', '_blank');
                                    throw new Error('MetaMask not found. Please install MetaMask extension.');
                                }
                                
                                provider = new ethers.providers.Web3Provider(window.ethereum, 'any');
                                
                                try {
                                    accounts = await provider.send("eth_requestAccounts", []);
                                } catch (requestError) {
                                    if (requestError.code === 4001) {
                                        throw new Error('Please approve the connection request in your wallet.');
                                    }
                                    throw requestError;
                                }
                                break;
                                
                            case 'Trust':
                                if (typeof window.ethereum === 'undefined') {
                                    window.open('https://trustwallet.com/', '_blank');
                                    throw new Error('Trust Wallet not found.');
                                }
                                
                                provider = new ethers.providers.Web3Provider(window.ethereum, 'any');
                                accounts = await provider.send("eth_requestAccounts", []);
                                break;
                                
                            case 'WC':
                                UI.showNotification('WalletConnect requires additional setup. Please use MetaMask or Trust Wallet on desktop.', 'info');
                                throw new Error('Use MetaMask or Trust Wallet on desktop');
                                
                            default:
                                throw new Error('Unknown wallet type');
                        }
                        
                        if (!accounts || accounts.length === 0) {
                            throw new Error('Could not get account from wallet');
                        }
                        
                        await App.wallet.finalizeConnection(accounts[0], provider, type);
                        
                    } catch (e) {
                        console.error('Wallet connection error:', e);
                        
                        let errorMessage = e.message;
                        if (e.code === -32002) {
                            errorMessage = 'MetaMask is already processing a request. Please check your MetaMask.';
                        }
                        
                        UI.showNotification(`Error: ${errorMessage}`, 'error');
                        
                        const connectBtn = document.getElementById('connectBtn');
                        connectBtn.classList.remove('connecting');
                        connectBtn.innerHTML = '<i class="fa-solid fa-wallet"></i> <span>Connect Wallet</span>';
                    }
                },

                connectMobile: async (type) => {
                    const isAndroid = /Android/i.test(navigator.userAgent);
                    const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
                    
                    switch(type) {
                        case 'MetaMask':
                            let metamaskUrl;
                            if (isAndroid) {
                                metamaskUrl = `https://metamask.app.link/dapp/${window.location.hostname}${window.location.pathname}`;
                            } else if (isIOS) {
                                metamaskUrl = `https://metamask.app.link/dapp/${window.location.hostname}${window.location.pathname}`;
                            } else {
                                metamaskUrl = 'https://metamask.app.link/dapp/' + window.location.hostname;
                            }
                            
                            const networkParams = encodeURIComponent(JSON.stringify({
                                chainId: Config.chain.hex,
                                chainName: Config.chain.name,
                                rpcUrls: [Config.chain.rpc],
                                nativeCurrency: {
                                    name: 'KarChain',
                                    symbol: Config.chain.symbol,
                                    decimals: Config.chain.decimals
                                },
                                blockExplorerUrls: [Config.chain.explorer]
                            }));
                            
                            const finalUrl = `${metamaskUrl}?action=addNetwork&params=${networkParams}`;
                            window.location.href = finalUrl;
                            break;
                            
                        case 'Trust':
                            let trustUrl;
                            if (isAndroid) {
                                trustUrl = `https://link.trustwallet.com/wc?uri=${encodeURIComponent(`wc:?action=connect&params=${JSON.stringify({
                                    chainId: Config.chain.id,
                                    rpcUrl: Config.chain.rpc,
                                    chainName: Config.chain.name,
                                    nativeCurrency: {
                                        name: 'KarChain',
                                        symbol: Config.chain.symbol,
                                        decimals: Config.chain.decimals
                                    }
                                })}`)}`;
                            } else if (isIOS) {
                                trustUrl = `https://link.trustwallet.com/wc?uri=${encodeURIComponent(`wc:?action=connect&params=${JSON.stringify({
                                    chainId: Config.chain.id,
                                    rpcUrl: Config.chain.rpc,
                                    chainName: Config.chain.name,
                                    nativeCurrency: {
                                        name: 'KarChain',
                                        symbol: Config.chain.symbol,
                                        decimals: Config.chain.decimals
                                    }
                                })}`)}`;
                            } else {
                                trustUrl = 'https://link.trustwallet.com/open_url?url=' + encodeURIComponent(window.location.href);
                            }
                            
                            window.location.href = trustUrl;
                            break;
                            
                        case 'WC':
                            UI.showNotification('WalletConnect is best used with desktop browsers. On mobile, please use MetaMask or Trust Wallet app directly.', 'info');
                            break;
                    }
                    
                    UI.showNotification('Opening wallet app... Please connect and approve the network addition.', 'info');
                    
                    setTimeout(() => {
                        const connectBtn = document.getElementById('connectBtn');
                        connectBtn.classList.remove('connecting');
                        connectBtn.innerHTML = '<i class="fa-solid fa-wallet"></i> <span>Connect Wallet</span>';
                    }, 2000);
                },

                finalizeConnection: async (address, provider, type) => {
                    App.state.address = address;
                    App.state.provider = provider;
                    App.state.walletType = type;

                    UI.closeModal();
                    
                    await App.wallet.switchNetwork();
                    
                    const balanceHistory = JSON.parse(localStorage.getItem(STORAGE_KEYS.TOKEN_BALANCE_HISTORY) || '{}');
                    const savedBalance = balanceHistory[address] || '0.00';
                    App.state.krmBalance = savedBalance;
                    
                    UI.saveConnection(App.state.address, type);
                    UI.setConnectedState(App.state.address, App.state.krmBalance);
                    
                    App.wallet.setupEventListeners();
                    
                    const connectBtn = document.getElementById('connectBtn');
                    connectBtn.classList.remove('connecting');
                    UI.showNotification(`${type} connected successfully!`, 'success');
                    
                    App.tasks.startTransactionMonitoring();
                },

                disconnect: () => {
                    if (App.state.walletType === 'WC' && App.state.walletConnect) {
                        App.state.walletConnect.disconnect();
                    }
                    
                    App.state.address = null;
                    App.state.provider = null;
                    App.state.walletType = null;
                    App.state.walletConnect = null;
                    App.state.krmBalance = '0.00';
                    
                    UI.clearConnection();
                    UI.resetState();
                    UI.showNotification('Wallet disconnected', 'success');
                    
                    const dropdown = document.getElementById('userDropdown');
                    dropdown.classList.add('hidden');
                    
                    UI.closeMobileMenu();
                },

                switchNetwork: async () => {
                    if (App.state.walletType === 'WC' || !window.ethereum) return;
                    
                    try {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: Config.chain.hex }],
                        });
                    } catch (switchError) {
                        if (switchError.code === 4902) {
                            try {
                                await window.ethereum.request({
                                    method: 'wallet_addEthereumChain',
                                    params: [{
                                        chainId: Config.chain.hex,
                                        chainName: Config.chain.name,
                                        rpcUrls: [Config.chain.rpc],
                                        nativeCurrency: { 
                                            name: 'KarChain', 
                                            symbol: Config.chain.symbol, 
                                            decimals: Config.chain.decimals 
                                        },
                                        blockExplorerUrls: [Config.chain.explorer]
                                    }],
                                });
                            } catch (addError) { 
                                console.error(addError); 
                                UI.showNotification('Failed to add network. Please add manually.', 'error');
                            }
                        }
                    }
                },

                loadTokenBalance: async () => {
                    try {
                        if (!App.state.provider || !App.state.address) return;
                        
                        const ethBalance = await App.state.provider.getBalance(App.state.address);
                        const ethBalanceFormatted = ethers.utils.formatEther(ethBalance);
                        
                        App.state.krmBalance = parseFloat(ethBalanceFormatted).toFixed(4);
                        UI.updateBalance(App.state.krmBalance);
                        
                        UI.showNotification(`Balance updated: ${App.state.krmBalance} KRM`, 'success');
                        
                    } catch (error) {
                        console.error('Error loading balance:', error);
                        UI.showNotification('Failed to load balance', 'error');
                    }
                },

                refreshBalance: async () => {
                    if (!App.state.address) {
                        UI.showNotification('Please connect wallet first', 'error');
                        return;
                    }
                    
                    try {
                        UI.showNotification('Refreshing balance...', 'info');
                        await App.wallet.loadTokenBalance();
                    } catch (error) {
                        console.error('Error refreshing balance:', error);
                        UI.showNotification('Failed to refresh balance', 'error');
                    }
                },

                setupEventListeners: () => {
                    if (App.state.walletType !== 'WC' && window.ethereum) {
                        window.ethereum.on('accountsChanged', async (accounts) => {
                            if (accounts.length === 0) {
                                App.wallet.disconnect();
                            } else if (accounts[0] !== App.state.address) {
                                App.state.address = accounts[0];
                                UI.saveConnection(App.state.address, App.state.walletType);
                                
                                const balanceHistory = JSON.parse(localStorage.getItem(STORAGE_KEYS.TOKEN_BALANCE_HISTORY) || '{}');
                                const savedBalance = balanceHistory[App.state.address] || '0.00';
                                App.state.krmBalance = savedBalance;
                                
                                UI.setConnectedState(App.state.address, App.state.krmBalance);
                                UI.showNotification('Account changed', 'info');
                            }
                        });

                        window.ethereum.on('chainChanged', async (chainId) => {
                            if (parseInt(chainId) !== Config.chain.id) {
                                UI.showNotification('Please switch to KarChain network', 'error');
                                await App.wallet.switchNetwork();
                            } else {
                                await App.wallet.loadTokenBalance();
                            }
                        });
                    }
                },

                tryReconnect: async () => {
                    const isConnected = localStorage.getItem(STORAGE_KEYS.WALLET_CONNECTED);
                    const savedAddress = localStorage.getItem(STORAGE_KEYS.WALLET_ADDRESS);
                    const walletType = localStorage.getItem(STORAGE_KEYS.WALLET_TYPE);
                    
                    if (isConnected === 'true' && savedAddress && walletType) {
                        try {
                            let provider;
                            
                            if (walletType === 'MetaMask' || walletType === 'Trust') {
                                if (!window.ethereum) return false;
                                
                                provider = new ethers.providers.Web3Provider(window.ethereum);
                                const accounts = await provider.send("eth_accounts", []);
                                
                                if (accounts.length > 0 && accounts[0].toLowerCase() === savedAddress.toLowerCase()) {
                                    App.state.address = accounts[0];
                                    App.state.provider = provider;
                                    App.state.walletType = walletType;
                                    
                                    const balanceHistory = JSON.parse(localStorage.getItem(STORAGE_KEYS.TOKEN_BALANCE_HISTORY) || '{}');
                                    const savedBalance = balanceHistory[App.state.address] || '0.00';
                                    App.state.krmBalance = savedBalance;
                                    
                                    UI.setConnectedState(App.state.address, App.state.krmBalance);
                                    App.wallet.setupEventListeners();
                                    
                                    UI.showNotification('Wallet reconnected', 'success');
                                    return true;
                                }
                            }
                        } catch (e) {
                            console.log("Auto-reconnect failed:", e);
                        }
                    }
                    return false;
                }
            },

            faucet: {
                claimTokens: async () => {
                    try {
                        if (!App.state.address) {
                            UI.showNotification('Please connect wallet first', 'error');
                            return;
                        }
                        
                        const lastClaim = localStorage.getItem(STORAGE_KEYS.LAST_FAUCET_CLAIM);
                        const now = Date.now();
                        const twentyFourHours = 24 * 60 * 60 * 1000;
                        
                        if (lastClaim && (now - parseInt(lastClaim)) < twentyFourHours) {
                            const nextClaim = new Date(parseInt(lastClaim) + twentyFourHours);
                            UI.showNotification(`Faucet on cooldown. Next claim available at ${nextClaim.toLocaleTimeString()}`, 'error');
                            return;
                        }
                        
                        UI.showNotification('Requesting test tokens...', 'info');
                        
                        setTimeout(() => {
                            const currentBalance = parseFloat(App.state.krmBalance || 0);
                            const newBalance = (currentBalance + 100).toFixed(4);
                            App.state.krmBalance = newBalance;
                            UI.updateBalance(newBalance);
                            
                            localStorage.setItem(STORAGE_KEYS.LAST_FAUCET_CLAIM, now.toString());
                            
                            UI.showNotification('Received 100 test KRM tokens!', 'success');
                        }, 2000);
                        
                    } catch (error) {
                        console.error('Faucet error:', error);
                        UI.showNotification('Failed to get test tokens', 'error');
                    }
                }
            },

            tasks: {
                completedTasks: JSON.parse(localStorage.getItem(STORAGE_KEYS.TASKS_COMPLETED) || '[]'),
                transactionMonitoring: null,

                openTwitter: () => {
                    window.open(Config.tasks.twitterUrl, '_blank');
                    localStorage.setItem(STORAGE_KEYS.SOCIAL_TASK_STARTED, 'true');
                    
                    setTimeout(() => {
                        const verifyBtn = document.getElementById('verify-social');
                        if (verifyBtn) {
                            verifyBtn.disabled = false;
                            verifyBtn.classList.remove('cursor-not-allowed', 'border-white/20', 'text-gray-500');
                            verifyBtn.classList.add('bg-green-600', 'text-white', 'hover:bg-green-500', 'border-transparent');
                            verifyBtn.innerHTML = 'VERIFY BOTH';
                        }
                    }, 2000);
                    
                    UI.showNotification('Opening X... Follow our account!', 'info');
                },

                openTelegram: () => {
                    window.open(Config.tasks.telegramUrl, '_blank');
                    localStorage.setItem(STORAGE_KEYS.SOCIAL_TASK_STARTED, 'true');
                    
                    setTimeout(() => {
                        const verifyBtn = document.getElementById('verify-social');
                        if (verifyBtn) {
                            verifyBtn.disabled = false;
                            verifyBtn.classList.remove('cursor-not-allowed', 'border-white/20', 'text-gray-500');
                            verifyBtn.classList.add('bg-green-600', 'text-white', 'hover:bg-green-500', 'border-transparent');
                            verifyBtn.innerHTML = 'VERIFY BOTH';
                        }
                    }, 2000);
                    
                    UI.showNotification('Opening Telegram... Join our channel!', 'info');
                },

                completeSocialTask: () => {
                    const verifyBtn = document.getElementById('verify-social');
                    if (verifyBtn && verifyBtn.disabled === false) {
                        verifyBtn.disabled = true;
                        verifyBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
                        
                        gsap.to(verifyBtn, {
                            rotation: 360,
                            duration: 1.5,
                            ease: "power2.out",
                            repeat: -1
                        });
                        
                        setTimeout(() => {
                            gsap.killTweensOf(verifyBtn);
                            verifyBtn.innerHTML = 'COMPLETED';
                            verifyBtn.classList.replace('border-white/20', 'bg-green-900/50');
                            verifyBtn.classList.add('text-green-400');
                            
                            if (!App.tasks.completedTasks.includes(1)) {
                                App.tasks.completedTasks.push(1);
                                localStorage.setItem(STORAGE_KEYS.TASKS_COMPLETED, JSON.stringify(App.tasks.completedTasks));
                            }
                            
                            UI.updateTaskProgress(App.tasks.completedTasks.length);
                            UI.unlockTask(2);
                            UI.showNotification('Social task completed!', 'success');
                            
                            setTimeout(() => {
                                App.faucet.claimTokens();
                            }, 1000);
                        }, 1500);
                    } else {
                        UI.showNotification('Please open both X and Telegram first', 'info');
                    }
                },

                checkTransaction: () => {
                    if (!App.state.address) {
                        UI.showNotification('Please connect wallet first', 'error');
                        return;
                    }

                    const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
                    
                    if (transactions.length > 0) {
                        App.tasks.completeTask(2, 'Transaction verified!');
                    } else {
                        UI.showNotification('No transactions found. Make a transaction first.', 'info');
                    }
                },

                openGoogleForm: () => {
                    const formUrl = `${Config.tasks.googleFormUrl}?entry.1234567890=${encodeURIComponent(App.state.address)}`;
                    window.open(formUrl, '_blank');
                    
                    setTimeout(() => {
                        App.tasks.completeTask(3, 'Form submitted!');
                    }, 3000);
                },

                completeTask: (taskId, message) => {
                    const btn = taskId === 2 ? document.getElementById('verify-transaction') : null;
                    
                    if (btn && btn.disabled === false) {
                        btn.disabled = true;
                        btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
                        
                        gsap.to(btn, {
                            rotation: 360,
                            duration: 1.5,
                            ease: "power2.out",
                            repeat: -1
                        });
                        
                        setTimeout(() => {
                            gsap.killTweensOf(btn);
                            btn.innerHTML = 'COMPLETED';
                            btn.classList.replace('border-white/20', 'bg-green-900/50');
                            btn.classList.add('text-green-400');
                            
                            if (!App.tasks.completedTasks.includes(taskId)) {
                                App.tasks.completedTasks.push(taskId);
                                localStorage.setItem(STORAGE_KEYS.TASKS_COMPLETED, JSON.stringify(App.tasks.completedTasks));
                            }
                            
                            UI.updateTaskProgress(App.tasks.completedTasks.length);
                            
                            if (taskId === 2) {
                                UI.unlockTask(3);
                            }
                            
                            UI.showNotification(message || `Task ${taskId} completed!`, 'success');
                        }, 1500);
                    }
                },

                startTransactionMonitoring: () => {
                    if (!App.state.address || App.tasks.transactionMonitoring) return;
                    
                    App.tasks.transactionMonitoring = setInterval(() => {
                        App.tasks.checkForTransactions();
                    }, 30000);
                    
                    App.tasks.checkForTransactions();
                },

                checkForTransactions: async () => {
                    if (!App.state.address || !App.state.provider) return;
                    
                    try {
                        const blockNumber = await App.state.provider.getBlockNumber();
                        
                        for (let i = Math.max(0, blockNumber - 100); i <= blockNumber; i++) {
                            const block = await App.state.provider.getBlockWithTransactions(i);
                            
                            if (block && block.transactions) {
                                block.transactions.forEach(tx => {
                                    if (tx.from.toLowerCase() === App.state.address.toLowerCase()) {
                                        const existingTransactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
                                        const txExists = existingTransactions.some(t => t.hash === tx.hash);
                                        
                                        if (!txExists) {
                                            UI.addTransaction({
                                                hash: tx.hash,
                                                from: tx.from,
                                                to: tx.to,
                                                value: ethers.utils.formatEther(tx.value),
                                                timestamp: new Date().toISOString()
                                            });
                                            
                                            UI.showNotification('New transaction detected!', 'success');
                                            
                                            if (!App.tasks.completedTasks.includes(2)) {
                                                App.tasks.completeTask(2, 'Transaction verified automatically!');
                                            }
                                        }
                                    }
                                });
                            }
                        }
                    } catch (error) {
                        console.error('Error checking transactions:', error);
                    }
                },

                makeTestTransaction: async () => {
                    if (!App.state.address || !App.state.provider) {
                        UI.showNotification('Please connect wallet first', 'error');
                        return;
                    }

                    try {
                        const signer = App.state.provider.getSigner();
                        
                        const balance = await signer.getBalance();
                        if (balance.lt(ethers.utils.parseEther("0.001"))) {
                            UI.showNotification('Insufficient balance for transaction', 'error');
                            return;
                        }
                        
                        const tx = await signer.sendTransaction({
                            to: App.state.address,
                            value: ethers.utils.parseEther("0.001")
                        });
                        
                        UI.showNotification(`Transaction sent! Hash: ${tx.hash.substring(0, 10)}...`, 'success');
                        
                        await tx.wait();
                        
                        UI.showNotification('Transaction confirmed!', 'success');
                        
                        UI.addTransaction({
                            hash: tx.hash,
                            from: App.state.address,
                            to: App.state.address,
                            value: "0.001",
                            timestamp: new Date().toISOString()
                        });
                        
                        if (!App.tasks.completedTasks.includes(2)) {
                            App.tasks.completeTask(2, 'Transaction verified!');
                        }
                        
                    } catch (error) {
                        console.error('Transaction error:', error);
                        UI.showNotification(`Transaction failed: ${error.message}`, 'error');
                    }
                }
            }
        };

        window.App = App;

        window.addEventListener('load', async () => {
            await App.ui.init();
            
            if (localStorage.getItem(STORAGE_KEYS.WALLET_CONNECTED) === 'true') {
                setTimeout(async () => {
                    await App.wallet.tryReconnect();
                }, 1000);
            }
        });

        // –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Å–∫—Ä–æ–ª—É
        window.addEventListener('scroll', () => {
            // requestAnimationFrame –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ initSmoothScroll
        }, { passive: true });

        window.addEventListener('resize', function() {
            // Debounce —Ä–µ—Å–∞–π–∑—É
            if (this.resizeTimeout) {
                clearTimeout(this.resizeTimeout);
            }
            this.resizeTimeout = setTimeout(() => {
                // –û–Ω–æ–≤–ª—é—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—ó
                ScrollTrigger.refresh();
            }, 150);
        });
    </script>
</body>
</html>
